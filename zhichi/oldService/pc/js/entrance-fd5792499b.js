!function e(t,i,a){function s(o,r){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!r&&l)return l(o,!0);if(n)return n(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return s(i?i:e)},c,c.exports,e,t,i,a)}return i[o].exports}for(var n="function"==typeof require&&require,o=0;o<a.length;o++)s(a[o]);return s}({1:[function(e,t,i){var a={preURLLink:document.referrer,decodeUrl:function(e){return"string"==typeof e?decodeURIComponent(e):void 0},getQueryParam:function(e){e=e||document.location.href;var t=e.substring(e.lastIndexOf("?")+1);t.lastIndexOf("#")>=0&&(t=t.substring(0,t.lastIndexOf("#")));for(var i=t.split("&"),s={},n=0;n<i.length;n++){var o=i[n];try{var r=o.substring(0,o.indexOf("=")),l=o.substring(o.indexOf("=")+1);if(0==r.length)continue;/^-?(\d+)(\.\d+)?$/.test(l)?0===l.indexOf("0")?s[r]=""+l:(""+l).length>10?s[r]=""+l:s[r]=Number(l):"true"===l?s[r]=!0:"false"===l?s[r]=!1:s[r]=a.decodeUrl(l)}catch(c){continue}}return s},getUrlRegex:function(e){e=e.replace(/&amp;/g,"&"),e=e.replace(/&amp/g,"&");for(var t="",i=e.split(/\s+/),a=0;a<i.length;a++){var s=function(e){var t=/((https?|ftp|news):\/\/)?([a-zA-Z]([a-z0-9A-Z\-]*[\.])+([a-zA-Z]{2}|(aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)(:[0-9]{1,4})?)|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(:[0-9]{1,4})?)(\/[a-zA-Z0-9_%=#\-\.~]+)*(\/([a-zA-Z0-9%=#_\-\.]*)(\?[a-zA-Z0-9+_\/\-\.#%=&]*)?)?(#[a-zA-Z][a-zA-Z0-9_]*)?$/;if(e.match(t)){var i=/(https?):\/\/([a-zA-Z]([a-z0-9A-Z\-]*[\.])+([a-zA-Z]{2}|(aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)(:[0-9]{1,4})?)|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(:[0-9]{1,4})?)(\/[a-zA-Z0-9_%=#\-\.~]+)*(\/([a-zA-Z0-9%=#_\-\.]*)(\?[a-zA-Z0-9+_\/\-\.#%=&]*)?)?(#[a-zA-Z][a-zA-Z0-9_]*)?$/;e=e.match(i)?'<a href="'+e+'" target="_blank">'+e+"</a>":'<a href="http://'+e+'" target="_blank">'+e+"</a>"}return e+" "}(i[a]);t+=s}return t},getNewUrlRegex:function(e){e=e.replace(/&amp;/g,"&"),e=e.replace(/&amp/g,"&");for(var t="",i=e.split(/\s+/),a=0;a<i.length;a++){var s=function(e){var t=/^(((https?):\/\/)|(www))[a-zA-Z0-9_\-]+((\.(com|cn|org))|(:[0-9]{2,4}))?(:[0-9]{2,4})?([:\/\(\)\?\.&\-=a-zA-Z0-9;#%_]+)?$/g;if(e.match(t))e=e.match(t)?'<a href="'+e+'" target="_blank">'+e+"</a>":'<a href="http://'+e+'" target="_blank">'+e+"</a>";else{var i=/((www.)|((https?):\/\/))[a-zA-Z0-9_\-]+((\.(com|cn|org))|(:[0-9]{2,4}))?(:[0-9]{2,4})?([:\/\(\)\?\.&\-=a-zA-Z0-9;#%_]+)?/g,a=e.match(i),s=a;if(a&&a.length>0){var n=e.indexOf(a[0]),o=a[0].indexOf("http");if(s=o>=0?'<a href="'+a[0]+'" target="_blank">'+a[0]+"</a>":'<a href="http://'+a[0]+'" target="_blank">'+a[0]+"</a>",0===n)e=s+e.substring(a[0].length,e.length);else{var r=e.substring(0,n),l=r+a[0],c=e.substring(l.length,e.length);e=r+s+c}}}return e+" "}(i[a]);t+=s}return t},format:function(e,t,i){if(i){var a;if("object"==typeof t)for(var s in t){var n="{"+s+"}";a=e.replace(n,t[s])}else for(var o=0;o<t.length;o++){if(void 0==t[o])return"";var n="{"+o+"}";a=e.replace(n,t[o])}return a}return e},detectEventSupport:function(e){var t,i=document.createElement("div");return e="on"+e,t=e in i,t||(i.setAttribute(e,"xxx"),t="function"==typeof i[e]),i=null,t}};t.exports=a},{}],2:[function(e,t,i){t.exports={errorlogPath:"test.sobot.com/errorlog/"}},{}],3:[function(e,t,i){!function(e,a){"object"==typeof i?t.exports=i=a():"function"==typeof define&&define.amd?define([],a):e.CryptoJS=a()}(this,function(){var e=e||function(e,t){var i=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),a={},s=a.lib={},n=s.Base=function(){return{extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=s.WordArray=n.extend({init:function(e,i){e=this.words=e||[],i!=t?this.sigBytes=i:this.sigBytes=4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,a=this.sigBytes,s=e.sigBytes;if(this.clamp(),a%4)for(var n=0;n<s;n++){var o=i[n>>>2]>>>24-n%4*8&255;t[a+n>>>2]|=o<<24-(a+n)%4*8}else for(var n=0;n<s;n+=4)t[a+n>>>2]=i[n>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,a=[],s=function(t){var t=t,i=987654321,a=4294967295;return function(){i=36969*(65535&i)+(i>>16)&a,t=18e3*(65535&t)+(t>>16)&a;var s=(i<<16)+t&a;return s/=4294967296,s+=.5,s*(e.random()>.5?1:-1)}},n=0;n<t;n+=4){var r=s(4294967296*(i||e.random()));i=987654071*r(),a.push(4294967296*r()|0)}return new o.init(a,t)}}),r=a.enc={},l=r.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,a=[],s=0;s<i;s++){var n=t[s>>>2]>>>24-s%4*8&255;a.push((n>>>4).toString(16)),a.push((15&n).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a+=2)i[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new o.init(i,t/2)}},c=r.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,a=[],s=0;s<i;s++){var n=t[s>>>2]>>>24-s%4*8&255;a.push(String.fromCharCode(n))}return a.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a++)i[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new o.init(i,t)}},d=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=s.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,a=i.words,s=i.sigBytes,n=this.blockSize,r=4*n,l=s/r;l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0);var c=l*n,d=e.min(4*c,s);if(c){for(var u=0;u<c;u+=n)this._doProcessBlock(a,u);var f=a.splice(0,c);i.sigBytes-=d}return new o.init(f,d)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(s.Hasher=u.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new f.HMAC.init(e,i).finalize(t)}}}),a.algo={});return a}(Math);return function(){function t(e,t,i){for(var a=[],n=0,o=0;o<t;o++)if(o%4){var r=i[e.charCodeAt(o-1)]<<o%4*2,l=i[e.charCodeAt(o)]>>>6-o%4*2;a[n>>>2]|=(r|l)<<24-n%4*8,n++}return s.create(a,n)}var i=e,a=i.lib,s=a.WordArray,n=i.enc;n.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,a=this._map;e.clamp();for(var s=[],n=0;n<i;n+=3)for(var o=t[n>>>2]>>>24-n%4*8&255,r=t[n+1>>>2]>>>24-(n+1)%4*8&255,l=t[n+2>>>2]>>>24-(n+2)%4*8&255,c=o<<16|r<<8|l,d=0;d<4&&n+.75*d<i;d++)s.push(a.charAt(c>>>6*(3-d)&63));var u=a.charAt(64);if(u)for(;s.length%4;)s.push(u);return s.join("")},parse:function(e){var i=e.length,a=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var n=0;n<a.length;n++)s[a.charCodeAt(n)]=n}var o=a.charAt(64);if(o){var r=e.indexOf(o);r!==-1&&(i=r)}return t(e,i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function i(e,t,i,a,s,n,o){var r=e+(t&i|~t&a)+s+o;return(r<<n|r>>>32-n)+t}function a(e,t,i,a,s,n,o){var r=e+(t&a|i&~a)+s+o;return(r<<n|r>>>32-n)+t}function s(e,t,i,a,s,n,o){var r=e+(t^i^a)+s+o;return(r<<n|r>>>32-n)+t}function n(e,t,i,a,s,n,o){var r=e+(i^(t|~a))+s+o;return(r<<n|r>>>32-n)+t}var o=e,r=o.lib,l=r.WordArray,c=r.Hasher,d=o.algo,u=[];!function(){for(var e=0;e<64;e++)u[e]=4294967296*t.abs(t.sin(e+1))|0}();var f=d.MD5=c.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var r=t+o,l=e[r];e[r]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var c=this._hash.words,d=e[t+0],f=e[t+1],p=e[t+2],g=e[t+3],m=e[t+4],v=e[t+5],h=e[t+6],y=e[t+7],j=e[t+8],T=e[t+9],b=e[t+10],w=e[t+11],x=e[t+12],I=e[t+13],F=e[t+14],k=e[t+15],C=c[0],S=c[1],A=c[2],$=c[3];C=i(C,S,A,$,d,7,u[0]),$=i($,C,S,A,f,12,u[1]),A=i(A,$,C,S,p,17,u[2]),S=i(S,A,$,C,g,22,u[3]),C=i(C,S,A,$,m,7,u[4]),$=i($,C,S,A,v,12,u[5]),A=i(A,$,C,S,h,17,u[6]),S=i(S,A,$,C,y,22,u[7]),C=i(C,S,A,$,j,7,u[8]),$=i($,C,S,A,T,12,u[9]),A=i(A,$,C,S,b,17,u[10]),S=i(S,A,$,C,w,22,u[11]),C=i(C,S,A,$,x,7,u[12]),$=i($,C,S,A,I,12,u[13]),A=i(A,$,C,S,F,17,u[14]),S=i(S,A,$,C,k,22,u[15]),C=a(C,S,A,$,f,5,u[16]),$=a($,C,S,A,h,9,u[17]),A=a(A,$,C,S,w,14,u[18]),S=a(S,A,$,C,d,20,u[19]),C=a(C,S,A,$,v,5,u[20]),$=a($,C,S,A,b,9,u[21]),A=a(A,$,C,S,k,14,u[22]),S=a(S,A,$,C,m,20,u[23]),C=a(C,S,A,$,T,5,u[24]),$=a($,C,S,A,F,9,u[25]),A=a(A,$,C,S,g,14,u[26]),S=a(S,A,$,C,j,20,u[27]),C=a(C,S,A,$,I,5,u[28]),$=a($,C,S,A,p,9,u[29]),A=a(A,$,C,S,y,14,u[30]),S=a(S,A,$,C,x,20,u[31]),C=s(C,S,A,$,v,4,u[32]),$=s($,C,S,A,j,11,u[33]),A=s(A,$,C,S,w,16,u[34]),S=s(S,A,$,C,F,23,u[35]),C=s(C,S,A,$,f,4,u[36]),$=s($,C,S,A,m,11,u[37]),A=s(A,$,C,S,y,16,u[38]),S=s(S,A,$,C,b,23,u[39]),C=s(C,S,A,$,I,4,u[40]),$=s($,C,S,A,d,11,u[41]),A=s(A,$,C,S,g,16,u[42]),S=s(S,A,$,C,h,23,u[43]),C=s(C,S,A,$,T,4,u[44]),$=s($,C,S,A,x,11,u[45]),A=s(A,$,C,S,k,16,u[46]),S=s(S,A,$,C,p,23,u[47]),C=n(C,S,A,$,d,6,u[48]),$=n($,C,S,A,y,10,u[49]),A=n(A,$,C,S,F,15,u[50]),S=n(S,A,$,C,v,21,u[51]),C=n(C,S,A,$,x,6,u[52]),$=n($,C,S,A,g,10,u[53]),A=n(A,$,C,S,b,15,u[54]),S=n(S,A,$,C,f,21,u[55]),C=n(C,S,A,$,j,6,u[56]),$=n($,C,S,A,k,10,u[57]),A=n(A,$,C,S,h,15,u[58]),S=n(S,A,$,C,I,21,u[59]),C=n(C,S,A,$,m,6,u[60]),$=n($,C,S,A,w,10,u[61]),A=n(A,$,C,S,p,15,u[62]),S=n(S,A,$,C,T,21,u[63]),c[0]=c[0]+C|0,c[1]=c[1]+S|0,c[2]=c[2]+A|0,c[3]=c[3]+$|0},_doFinalize:function(){var e=this._data,i=e.words,a=8*this._nDataBytes,s=8*e.sigBytes;i[s>>>5]|=128<<24-s%32;var n=t.floor(a/4294967296),o=a;i[(s+64>>>9<<4)+15]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),i[(s+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(i.length+1),this._process();for(var r=this._hash,l=r.words,c=0;c<4;c++){var d=l[c];l[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return r},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}});o.MD5=c._createHelper(f),o.HmacMD5=c._createHmacHelper(f)}(Math),function(){var t=e,i=t.lib,a=i.WordArray,s=i.Hasher,n=t.algo,o=[],r=n.SHA1=s.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,a=i[0],s=i[1],n=i[2],r=i[3],l=i[4],c=0;c<80;c++){if(c<16)o[c]=0|e[t+c];else{var d=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=d<<1|d>>>31}var u=(a<<5|a>>>27)+l+o[c];u+=c<20?(s&n|~s&r)+1518500249:c<40?(s^n^r)+1859775393:c<60?(s&n|s&r|n&r)-1894007588:(s^n^r)-899497514,l=r,r=n,n=s<<30|s>>>2,s=a,a=u}i[0]=i[0]+a|0,i[1]=i[1]+s|0,i[2]=i[2]+n|0,i[3]=i[3]+r|0,i[4]=i[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,a=8*e.sigBytes;return t[a>>>5]|=128<<24-a%32,t[(a+64>>>9<<4)+14]=Math.floor(i/4294967296),t[(a+64>>>9<<4)+15]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=s._createHelper(r),t.HmacSHA1=s._createHmacHelper(r)}(),function(t){var i=e,a=i.lib,s=a.WordArray,n=a.Hasher,o=i.algo,r=[],l=[];!function(){function e(e){for(var i=t.sqrt(e),a=2;a<=i;a++)if(!(e%a))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var a=2,s=0;s<64;)e(a)&&(s<8&&(r[s]=i(t.pow(a,.5))),l[s]=i(t.pow(a,1/3)),s++),a++}();var c=[],d=o.SHA256=n.extend({_doReset:function(){this._hash=new s.init(r.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,a=i[0],s=i[1],n=i[2],o=i[3],r=i[4],d=i[5],u=i[6],f=i[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var g=c[p-15],m=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,v=c[p-2],h=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[p]=m+c[p-7]+h+c[p-16]}var y=r&d^~r&u,j=a&s^a&n^s&n,T=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),b=(r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25),w=f+b+y+l[p]+c[p],x=T+j;f=u,u=d,d=r,r=o+w|0,o=n,n=s,s=a,a=w+x|0}i[0]=i[0]+a|0,i[1]=i[1]+s|0,i[2]=i[2]+n|0,i[3]=i[3]+o|0,i[4]=i[4]+r|0,i[5]=i[5]+d|0,i[6]=i[6]+u|0,i[7]=i[7]+f|0},_doFinalize:function(){var e=this._data,i=e.words,a=8*this._nDataBytes,s=8*e.sigBytes;return i[s>>>5]|=128<<24-s%32,i[(s+64>>>9<<4)+14]=t.floor(a/4294967296),i[(s+64>>>9<<4)+15]=a,e.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});i.SHA256=n._createHelper(d),i.HmacSHA256=n._createHmacHelper(d)}(Math),function(){function t(e){return e<<8&4278255360|e>>>8&16711935}var i=e,a=i.lib,s=a.WordArray,n=i.enc;n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,a=[],s=0;s<i;s+=2){var n=t[s>>>2]>>>16-s%4*8&65535;a.push(String.fromCharCode(n))}return a.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a++)i[a>>>1]|=e.charCodeAt(a)<<16-a%2*16;return s.create(i,2*t)}},n.Utf16LE={stringify:function(e){for(var i=e.words,a=e.sigBytes,s=[],n=0;n<a;n+=2){var o=t(i[n>>>2]>>>16-n%4*8&65535);s.push(String.fromCharCode(o))}return s.join("")},parse:function(e){for(var i=e.length,a=[],n=0;n<i;n++)a[n>>>1]|=t(e.charCodeAt(n)<<16-n%2*16);return s.create(a,2*i)}}}(),function(){if("function"==typeof ArrayBuffer){var t=e,i=t.lib,a=i.WordArray,s=a.init,n=a.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],a=0;a<t;a++)i[a>>>2]|=e[a]<<24-a%4*8;s.call(this,i,t)}else s.apply(this,arguments)};n.prototype=a}}(),function(t){function i(e,t,i){return e^t^i}function a(e,t,i){return e&t|~e&i}function s(e,t,i){return(e|~t)^i}function n(e,t,i){return e&i|t&~i}function o(e,t,i){return e^(t|~i)}function r(e,t){return e<<t|e>>>32-t}var l=e,c=l.lib,d=c.WordArray,u=c.Hasher,f=l.algo,p=d.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),g=d.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),m=d.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),v=d.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=d.create([0,1518500249,1859775393,2400959708,2840853838]),y=d.create([1352829926,1548603684,1836072691,2053994217,0]),j=f.RIPEMD160=u.extend({_doReset:function(){this._hash=d.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var l=0;l<16;l++){var c=t+l,d=e[c];e[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}var u,f,j,T,b,w,x,I,F,k,C=this._hash.words,S=h.words,A=y.words,$=p.words,M=g.words,L=m.words,_=v.words;w=u=C[0],x=f=C[1],I=j=C[2],F=T=C[3],k=b=C[4];for(var P,l=0;l<80;l+=1)P=u+e[t+$[l]]|0,P+=l<16?i(f,j,T)+S[0]:l<32?a(f,j,T)+S[1]:l<48?s(f,j,T)+S[2]:l<64?n(f,j,T)+S[3]:o(f,j,T)+S[4],P|=0,P=r(P,L[l]),P=P+b|0,u=b,b=T,T=r(j,10),j=f,f=P,P=w+e[t+M[l]]|0,P+=l<16?o(x,I,F)+A[0]:l<32?n(x,I,F)+A[1]:l<48?s(x,I,F)+A[2]:l<64?a(x,I,F)+A[3]:i(x,I,F)+A[4],P|=0,P=r(P,_[l]),P=P+k|0,w=k,k=F,F=r(I,10),I=x,x=P;P=C[1]+j+F|0,C[1]=C[2]+T+k|0,C[2]=C[3]+b+w|0,C[3]=C[4]+u+x|0,C[4]=C[0]+f+I|0,C[0]=P},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,a=8*e.sigBytes;t[a>>>5]|=128<<24-a%32,t[(a+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,n=s.words,o=0;o<5;o++){var r=n[o];n[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}return s},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}});l.RIPEMD160=u._createHelper(j),l.HmacRIPEMD160=u._createHmacHelper(j)}(Math),function(){var t=e,i=t.lib,a=i.Base,s=t.enc,n=s.Utf8,o=t.algo;o.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var i=e.blockSize,a=4*i;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),o=this._iKey=t.clone(),r=s.words,l=o.words,c=0;c<i;c++)r[c]^=1549556828,l[c]^=909522486;s.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);t.reset();var a=t.finalize(this._oKey.clone().concat(i));return a}})}(),function(){var t=e,i=t.lib,a=i.Base,s=i.WordArray,n=t.algo,o=n.SHA1,r=n.HMAC,l=n.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,a=r.create(i.hasher,e),n=s.create(),o=s.create([1]),l=n.words,c=o.words,d=i.keySize,u=i.iterations;l.length<d;){var f=a.update(t).finalize(o);a.reset();for(var p=f.words,g=p.length,m=f,v=1;v<u;v++){m=a.finalize(m),a.reset();for(var h=m.words,y=0;y<g;y++)p[y]^=h[y]}n.concat(f),c[0]++}return n.sigBytes=4*d,n}});t.PBKDF2=function(e,t,i){return l.create(i).compute(e,t)}}(),function(){var t=e,i=t.lib,a=i.Base,s=i.WordArray,n=t.algo,o=n.MD5,r=n.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,a=i.hasher.create(),n=s.create(),o=n.words,r=i.keySize,l=i.iterations;o.length<r;){c&&a.update(c);var c=a.update(e).finalize(t);a.reset();for(var d=1;d<l;d++)c=a.finalize(c),a.reset();n.concat(c)}return n.sigBytes=4*r,n}});t.EvpKDF=function(e,t,i){return r.create(i).compute(e,t)}}(),function(){var t=e,i=t.lib,a=i.WordArray,s=t.algo,n=s.SHA256,o=s.SHA224=n.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=n._createHelper(o),t.HmacSHA224=n._createHmacHelper(o)}(),function(t){var i=e,a=i.lib,s=a.Base,n=a.WordArray,o=i.x64={};o.Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),o.WordArray=s.extend({init:function(e,i){e=this.words=e||[],i!=t?this.sigBytes=i:this.sigBytes=8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],a=0;a<t;a++){var s=e[a];i.push(s.high),i.push(s.low)}return n.create(i,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),i=t.length,a=0;a<i;a++)t[a]=t[a].clone();return e}})}(),function(t){var i=e,a=i.lib,s=a.WordArray,n=a.Hasher,o=i.x64,r=o.Word,l=i.algo,c=[],d=[],u=[];!function(){for(var e=1,t=0,i=0;i<24;i++){c[e+5*t]=(i+1)*(i+2)/2%64;var a=t%5,s=(2*e+3*t)%5;e=a,t=s}for(var e=0;e<5;e++)for(var t=0;t<5;t++)d[e+5*t]=t+(2*e+3*t)%5*5;for(var n=1,o=0;o<24;o++){for(var l=0,f=0,p=0;p<7;p++){if(1&n){var g=(1<<p)-1;g<32?f^=1<<g:l^=1<<g-32}128&n?n=n<<1^113:n<<=1}u[o]=r.create(l,f)}}();var f=[];!function(){for(var e=0;e<25;e++)f[e]=r.create()}();var p=l.SHA3=n.extend({cfg:n.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new r.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,a=this.blockSize/2,s=0;s<a;s++){var n=e[t+2*s],o=e[t+2*s+1];n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);var r=i[s];r.high^=o,r.low^=n}for(var l=0;l<24;l++){for(var p=0;p<5;p++){for(var g=0,m=0,v=0;v<5;v++){var r=i[p+5*v];g^=r.high,m^=r.low}var h=f[p];h.high=g,h.low=m}for(var p=0;p<5;p++)for(var y=f[(p+4)%5],j=f[(p+1)%5],T=j.high,b=j.low,g=y.high^(T<<1|b>>>31),m=y.low^(b<<1|T>>>31),v=0;v<5;v++){var r=i[p+5*v];r.high^=g,r.low^=m}for(var w=1;w<25;w++){var r=i[w],x=r.high,I=r.low,F=c[w];if(F<32)var g=x<<F|I>>>32-F,m=I<<F|x>>>32-F;else var g=I<<F-32|x>>>64-F,m=x<<F-32|I>>>64-F;var k=f[d[w]];k.high=g,k.low=m}var C=f[0],S=i[0];C.high=S.high,C.low=S.low;for(var p=0;p<5;p++)for(var v=0;v<5;v++){var w=p+5*v,r=i[w],A=f[w],$=f[(p+1)%5+5*v],M=f[(p+2)%5+5*v];r.high=A.high^~$.high&M.high,r.low=A.low^~$.low&M.low}var r=i[0],L=u[l];r.high^=L.high,r.low^=L.low}},_doFinalize:function(){var e=this._data,i=e.words,a=(8*this._nDataBytes,8*e.sigBytes),n=32*this.blockSize;i[a>>>5]|=1<<24-a%32,i[(t.ceil((a+1)/n)*n>>>5)-1]|=128,e.sigBytes=4*i.length,this._process();for(var o=this._state,r=this.cfg.outputLength/8,l=r/8,c=[],d=0;d<l;d++){var u=o[d],f=u.high,p=u.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(p),c.push(f)}return new s.init(c,r)},clone:function(){for(var e=n.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});i.SHA3=n._createHelper(p),i.HmacSHA3=n._createHmacHelper(p)}(Math),function(){function t(){return o.create.apply(o,arguments)}var i=e,a=i.lib,s=a.Hasher,n=i.x64,o=n.Word,r=n.WordArray,l=i.algo,c=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],d=[];!function(){for(var e=0;e<80;e++)d[e]=t()}();var u=l.SHA512=s.extend({_doReset:function(){this._hash=new r.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,a=i[0],s=i[1],n=i[2],o=i[3],r=i[4],l=i[5],u=i[6],f=i[7],p=a.high,g=a.low,m=s.high,v=s.low,h=n.high,y=n.low,j=o.high,T=o.low,b=r.high,w=r.low,x=l.high,I=l.low,F=u.high,k=u.low,C=f.high,S=f.low,A=p,$=g,M=m,L=v,_=h,P=y,D=j,B=T,N=b,R=w,O=x,z=I,E=F,H=k,q=C,W=S,U=0;U<80;U++){var G=d[U];if(U<16)var Z=G.high=0|e[t+2*U],V=G.low=0|e[t+2*U+1];else{var J=d[U-15],Q=J.high,K=J.low,X=(Q>>>1|K<<31)^(Q>>>8|K<<24)^Q>>>7,Y=(K>>>1|Q<<31)^(K>>>8|Q<<24)^(K>>>7|Q<<25),ee=d[U-2],te=ee.high,ie=ee.low,ae=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,se=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),ne=d[U-7],oe=ne.high,re=ne.low,le=d[U-16],ce=le.high,de=le.low,V=Y+re,Z=X+oe+(V>>>0<Y>>>0?1:0),V=V+se,Z=Z+ae+(V>>>0<se>>>0?1:0),V=V+de,Z=Z+ce+(V>>>0<de>>>0?1:0);G.high=Z,G.low=V}var ue=N&O^~N&E,fe=R&z^~R&H,pe=A&M^A&_^M&_,ge=$&L^$&P^L&P,me=(A>>>28|$<<4)^(A<<30|$>>>2)^(A<<25|$>>>7),ve=($>>>28|A<<4)^($<<30|A>>>2)^($<<25|A>>>7),he=(N>>>14|R<<18)^(N>>>18|R<<14)^(N<<23|R>>>9),ye=(R>>>14|N<<18)^(R>>>18|N<<14)^(R<<23|N>>>9),je=c[U],Te=je.high,be=je.low,we=W+ye,xe=q+he+(we>>>0<W>>>0?1:0),we=we+fe,xe=xe+ue+(we>>>0<fe>>>0?1:0),we=we+be,xe=xe+Te+(we>>>0<be>>>0?1:0),we=we+V,xe=xe+Z+(we>>>0<V>>>0?1:0),Ie=ve+ge,Fe=me+pe+(Ie>>>0<ve>>>0?1:0);q=E,W=H,E=O,H=z,O=N,z=R,R=B+we|0,N=D+xe+(R>>>0<B>>>0?1:0)|0,D=_,B=P,_=M,P=L,M=A,L=$,$=we+Ie|0,A=xe+Fe+($>>>0<we>>>0?1:0)|0}g=a.low=g+$,a.high=p+A+(g>>>0<$>>>0?1:0),v=s.low=v+L,s.high=m+M+(v>>>0<L>>>0?1:0),y=n.low=y+P,n.high=h+_+(y>>>0<P>>>0?1:0),T=o.low=T+B,o.high=j+D+(T>>>0<B>>>0?1:0),w=r.low=w+R,r.high=b+N+(w>>>0<R>>>0?1:0),I=l.low=I+z,l.high=x+O+(I>>>0<z>>>0?1:0),k=u.low=k+H,u.high=F+E+(k>>>0<H>>>0?1:0),S=f.low=S+W,f.high=C+q+(S>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,a=8*e.sigBytes;t[a>>>5]|=128<<24-a%32,t[(a+128>>>10<<5)+30]=Math.floor(i/4294967296),t[(a+128>>>10<<5)+31]=i,e.sigBytes=4*t.length,this._process();var s=this._hash.toX32();return s},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});i.SHA512=s._createHelper(u),i.HmacSHA512=s._createHmacHelper(u)}(),function(){var t=e,i=t.x64,a=i.Word,s=i.WordArray,n=t.algo,o=n.SHA512,r=n.SHA384=o.extend({_doReset:function(){this._hash=new s.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=o._createHelper(r),t.HmacSHA384=o._createHmacHelper(r)}(),e.lib.Cipher||function(t){var i=e,a=i.lib,s=a.Base,n=a.WordArray,o=a.BufferedBlockAlgorithm,r=i.enc,l=(r.Utf8,r.Base64),c=i.algo,d=c.EvpKDF,u=a.Cipher=o.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?x:T}return function(t){return{encrypt:function(i,a,s){return e(a).encrypt(t,i,a,s)},decrypt:function(i,a,s){return e(a).decrypt(t,i,a,s)}}}}()}),f=(a.StreamCipher=u.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),i.mode={}),p=a.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=f.CBC=function(){function e(e,i,a){var s=this._iv;if(s){var n=s;this._iv=t}else var n=this._prevBlock;for(var o=0;o<a;o++)e[i+o]^=n[o]}var i=p.extend();return i.Encryptor=i.extend({processBlock:function(t,i){var a=this._cipher,s=a.blockSize;e.call(this,t,i,s),a.encryptBlock(t,i),this._prevBlock=t.slice(i,i+s)}}),i.Decryptor=i.extend({processBlock:function(t,i){var a=this._cipher,s=a.blockSize,n=t.slice(i,i+s);a.decryptBlock(t,i),e.call(this,t,i,s),this._prevBlock=n}}),i}(),m=i.pad={},v=m.Pkcs7={pad:function(e,t){for(var i=4*t,a=i-e.sigBytes%i,s=a<<24|a<<16|a<<8|a,o=[],r=0;r<a;r+=4)o.push(s);var l=n.create(o,a);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},h=(a.BlockCipher=u.extend({cfg:u.cfg.extend({mode:g,padding:v}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var a=i.createEncryptor;else{var a=i.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==a?this._mode.init(this,t&&t.words):(this._mode=a.call(i,this,t&&t.words),this._mode.__creator=a)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),a.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=i.format={},j=y.OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var a=n.create([1398893684,1701076831]).concat(i).concat(t);else var a=t;return a.toString(l)},parse:function(e){var t=l.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var a=n.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:a})}},T=a.SerializableCipher=s.extend({cfg:s.extend({format:j}),encrypt:function(e,t,i,a){a=this.cfg.extend(a);var s=e.createEncryptor(i,a),n=s.finalize(t),o=s.cfg;return h.create({ciphertext:n,key:i,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:a.format})},decrypt:function(e,t,i,a){a=this.cfg.extend(a),t=this._parse(t,a.format);var s=e.createDecryptor(i,a).finalize(t.ciphertext);return s},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=i.kdf={},w=b.OpenSSL={execute:function(e,t,i,a){a||(a=n.random(8));var s=d.create({keySize:t+i}).compute(e,a),o=n.create(s.words.slice(t),4*i);return s.sigBytes=4*t,h.create({key:s,iv:o,salt:a})}},x=a.PasswordBasedCipher=T.extend({cfg:T.cfg.extend({kdf:w}),encrypt:function(e,t,i,a){a=this.cfg.extend(a);var s=a.kdf.execute(i,e.keySize,e.ivSize);a.iv=s.iv;var n=T.encrypt.call(this,e,t,s.key,a);return n.mixIn(s),n},decrypt:function(e,t,i,a){a=this.cfg.extend(a),t=this._parse(t,a.format);var s=a.kdf.execute(i,e.keySize,e.ivSize,t.salt);a.iv=s.iv;var n=T.decrypt.call(this,e,t,s.key,a);return n}})}(),e.mode.CFB=function(){function t(e,t,i,a){var s=this._iv;if(s){var n=s.slice(0);this._iv=void 0}else var n=this._prevBlock;a.encryptBlock(n,0);for(var o=0;o<i;o++)e[t+o]^=n[o]}var i=e.lib.BlockCipherMode.extend();return i.Encryptor=i.extend({processBlock:function(e,i){var a=this._cipher,s=a.blockSize;t.call(this,e,i,s,a),this._prevBlock=e.slice(i,i+s)}}),i.Decryptor=i.extend({processBlock:function(e,i){var a=this._cipher,s=a.blockSize,n=e.slice(i,i+s);t.call(this,e,i,s,a),this._prevBlock=n}}),i}(),e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){
this._cipher.decryptBlock(e,t)}}),t}(),e.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,a=4*t,s=a-i%a,n=i+s-1;e.clamp(),e.words[n>>>2]|=s<<24-n%4*8,e.sigBytes+=s},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126={pad:function(t,i){var a=4*i,s=a-t.sigBytes%a;t.concat(e.lib.WordArray.random(s-1)).concat(e.lib.WordArray.create([s<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso97971={pad:function(t,i){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,i)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,a=i.blockSize,s=this._iv,n=this._keystream;s&&(n=this._keystream=s.slice(0),this._iv=void 0),i.encryptBlock(n,0);for(var o=0;o<a;o++)e[t+o]^=n[o]}});return t.Decryptor=i,t}(),e.pad.NoPadding={pad:function(){},unpad:function(){}},function(t){var i=e,a=i.lib,s=a.CipherParams,n=i.enc,o=n.Hex,r=i.format;r.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return s.create({ciphertext:t})}}}(),function(){var t=e,i=t.lib,a=i.BlockCipher,s=t.algo,n=[],o=[],r=[],l=[],c=[],d=[],u=[],f=[],p=[],g=[];!function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var i=0,a=0,t=0;t<256;t++){var s=a^a<<1^a<<2^a<<3^a<<4;s=s>>>8^255&s^99,n[i]=s,o[s]=i;var m=e[i],v=e[m],h=e[v],y=257*e[s]^16843008*s;r[i]=y<<24|y>>>8,l[i]=y<<16|y>>>16,c[i]=y<<8|y>>>24,d[i]=y;var y=16843009*h^65537*v^257*m^16843008*i;u[s]=y<<24|y>>>8,f[s]=y<<16|y>>>16,p[s]=y<<8|y>>>24,g[s]=y,i?(i=m^e[e[e[h^m]]],a^=e[e[a]]):i=a=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],v=s.AES=a.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,a=this._nRounds=i+6,s=4*(a+1),o=this._keySchedule=[],r=0;r<s;r++)if(r<i)o[r]=t[r];else{var l=o[r-1];r%i?i>6&&r%i==4&&(l=n[l>>>24]<<24|n[l>>>16&255]<<16|n[l>>>8&255]<<8|n[255&l]):(l=l<<8|l>>>24,l=n[l>>>24]<<24|n[l>>>16&255]<<16|n[l>>>8&255]<<8|n[255&l],l^=m[r/i|0]<<24),o[r]=o[r-i]^l}for(var c=this._invKeySchedule=[],d=0;d<s;d++){var r=s-d;if(d%4)var l=o[r];else var l=o[r-4];d<4||r<=4?c[d]=l:c[d]=u[n[l>>>24]]^f[n[l>>>16&255]]^p[n[l>>>8&255]]^g[n[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,l,c,d,n)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,u,f,p,g,o);var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,a,s,n,o,r){for(var l=this._nRounds,c=e[t]^i[0],d=e[t+1]^i[1],u=e[t+2]^i[2],f=e[t+3]^i[3],p=4,g=1;g<l;g++){var m=a[c>>>24]^s[d>>>16&255]^n[u>>>8&255]^o[255&f]^i[p++],v=a[d>>>24]^s[u>>>16&255]^n[f>>>8&255]^o[255&c]^i[p++],h=a[u>>>24]^s[f>>>16&255]^n[c>>>8&255]^o[255&d]^i[p++],y=a[f>>>24]^s[c>>>16&255]^n[d>>>8&255]^o[255&u]^i[p++];c=m,d=v,u=h,f=y}var m=(r[c>>>24]<<24|r[d>>>16&255]<<16|r[u>>>8&255]<<8|r[255&f])^i[p++],v=(r[d>>>24]<<24|r[u>>>16&255]<<16|r[f>>>8&255]<<8|r[255&c])^i[p++],h=(r[u>>>24]<<24|r[f>>>16&255]<<16|r[c>>>8&255]<<8|r[255&d])^i[p++],y=(r[f>>>24]<<24|r[c>>>16&255]<<16|r[d>>>8&255]<<8|r[255&u])^i[p++];e[t]=m,e[t+1]=v,e[t+2]=h,e[t+3]=y},keySize:8});t.AES=a._createHelper(v)}(),function(){function t(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function i(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}var a=e,s=a.lib,n=s.WordArray,o=s.BlockCipher,r=a.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=r.DES=o.extend({_doReset:function(){for(var e=this._key,t=e.words,i=[],a=0;a<56;a++){var s=l[a]-1;i[a]=t[s>>>5]>>>31-s%32&1}for(var n=this._subKeys=[],o=0;o<16;o++){for(var r=n[o]=[],u=d[o],a=0;a<24;a++)r[a/6|0]|=i[(c[a]-1+u)%28]<<31-a%6,r[4+(a/6|0)]|=i[28+(c[a+24]-1+u)%28]<<31-a%6;r[0]=r[0]<<1|r[0]>>>31;for(var a=1;a<7;a++)r[a]=r[a]>>>4*(a-1)+3;r[7]=r[7]<<5|r[7]>>>27}for(var f=this._invSubKeys=[],a=0;a<16;a++)f[a]=n[15-a]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,a,s){this._lBlock=e[a],this._rBlock=e[a+1],t.call(this,4,252645135),t.call(this,16,65535),i.call(this,2,858993459),i.call(this,8,16711935),t.call(this,1,1431655765);for(var n=0;n<16;n++){for(var o=s[n],r=this._lBlock,l=this._rBlock,c=0,d=0;d<8;d++)c|=u[d][((l^o[d])&f[d])>>>0];this._lBlock=l,this._rBlock=r^c}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,t.call(this,1,1431655765),i.call(this,8,16711935),i.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[a]=this._lBlock,e[a+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});a.DES=o._createHelper(p);var g=r.TripleDES=o.extend({_doReset:function(){var e=this._key,t=e.words;this._des1=p.createEncryptor(n.create(t.slice(0,2))),this._des2=p.createEncryptor(n.create(t.slice(2,4))),this._des3=p.createEncryptor(n.create(t.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});a.TripleDES=o._createHelper(g)}(),function(){function t(){for(var e=this._S,t=this._i,i=this._j,a=0,s=0;s<4;s++){t=(t+1)%256,i=(i+e[t])%256;var n=e[t];e[t]=e[i],e[i]=n,a|=e[(e[t]+e[i])%256]<<24-8*s}return this._i=t,this._j=i,a}var i=e,a=i.lib,s=a.StreamCipher,n=i.algo,o=n.RC4=s.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,a=this._S=[],s=0;s<256;s++)a[s]=s;for(var s=0,n=0;s<256;s++){var o=s%i,r=t[o>>>2]>>>24-o%4*8&255;n=(n+a[s]+r)%256;var l=a[s];a[s]=a[n],a[n]=l}this._i=this._j=0},_doProcessBlock:function(e,i){e[i]^=t.call(this)},keySize:8,ivSize:0});i.RC4=s._createHelper(o);var r=n.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});i.RC4Drop=s._createHelper(r)}(),e.mode.CTRGladman=function(){function t(e){if(255===(e>>24&255)){var t=e>>16&255,i=e>>8&255,a=255&e;255===t?(t=0,255===i?(i=0,255===a?a=0:++a):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=a}else e+=1<<24;return e}function i(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var a=e.lib.BlockCipherMode.extend(),s=a.Encryptor=a.extend({processBlock:function(e,t){var a=this._cipher,s=a.blockSize,n=this._iv,o=this._counter;n&&(o=this._counter=n.slice(0),this._iv=void 0),i(o);var r=o.slice(0);a.encryptBlock(r,0);for(var l=0;l<s;l++)e[t+l]^=r[l]}});return a.Decryptor=s,a}(),function(){function t(){for(var e=this._X,t=this._C,i=0;i<8;i++)r[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0;for(var i=0;i<8;i++){var a=e[i]+t[i],s=65535&a,n=a>>>16,o=((s*s>>>17)+s*n>>>15)+n*n,c=((4294901760&a)*a|0)+((65535&a)*a|0);l[i]=o^c}e[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,e[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,e[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,e[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,e[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,e[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,e[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,e[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var i=e,a=i.lib,s=a.StreamCipher,n=i.algo,o=[],r=[],l=[],c=n.Rabbit=s.extend({_doReset:function(){for(var e=this._key.words,i=this.cfg.iv,a=0;a<4;a++)e[a]=16711935&(e[a]<<8|e[a]>>>24)|4278255360&(e[a]<<24|e[a]>>>8);var s=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)t.call(this);for(var a=0;a<8;a++)n[a]^=s[a+4&7];if(i){var o=i.words,r=o[0],l=o[1],c=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),d=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),u=c>>>16|4294901760&d,f=d<<16|65535&c;n[0]^=c,n[1]^=u,n[2]^=d,n[3]^=f,n[4]^=c,n[5]^=u,n[6]^=d,n[7]^=f;for(var a=0;a<4;a++)t.call(this)}},_doProcessBlock:function(e,i){var a=this._X;t.call(this),o[0]=a[0]^a[5]>>>16^a[3]<<16,o[1]=a[2]^a[7]>>>16^a[5]<<16,o[2]=a[4]^a[1]>>>16^a[7]<<16,o[3]=a[6]^a[3]>>>16^a[1]<<16;for(var s=0;s<4;s++)o[s]=16711935&(o[s]<<8|o[s]>>>24)|4278255360&(o[s]<<24|o[s]>>>8),e[i+s]^=o[s]},blockSize:4,ivSize:2});i.Rabbit=s._createHelper(c)}(),e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,a=i.blockSize,s=this._iv,n=this._counter;s&&(n=this._counter=s.slice(0),this._iv=void 0);var o=n.slice(0);i.encryptBlock(o,0),n[a-1]=n[a-1]+1|0;for(var r=0;r<a;r++)e[t+r]^=o[r]}});return t.Decryptor=i,t}(),function(){function t(){for(var e=this._X,t=this._C,i=0;i<8;i++)r[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0;for(var i=0;i<8;i++){var a=e[i]+t[i],s=65535&a,n=a>>>16,o=((s*s>>>17)+s*n>>>15)+n*n,c=((4294901760&a)*a|0)+((65535&a)*a|0);l[i]=o^c}e[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,e[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,e[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,e[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,e[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,e[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,e[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,e[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var i=e,a=i.lib,s=a.StreamCipher,n=i.algo,o=[],r=[],l=[],c=n.RabbitLegacy=s.extend({_doReset:function(){var e=this._key.words,i=this.cfg.iv,a=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)t.call(this);for(var n=0;n<8;n++)s[n]^=a[n+4&7];if(i){var o=i.words,r=o[0],l=o[1],c=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),d=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),u=c>>>16|4294901760&d,f=d<<16|65535&c;s[0]^=c,s[1]^=u,s[2]^=d,s[3]^=f,s[4]^=c,s[5]^=u,s[6]^=d,s[7]^=f;for(var n=0;n<4;n++)t.call(this)}},_doProcessBlock:function(e,i){var a=this._X;t.call(this),o[0]=a[0]^a[5]>>>16^a[3]<<16,o[1]=a[2]^a[7]>>>16^a[5]<<16,o[2]=a[4]^a[1]>>>16^a[7]<<16,o[3]=a[6]^a[3]>>>16^a[1]<<16;for(var s=0;s<4;s++)o[s]=16711935&(o[s]<<8|o[s]>>>24)|4278255360&(o[s]<<24|o[s]>>>8),e[i+s]^=o[s]},blockSize:4,ivSize:2});i.RabbitLegacy=s._createHelper(c)}(),e.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},e})},{}],4:[function(e,t,i){var a=function(t){var i=e("./comm.js"),a=e("./util/promise.js"),s=e("./initText.js"),n=new a,o={config_url:"/v2/chat/user/config.action",init_url:"/v2/chat/user/init.action",active_url:"/v2/chat/user/productRecommend.action",multi_url:"/v2/chat-web/user/questionRecommend.action"},r=window.navigator.userAgent.indexOf("Mobile")>=0,l={};l.cacheInfo={};var c=!1;l.cacheInfo.flags={status:"enabled",isLoaded:!1,pageNow:1,pageSize:20,moreHistroy:!1,isConnected:!1,isEnableManual:!1,isEnableOnInput:!0,isGetCustomConfig:!1,isEnableBigImg:!0,isPeopleModel:!1,isWaitModel:!1,isTimeLine:!1,isUserTalked:!1,isSurveyed:!1,isKeepSessions:!1,isOutOneMinute:!1};var d=!0,u=i.getQueryParam(),f=function(e){var t=!0;if(e.whiteListFlag){if(e.domainWhiteList){t=!1;var i=e.domainWhiteList.split(","),a=(l.cacheInfo.urlParams,document.referrer||"");if(a){for(var s=/http(s)?:\/\/[a-zA-Z0-9]+\.[a-zA-Z0-9\-]+(\.[a-zA-Z0-9]*)*/g,a=a.match(s),n=0;n<i.length;n++)if(i[n].indexOf(a)>=0){t=!0;break}return t}return t}return t}return t},p=function(e){if(e.whiteListFlag){var t=f(e);if(!t)throw alert(""),""}},g={initParams:function(){var e=l.cacheInfo.urlParams={},t=i.getQueryParam();if(t)for(var a in t)e[a]=t[a];if(l.cacheInfo.urlParams.lan){c=!0;var s=l.cacheInfo.urlParams.lan;switch(s){case"en":l.cacheInfo.urlParams.lanFlag=1;break;default:l.cacheInfo.urlParams.lanFlag=0}}},initUA:function(){var e=l.cacheInfo.UAInfo={},t=["mz","xiaomi","android","ipad","iphone"],i=["windows","linux","mac"],a=t.length,s=i.length,n=navigator.userAgent.toLowerCase(),o=$(window).width(),r=$(window).height(),c=0,d="iphone-5",u="";e.uaHeight=r;for(var f=0,p="";f<a&&!u.length;f++){if(p=t[f],c=n.indexOf(p),"iphone"===p&&c>0){switch(o>310&&o<320&&(o=1),o>365&&o<385&&(o=2),o>404&&o<424&&(o=3),o){case 1:d="iphone-5";break;case 2:d="iphone-6";break;case 3:d="iphone-6+"}e.iphoneVersion=d,e.UA=p;break}if(c>0){e.UA=p;break}}if(c<=0)for(var f=0,p="";f<s;f++)if(p=i[f],c=n.indexOf(p),c>0){e.UA="pc";break}},initBrowser:function(){for(var e=l.cacheInfo.browser={},t=["mqqbrowser","qq","micromessenger","MicroMessenger","ucbrowser","miuibrowser","safari","opera mobi","opera mini","firefox"],i=t.length,a=navigator.userAgent.toLowerCase(),s=0,n=0,o="";n<i;n++)if(o=t[n],s=a.indexOf(o),s>0)return void(e.browser=o)},initLanguage:function(){var e=l.cacheInfo.language={};d?e.open=!0:e.open=!1},initEventType:function(){var e=l.cacheInfo.eventType={};if("xiaomi"==l.cacheInfo.UAInfo.UA)e.type="mousedown";else if("pc"!=l.cacheInfo.UAInfo.UA){var t=/hp-tablet/gi.test(navigator.appVersion),i="ontouchstart"in window&&!t;e.type=i?"touchstart":"mousedown"}else e.type="click"},initUserInfo:function(){var e=r?4:0,t=i.getQueryParam(),a=t.source;"number"==typeof a&&(e=a),l.cacheInfo.userInfo={source:e,tel:t.tel?t.tel:"",uname:t.uname?t.uname:"",partnerId:t.partnerId?t.partnerId+"":"",email:t.email?t.email:"",visitUrl:t.visitUrl?t.visitUrl:i.preURLLink,visitTitle:t.visitTitle?t.visitTitle:"",face:t.face?t.face:"",back:t.back?t.back:"",realname:t.realname?t.realname:"",weibo:t.weibo?t.weibo:"",weixin:t.weixin?t.weixin:"",qq:t.qq?t.qq:"",sex:t.sex?t.sex:0===t.sex?0:"",birthday:t.birthday?t.birthday:"",remark:t.remark?t.remark:"",color:t.color?t.color:"",modulType:t.modulType?t.modulType:"",params:t.params?t.params:"",lastCid:t.cid?t.cid:"",customerFields:t.customerFields?t.customerFields:"",multiParams:t.multiParams?t.multiParams:""}},initSysNum:function(){l.cacheInfo.sysNum=i.getQueryParam().sysNum}},m=function(){var e=new a;return setTimeout(e.resolve,0),e},v=function(e,t){var i=["leaveMessage.html"],a=0,s={};for(var n in e)s[n]=e[n];s.uname=t.apiInit.uname,s.ticketShowFlag=t.apiConfig.ticketShowFlag,s.uname=t.apiInit.uname,s.userId=t.apiInit.userId,s.pid=t.apiInit.pid;for(var n in s){var o=encodeURIComponent(s[n]);o.length>50||(0==a?i.push("?"):i.push("&"),i.push(n+"="+o),a++)}var r=i.join("");return r},h=function(e){if(void 0===e||null===e||e!==e)return"";try{return decodeURIComponent(e)}catch(t){return""}},y=function(){m().then(function(e,t){var t=t||new a;return g.initUA(),g.initParams(),g.initLanguage(),g.initSysNum(),g.initBrowser(),g.initUserInfo(),g.initEventType(),$.ajax({type:"post",url:o.config_url,dataType:"json",data:{sysNum:l.cacheInfo.sysNum,source:l.cacheInfo.userInfo.source,lanFlag:l.cacheInfo.urlParams.lanFlag||0,robotFlag:u.robotFlag||"",channelFlag:l.cacheInfo.urlParams.channelFlag||""},success:function(e){if(e.isFreeVersion){var i=/^http(s*):\/\/www.sobot.com/,a=document.referrer||"";if(!a||!i.test(a))throw alert(""),""}p(e);var s=l.cacheInfo.userInfo.modulType,n=l.cacheInfo.userInfo.color;"number"==typeof s&&s>=1&&s<=4&&(s=Math.floor(s),e.type=s);var o,r=/^(([a-fA-F0-9]{3})|([a-fA-F0-9]{6}))$/;n&&(o=decodeURIComponent(n),r.test(o)&&(e.color="#"+o)),l.cacheInfo.userInfo.color=e.color,l.cacheInfo.apiConfig=e,c||l.cacheInfo.urlParams.lanFlag||l.cacheInfo.apiConfig.lan&&(l.cacheInfo.urlParams.lanFlag=l.cacheInfo.apiConfig.lan,l.cacheInfo.urlParams.lan="en");var d={},f=[];"string"==typeof u.manualType?f=u.manualType.split(","):"string"==typeof l.cacheInfo.apiConfig.manualType&&(f=l.cacheInfo.apiConfig.manualType.split(",")),d.direct=f[0],d.under=f[1],d.guide=f[2],d.unknow=f[3],l.cacheInfo.urlParams.manualTypeObj=d,"undefined"!=typeof u.artificial?l.cacheInfo.urlParams.chatConnectButton=u.artificial:l.cacheInfo.urlParams.chatConnectButton=l.cacheInfo.apiConfig.chatConnectButton,"number"!=typeof u.tranFlag?l.cacheInfo.urlParams.tranFlag=0:l.cacheInfo.urlParams.tranFlag=u.tranFlag,"undefined"!=typeof u.artificialCount?l.cacheInfo.urlParams.manualBtnCount=u.artificialCount:l.cacheInfo.urlParams.manualBtnCount=l.cacheInfo.apiConfig.manualBtnCount;var g=window.location.href.split("?")[1],m="",i=/sysNum=(\w){1,100}(&)?/;if(i.test(g)){var v=i.exec(g);g=g.replace(v[0],"")}"undefined"!=typeof u.wurl?u.wurl.split("?")[1]?(m="?"+u.wurl.split("?")[1]+"&"+g,l.cacheInfo.urlParams.wurl=u.wurl.split("?")[0]+m):(m="?"+g,l.cacheInfo.urlParams.wurl=u.wurl+m):l.cacheInfo.apiConfig.wurl.split("?")[1]?(m="?"+l.cacheInfo.apiConfig.wurl.split("?")[1]+"&"+g,l.cacheInfo.urlParams.wurl=l.cacheInfo.apiConfig.wurl.split("?")[0]+m):(m="?"+g,l.cacheInfo.urlParams.wurl=l.cacheInfo.apiConfig.wurl+m),"undefined"!=typeof u.leaveCustomUrl?u.leaveCustomUrl.split("?")[1]?(m="?"+u.leaveCustomUrl.split("?")[1]+"&"+g,l.cacheInfo.urlParams.leaveCustomUrl=u.leaveCustomUrl.split("?")[0]+m):(m="?"+g,l.cacheInfo.urlParams.leaveCustomUrl=u.leaveCustomUrl+m):l.cacheInfo.apiConfig.leaveCustomUrl&&l.cacheInfo.apiConfig.leaveCustomUrl.split("?")[1]?(m="?"+l.cacheInfo.apiConfig.leaveCustomUrl.split("?")[1]+"&"+g,l.cacheInfo.urlParams.leaveCustomUrl=l.cacheInfo.apiConfig.leaveCustomUrl.split("?")[0]+m):(m="?"+g,l.cacheInfo.urlParams.leaveCustomUrl=l.cacheInfo.apiConfig.leaveCustomUrl+m),"undefined"!=typeof u.wurlOpenStyle?l.cacheInfo.urlParams.wurlOpenStyle=u.wurlOpenStyle:l.cacheInfo.urlParams.wurlOpenStyle=!0,"undefined"!=typeof u.isCustomSysFlag&&u.wurl?l.cacheInfo.urlParams.isCustomSysFlag=u.isCustomSysFlag:l.cacheInfo.urlParams.isCustomSysFlag=l.cacheInfo.apiConfig.isCustomSysFlag,"undefined"!=typeof u.isLeaveCustomSysFlag?l.cacheInfo.urlParams.isLeaveCustomSysFlag=u.isLeaveCustomSysFlag:l.cacheInfo.urlParams.isLeaveCustomSysFlag=l.cacheInfo.apiConfig.isLeaveCustomSysFlag,"undefined"!=typeof u.msgflag?l.cacheInfo.urlParams.msgflag=u.msgflag:l.cacheInfo.urlParams.msgflag=l.cacheInfo.apiConfig.msgflag,"undefined"!=typeof u.isMessageFlag?l.cacheInfo.urlParams.isMessageFlag=u.isMessageFlag:l.cacheInfo.urlParams.isMessageFlag=l.cacheInfo.apiConfig.isMessageFlag,"undefined"!=typeof u.satDegree_A?l.cacheInfo.urlParams.satDegree_A=u.satDegree_A:l.cacheInfo.urlParams.satDegree_A=!0,"undefined"!=typeof u.isFeedBackFlag?l.cacheInfo.urlParams.isFeedBackFlag=u.isFeedBackFlag:l.cacheInfo.urlParams.isFeedBackFlag=l.cacheInfo.apiConfig.isFeedBackFlag,"undefined"!=typeof u.powered?l.cacheInfo.urlParams.designButton=u.powered:l.cacheInfo.urlParams.designButton=l.cacheInfo.apiConfig.designButton,"undefined"!=typeof u.emailShowFlag&&1!=l.cacheInfo.apiConfig.ticketStartWay?l.cacheInfo.urlParams.emailShowFlag=u.emailShowFlag:l.cacheInfo.urlParams.emailShowFlag=l.cacheInfo.apiConfig.emailShowFlag,"undefined"!=typeof u.emailFlag&&1!=l.cacheInfo.apiConfig.ticketStartWay?l.cacheInfo.urlParams.emailFlag=u.emailFlag:l.cacheInfo.urlParams.emailFlag=l.cacheInfo.apiConfig.emailFlag,"undefined"!=typeof u.telShowFlag&&2!=l.cacheInfo.apiConfig.ticketStartWay?l.cacheInfo.urlParams.telShowFlag=u.telShowFlag:l.cacheInfo.urlParams.telShowFlag=l.cacheInfo.apiConfig.telShowFlag,"undefined"!=typeof u.telFlag&&2!=l.cacheInfo.apiConfig.ticketStartWay?l.cacheInfo.urlParams.telFlag=u.telFlag:l.cacheInfo.urlParams.telFlag=l.cacheInfo.apiConfig.telFlag,l.cacheInfo.urlParams.enclosureShowFlag=l.cacheInfo.apiConfig.enclosureShowFlag,"undefined"!=typeof u.enclosureFlag?l.cacheInfo.urlParams.enclosureFlag=u.enclosureFlag:l.cacheInfo.urlParams.enclosureFlag=l.cacheInfo.apiConfig.enclosureFlag,"undefined"!=typeof u.realuateFlag?l.cacheInfo.urlParams.realuateFlag=u.realuateFlag:l.cacheInfo.urlParams.realuateFlag=l.cacheInfo.apiConfig.realuateFlag,"undefined"!=typeof u.robotHelloWord?l.cacheInfo.urlParams.robotHelloWord=u.robotHelloWord:l.cacheInfo.urlParams.robotHelloWord=l.cacheInfo.apiConfig.robotHelloWord,"undefined"!=typeof u.adminHelloWord?l.cacheInfo.urlParams.adminHelloWord=u.adminHelloWord:l.cacheInfo.urlParams.adminHelloWord=l.cacheInfo.apiConfig.adminHelloWord,l.cacheInfo.urlParams.serviceEndPushMsg=l.cacheInfo.apiConfig.serviceEndPushMsg,"undefined"!=typeof u.adminTipWord?l.cacheInfo.urlParams.adminTipWord=u.adminTipWord:l.cacheInfo.urlParams.adminTipWord=l.cacheInfo.apiConfig.adminTipWord,"undefined"!=typeof u.userTipWord?l.cacheInfo.urlParams.userTipWord=u.userTipWord:l.cacheInfo.urlParams.userTipWord=l.cacheInfo.apiConfig.userTipWord,"undefined"!=typeof u.adminNonelineTitle?l.cacheInfo.urlParams.adminNonelineTitle=u.adminNonelineTitle:l.cacheInfo.urlParams.adminNonelineTitle=l.cacheInfo.apiConfig.adminNonelineTitle,"undefined"!=typeof u.leaveMsgSendGroupIdFlag?l.cacheInfo.urlParams.leaveMsgSendGroupIdFlag=u.leaveMsgSendGroupIdFlag:l.cacheInfo.urlParams.leaveMsgSendGroupIdFlag=l.cacheInfo.apiConfig.leaveMsgSendGroupIdFlag,"undefined"!=typeof u.ticketTypeFlag?l.cacheInfo.urlParams.ticketTypeFlag=u.ticketTypeFlag:l.cacheInfo.urlParams.ticketTypeFlag=l.cacheInfo.apiConfig.ticketTypeFlag,"undefined"!=typeof u.ticketTypeId?l.cacheInfo.urlParams.ticketTypeId=u.ticketTypeId:l.cacheInfo.urlParams.ticketTypeId=l.cacheInfo.apiConfig.ticketTypeId,"undefined"!=typeof u.transferAction&&(l.cacheInfo.urlParams.transferAction=u.transferAction),t.resolve()}}),t}).then(function(e,t){var t=t||new a,i=l.cacheInfo.urlParams;return 1===i.rput?$.ajax({type:"get",url:o.active_url,dataType:"json",timeout:3e3,data:{sysNum:i.sysNum,partnerId:i.partnerId||"",rpuc:i.rpuc||""},success:function(e){e&&"ok"===e.status?(l.cacheInfo.activeData=e,t.resolve(e.params)):t.resolve()}}):t.resolve(),t}).then(function(e,i){var i=i||new a,n="";return"[object Object]"===Object.prototype.toString.call(e)&&(n=JSON.stringify(e)),$.ajax({type:"post",url:o.init_url,dataType:"json",data:{ack:1,sysNum:h(l.cacheInfo.sysNum),source:h(l.cacheInfo.userInfo.source),chooseAdminId:l.cacheInfo.urlParams.aid||"",tranFlag:l.cacheInfo.urlParams.tranFlag,groupId:h(l.cacheInfo.urlParams.groupId)||"",partnerId:h(""+l.cacheInfo.userInfo.partnerId),tel:h(l.cacheInfo.userInfo.tel),email:h(l.cacheInfo.userInfo.email),uname:h(l.cacheInfo.userInfo.uname),visitTitle:h(l.cacheInfo.userInfo.visitTitle),visitUrl:h(l.cacheInfo.userInfo.visitUrl),face:h(l.cacheInfo.userInfo.face),realname:h(l.cacheInfo.userInfo.realname),weibo:h(l.cacheInfo.userInfo.weibo),weixin:h(l.cacheInfo.userInfo.weixin),qq:h(l.cacheInfo.userInfo.qq),sex:h(l.cacheInfo.userInfo.sex),birthday:h(l.cacheInfo.userInfo.birthday),remark:h(l.cacheInfo.userInfo.remark),params:h(n||l.cacheInfo.userInfo.params),isReComment:h(1),customerFields:h(l.cacheInfo.userInfo.customerFields),visitStartTime:h(l.cacheInfo.urlParams.visitStartTime||""),agid:l.cacheInfo.urlParams.uid,multiParams:h(l.cacheInfo.userInfo.multiParams),summaryParams:h(l.cacheInfo.urlParams.summaryParams),channelFlag:l.cacheInfo.urlParams.channelFlag||""},success:function(e){var a=e.data?e.data:e;if(l.cacheInfo.apiInit=a,s(l.cacheInfo),0==l.cacheInfo.urlParams.msgflag||1==l.cacheInfo.urlParams.isMessageFlag){var n=v(l.cacheInfo.urlParams,l.cacheInfo),o=l.cacheInfo.language.lan;r?l.cacheInfo.apiConfig.leaveMsg=o.L10024.replace("{0}",n).replace("{1}",n):l.cacheInfo.apiConfig.leaveMsg=o.L10039,
l.cacheInfo.apiConfig.leaveMsgUrl=n}else l.cacheInfo.apiConfig.leaveMsg="";i.resolve(),l.cacheInfo.pageType=t}}),i}).then(function(e,t){var t=t||new a;if(u=l.cacheInfo.urlParams,l.cacheInfo.apiInit.userId&&"null"!==l.cacheInfo.apiInit.userId){var i=JSON.stringify({companyId:l.cacheInfo.apiInit.pid,customerId:l.cacheInfo.apiInit.userId});$.ajax({type:"post",url:"/v2/chat-web/data/invokeOtherByUser.action",dataType:"json",data:{uid:l.cacheInfo.apiInit.uid,param:i,url:"ws/checkUserTicketInfo/4",method:"get"},success:function(e){l.cacheInfo.existFlag=e.item.existFlag,t.resolve()}})}else t.resolve();return t}).then(function(e,t){var t=t||new a;u=l.cacheInfo.urlParams,1===u.mflag?$.ajax({type:"post",url:o.multi_url,dataType:"json",timeout:3e3,data:{uid:l.cacheInfo.apiInit.uid,margs:l.cacheInfo.urlParams.margs||JSON.stringify({})},success:function(e){l.cacheInfo.multiGuideData=e,n.resolve(l.cacheInfo)}}):n.resolve(l.cacheInfo)})},j=function(){y()};return j(),n};t.exports=a},{"./comm.js":1,"./initText.js":5,"./util/promise.js":37}],5:[function(e,t,i){function a(e){var t=s(e);n(t),e.language.lan=t.system,e.language.text=t.text}var s=e("./locale.js"),n=function(e){for(var t=[".js-text-return-btn",".js-text-pulldown",".js-text-transfer-btn",".js-text-sendBtn",".js-text-upload-btn",".js-text-comment-btn",".js-text-satisfition-btn",".js-text-conversation-btn",".js-text-submit-btn",".js-text-success-btn",".js-text-contact",".js-text-ok-btn"],i=0;i<t.length;i++){var a=t[i],s=$(a),n=e.html["HTML_MSG0"+i];s.text(n).attr("placeholder",n)}$(".js-text-tel").html(e.html.HTML_MSG18);for(var o=[".js-pulldown-text",".js-text-chatSwitch",".js-text-send",".js-text-satisfaction",".js-text-newMessage",".js-text-leaveMessage"],i=0;i<o.length;i++){var a=o[i],s=$(a),n=e.html["HTML_MSG01"+(i+12)];s.text(n)}};t.exports=a},{"./locale.js":7}],6:[function(e,t,i){!function(e,a){Array.prototype.map||(Array.prototype.map=function(e,t){var i,a,s;if(null==this)throw new TypeError(" this is null or not defined");var n=Object(this),o=n.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(t&&(i=t),a=new Array(o),s=0;s<o;){var r,l;s in n&&(r=n[s],l=e.call(i,r,s,n),a[s]=l),s++}return a});var s=e.detect=function(){var e=function(){},t={browser_parsers:[{regex:"^(Opera)/(\\d+)\\.(\\d+) \\(Nintendo Wii",family_replacement:"Wii",manufacturer:"Nintendo"},{regex:"(SeaMonkey|Camino)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Camino",other:!0},{regex:"(Pale[Mm]oon)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Pale Moon (Firefox Variant)",other:!0},{regex:"(Fennec)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)(pre)",family_replacment:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"Mobile.*(Firefox)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(Firefox).*Tablet browser (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"MicroB",tablet:!0},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Flock)/(\\d+)\\.(\\d+)(b\\d+?)",family_replacement:"Flock",other:!0},{regex:"(RockMelt)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Rockmelt",other:!0},{regex:"(Navigator)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(Navigator)/(\\d+)\\.(\\d+)([ab]\\d+)",family_replacement:"Netscape"},{regex:"(Netscape6)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(MyIBrow)/(\\d+)\\.(\\d+)",family_replacement:"My Internet Browser",other:!0},{regex:"(Opera Tablet).*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera Tablet",tablet:!0},{regex:"(Opera)/.+Opera Mobi.+Version/(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"Opera Mobi",family_replacement:"Opera Mobile"},{regex:"(Opera Mini)/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera Mini)/att/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera)/9.80.*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(OPR)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(webOSBrowser)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(webOS)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(wOSBrowser).+TouchPad/(\\d+)\\.(\\d+)",family_replacement:"webOS TouchPad"},{regex:"(luakit)",family_replacement:"LuaKit",other:!0},{regex:"(Lightning)/(\\d+)\\.(\\d+)([ab]?\\d+[a-z]*)",family_replacement:"Lightning",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"rekonq",family_replacement:"Rekonq",other:!0},{regex:"(conkeror|Conkeror)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Conkeror",other:!0},{regex:"(konqueror)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Konqueror",other:!0},{regex:"(WeTab)-Browser",family_replacement:"WeTab",other:!0},{regex:"(Comodo_Dragon)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Comodo Dragon",other:!0},{regex:"(YottaaMonitor)",family_replacement:"Yottaa Monitor",other:!0},{regex:"(Kindle)/(\\d+)\\.(\\d+)",family_replacement:"Kindle"},{regex:"(Symphony) (\\d+).(\\d+)",family_replacement:"Symphony",other:!0},{regex:"Minimo",family_replacement:"Minimo",other:!0},{regex:"(Edge)/(\\d+)\\.(\\d+)",family_replacement:"Edge"},{regex:"(CrMo)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile"},{regex:"(CriOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile iOS"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+) Mobile",family_replacement:"Chrome Mobile"},{regex:"(chromeframe)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Frame"},{regex:"(UC Browser)(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser",other:!0},{regex:"(SLP Browser)/(\\d+)\\.(\\d+)",family_replacement:"Tizen Browser",other:!0},{regex:"(Epiphany)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Epiphany",other:!0},{regex:"(SE 2\\.X) MetaSr (\\d+)\\.(\\d+)",family_replacement:"Sogou Explorer",other:!0},{regex:"(Pingdom.com_bot_version_)(\\d+)\\.(\\d+)",family_replacement:"PingdomBot",other:!0},{regex:"(facebookexternalhit)/(\\d+)\\.(\\d+)",family_replacement:"FacebookBot"},{regex:"(Twitterbot)/(\\d+)\\.(\\d+)",family_replacement:"TwitterBot"},{regex:"(AdobeAIR|Chromium|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Shiira|Sunrise|Chrome|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iron|Iris|UP\\.Browser|Bunjaloo|Google Earth|Raven for Mac)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Iron|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris)/(\\d+)\\.(\\d+)"},{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris|BREW) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Android) Donut",v2_replacement:"2",v1_replacement:"1"},{regex:"(Android) Eclair",v2_replacement:"1",v1_replacement:"2"},{regex:"(Android) Froyo",v2_replacement:"2",v1_replacement:"2"},{regex:"(Android) Gingerbread",v2_replacement:"3",v1_replacement:"2"},{regex:"(Android) Honeycomb",v1_replacement:"3"},{regex:"(IEMobile)[ /](\\d+)\\.(\\d+)",family_replacement:"IE Mobile"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"(Obigo)InternetBrowser",other:!0},{regex:"(Obigo)\\-Browser",other:!0},{regex:"(Obigo|OBIGO)[^\\d]*(\\d+)(?:.(\\d+))?",other:!0},{regex:"(MAXTHON|Maxthon) (\\d+)\\.(\\d+)",family_replacement:"Maxthon",other:!0},{regex:"(Maxthon|MyIE2|Uzbl|Shiira)",v1_replacement:"0",other:!0},{regex:"(PLAYSTATION) (\\d+)",family_replacement:"PlayStation",manufacturer:"Sony"},{regex:"(PlayStation Portable)[^\\d]+(\\d+).(\\d+)",manufacturer:"Sony"},{regex:"(BrowseX) \\((\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(POLARIS)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(Embider)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(BonEcho)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Bon Echo",other:!0},{regex:"(iPod).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(AvantGo) (\\d+).(\\d+)",other:!0},{regex:"(Avant)",v1_replacement:"1",other:!0},{regex:"^(Nokia)",family_replacement:"Nokia Services (WAP) Browser",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(BrowserNG)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/5\\.0",v2_replacement:"0",v1_replacement:"7",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/(\\d+)\\.(\\d+)",family_replacement:"Nokia OSS Browser",manufacturer:"Nokia"},{regex:"(S40OviBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Nokia Series 40 Ovi Browser",manufacturer:"Nokia"},{regex:"(Nokia)[EN]?(\\d+)",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",tablet:!0,manufacturer:"Nokia"},{regex:"(Black[bB]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",manufacturer:"RIM"},{regex:"(Black[bB]erry)\\s?(\\d+)",family_replacement:"Blackberry",manufacturer:"RIM"},{regex:"(OmniWeb)/v(\\d+)\\.(\\d+)",other:!0},{regex:"(Blazer)/(\\d+)\\.(\\d+)",family_replacement:"Palm Blazer",manufacturer:"Palm"},{regex:"(Pre)/(\\d+)\\.(\\d+)",family_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Links) \\((\\d+)\\.(\\d+)",other:!0},{regex:"(QtWeb) Internet Browser/(\\d+)\\.(\\d+)",other:!0},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",other:!0,tablet:!0},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Version/\\d+\\.\\d+.\\d+ Safari/",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"(OLPC)/Update(\\d+)\\.(\\d+)",other:!0},{regex:"(OLPC)/Update()\\.(\\d+)",v1_replacement:"0",other:!0},{regex:"(SEMC\\-Browser)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Teleca)",family_replacement:"Teleca Browser",other:!0},{regex:"Trident(.*)rv.(\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(MSIE) (\\d+)\\.(\\d+)",family_replacement:"IE"}],os_parsers:[{regex:"(Android) (\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android)\\-(\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android) Donut",os_v2_replacement:"2",os_v1_replacement:"1"},{regex:"(Android) Eclair",os_v2_replacement:"1",os_v1_replacement:"2"},{regex:"(Android) Froyo",os_v2_replacement:"2",os_v1_replacement:"2"},{regex:"(Android) Gingerbread",os_v2_replacement:"3",os_v1_replacement:"2"},{regex:"(Android) Honeycomb",os_v1_replacement:"3"},{regex:"(Silk-Accelerated=[a-z]{4,5})",os_replacement:"Android"},{regex:"(Windows Phone 6\\.5)"},{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(XBLWP7)",os_replacement:"Windows Phone OS"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000)"},{regex:"(Windows NT 6\\.4|Windows NT 10\\.0)",os_replacement:"Windows 10"},{regex:"(Windows NT 6\\.2)",os_replacement:"Windows 8"},{regex:"(Windows Phone 8)",os_replacement:"Windows Phone 8"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(Windows Phone OS) (\\d+)\\.(\\d+)"},{regex:"(Windows ?Mobile)",os_replacement:"Windows Mobile"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Win98)",os_replacement:"Windows 98"},{regex:"(Tizen)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?",manufacturer:"Apple"},{regex:"(?:PPC|Intel) (Mac OS X)",manufacturer:"Apple"},{regex:"(CPU OS|iPhone OS) (\\d+)_(\\d+)(?:_(\\d+))?",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod); Opera",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPad); Opera",tablet:!0,manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod).*Mac OS X.*Version/(\\d+)\\.(\\d+)",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(CrOS) [a-z0-9_]+ (\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"Chrome OS"},{regex:"(Debian)-(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Linux Mint)(?:/(\\d+))?",other:!0},{regex:"(Mandriva)(?: Linux)?/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Symbian[Oo][Ss])/(\\d+)\\.(\\d+)",os_replacement:"Symbian OS"},{regex:"(Symbian/3).+NokiaBrowser/7\\.3",os_replacement:"Symbian^3 Anna"},{regex:"(Symbian/3).+NokiaBrowser/7\\.4",os_replacement:"Symbian^3 Belle"},{regex:"(Symbian/3)",os_replacement:"Symbian^3"},{regex:"(Series 60|SymbOS|S60)",os_replacement:"Symbian OS"},{regex:"(MeeGo)",other:!0},{regex:"Symbian [Oo][Ss]",os_replacement:"Symbian OS"},{regex:"(Black[Bb]erry)[0-9a-z]+/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(Black[Bb]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(RIM Tablet OS) (\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Play[Bb]ook)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry)",os_replacement:"Blackberry OS",manufacturer:"RIM"},{regex:"(webOS|hpwOS)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"webOS"},{regex:"(SUSE|Fedora|Red Hat|PCLinuxOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(SUSE|Fedora|Red Hat|Puppy|PCLinuxOS|CentOS)/(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Red Hat|Slackware)/(\\d+)\\.(\\d+)"},{regex:"(Windows|OpenBSD|FreeBSD|NetBSD|Ubuntu|Kubuntu|Android|Arch Linux|CentOS|WeTab|Slackware)"},{regex:"(Linux|BSD)",other:!0}],mobile_os_families:["Windows Phone 6.5","Windows CE","Symbian OS"],device_parsers:[{regex:"HTC ([A-Z][a-z0-9]+) Build",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Z][a-z0-9 ]+) \\d+\\.\\d+\\.\\d+\\.\\d+",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_Touch_([A-Za-z0-9]+)",device_replacement:"HTC Touch ($1)",manufacturer:"HTC"},{regex:"USCCHTC(\\d+)",device_replacement:"HTC $1 (US Cellular)",manufacturer:"HTC"},{regex:"Sprint APA(9292)",device_replacement:"HTC $1 (Sprint)",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+ [A-Z])",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC-([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(ADR[A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(HTC)",manufacturer:"HTC"},{regex:"SonyEricsson([A-Za-z0-9]+)/",device_replacement:"Ericsson $1",other:!0,manufacturer:"Sony"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; WOWMobile (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\-update1\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; (.+) Build"},{regex:"NokiaN([0-9]+)",device_replacement:"Nokia N$1",manufacturer:"Nokia"},{regex:"Nokia([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"NOKIA ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Nokia ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Lumia ([A-Za-z0-9\\-]+)",device_replacement:"Lumia $1",manufacturer:"Nokia"},{regex:"Symbian",device_replacement:"Nokia",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS",device_replacement:"Blackberry Playbook",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry [0-9]+);",manufacturer:"RIM"},{regex:"Black[Bb]erry([0-9]+)",device_replacement:"BlackBerry $1",manufacturer:"RIM"},{regex:"(Pre)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Pixi)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pixi",manufacturer:"Palm"},{regex:"(Touchpad)/(\\d+)\\.(\\d+)",device_replacement:"HP Touchpad",manufacturer:"HP"},{regex:"HPiPAQ([A-Za-z0-9]+)/(\\d+).(\\d+)",device_replacement:"HP iPAQ $1",manufacturer:"HP"},{regex:"Palm([A-Za-z0-9]+)",device_replacement:"Palm $1",manufacturer:"Palm"},{regex:"Treo([A-Za-z0-9]+)",device_replacement:"Palm Treo $1",manufacturer:"Palm"},{regex:"webOS.*(P160UNA)/(\\d+).(\\d+)",device_replacement:"HP Veer",manufacturer:"HP"},{regex:"(Kindle Fire)",manufacturer:"Amazon"},{regex:"(Kindle)",manufacturer:"Amazon"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",device_replacement:"Kindle Fire",tablet:!0,manufacturer:"Amazon"},{regex:"(iPad) Simulator;",manufacturer:"Apple"},{regex:"(iPad);",manufacturer:"Apple"},{regex:"(iPod);",manufacturer:"Apple"},{regex:"(iPhone) Simulator;",manufacturer:"Apple"},{regex:"(iPhone);",manufacturer:"Apple"},{regex:"Nexus\\ ([A-Za-z0-9\\-]+)",device_replacement:"Nexus $1"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"Amoi\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"AMOI\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"Asus\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"ASUS\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"BIRD\\-([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD\\.([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD ([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"Dell ([A-Za-z0-9]+)",device_replacement:"Dell $1",manufacturer:"Dell"},{regex:"DoCoMo/2\\.0 ([A-Za-z0-9]+)",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\_W\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"vodafone([A-Za-z0-9]+)",device_replacement:"Huawei Vodafone $1",other:!0},{regex:"i\\-mate ([A-Za-z0-9]+)",device_replacement:"i-mate $1",other:!0},{regex:"Kyocera\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"KWC\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"Lenovo\\-([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Lenovo"},{regex:"Lenovo\\_([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Levovo"},{regex:"LG/([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE VX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG ([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE LG\\-AX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"(KIN)\\.One (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(KIN)\\.Two (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(Motorola)\\-([A-Za-z0-9]+)",manufacturer:"Motorola"},{regex:"MOTO\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"MOT\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"Philips([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"Philips ([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"SAMSUNG-([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"SAMSUNG\\; ([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"Softbank/1\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"Softbank/2\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"(hiptop|avantgo|plucker|xiino|blazer|elaine|up.browser|up.link|mmp|smartphone|midp|wap|vodafone|o2|pocket|mobile|pda)",device_replacement:"Generic Smartphone"},{regex:"^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\-|airn|alav|asus|attw|au\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bell|bird|bw\\-n|bw\\-u|beck|benq|bilb|blac|c55/|cdm\\-|chtm|capi|comp|cond|craw|dall|dbte|dc\\-s|dica|ds\\-d|ds12|dait|devi|dmob|doco|dopo|el49|erk0|esl8|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\-|fly\\_|g\\-mo|g1 u|g560|gf\\-5|grun|gene|go.w|good|grad|hcit|hd\\-m|hd\\-p|hd\\-t|hei\\-|hp i|hpip|hs\\-c|htc |htc\\-|htca|htcg)",device_replacement:"Generic Feature Phone"},{regex:"^(htcp|htcs|htct|htc\\_|haie|hita|huaw|hutc|i\\-20|i\\-go|i\\-ma|i230|iac|iac\\-|iac/|ig01|im1k|inno|iris|jata|java|kddi|kgt|kgt/|kpt |kwc\\-|klon|lexi|lg g|lg\\-a|lg\\-b|lg\\-c|lg\\-d|lg\\-f|lg\\-g|lg\\-k|lg\\-l|lg\\-m|lg\\-o|lg\\-p|lg\\-s|lg\\-t|lg\\-u|lg\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\-|lge/|lynx|leno|m1\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\-|nem\\-|newg|neon)",device_replacement:"Generic Feature Phone"},{regex:"^(netf|noki|nzph|o2 x|o2\\-x|opwv|owg1|opti|oran|ot\\-s|p800|pand|pg\\-1|pg\\-2|pg\\-3|pg\\-6|pg\\-8|pg\\-c|pg13|phil|pn\\-2|pt\\-g|palm|pana|pire|pock|pose|psio|qa\\-a|qc\\-2|qc\\-3|qc\\-5|qc\\-7|qc07|qc12|qc21|qc32|qc60|qci\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\-|scp\\-|sdk/|se47|sec\\-|sec0|sec1|semc|sgh\\-|shar|sie\\-|sk\\-0|sl45|slid|smb3|smt5|sp01|sph\\-|spv |spv\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\-mo|t218|t250|t600|t610|t618|tcl\\-|tdg\\-|telm|tim\\-|ts70|tsm\\-|tsm3|tsm5|tx\\-9|tagt)",device_replacement:"Generic Feature Phone"},{regex:"^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vite|voda|vulc|w3c |w3c\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\-|your|zte\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\-|webc|whit|wmlb|xda\\-|xda\\_)",device_replacement:"Generic Feature Phone"},{regex:"(bot|borg|google(^tv)|yahoo|slurp|msnbot|msrbot|openbot|archiver|netresearch|lycos|scooter|altavista|teoma|gigabot|baiduspider|blitzbot|oegp|charlotte|furlbot|http%20client|polybot|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|seekbot|semanticdiscovery|silk|snappy|speedy|spider|voila|vortex|voyager|zao|zeal|fast\\-webcrawler|converacrawler|dataparksearch|findlinks)",device_replacement:"Spider"}],mobile_browser_families:["Firefox Mobile","Opera Mobile","Opera Mini","Mobile Safari","webOS","IE Mobile","Playstation Portable","Nokia","Blackberry","Palm","Silk","Android","Maemo","Obigo","Netfront","AvantGo","Teleca","SEMC-Browser","Bolt","Iris","UP.Browser","Symphony","Minimo","Bunjaloo","Jasmine","Dolfin","Polaris","BREW","Chrome Mobile","Chrome Mobile iOS","UC Browser","Tizen Browser"]};e.parsers=["device_parsers","browser_parsers","os_parsers","mobile_os_families","mobile_browser_families"],e.types=["browser","os","device"],e.regexes=t||function(){var t={};return e.parsers.map(function(e){t[e]=[]}),t}(),e.families=function(){var t={};return e.types.map(function(e){t[e]=[]}),t}();var i=Array.prototype,a=(Object.prototype,Function.prototype,i.forEach),s=(i.indexOf,function(e,t){for(var i={},a=0;a<t.length&&!(i=t[a](e));a++);return i}),n=function(e,t){o(e,function(e){o(t,function(t){delete e[t]})})},o=forEach=function(e,t,i){if(null!=e)if(a&&e.forEach===a)e.forEach(t,i);else if(e.length===+e.length)for(var s=0,n=e.length;s<n;s++)t.call(i,e[s],s,e);else for(var o in e)_.has(e,o)&&t.call(i,e[o],o,e)},r=function(e){return!(!e||"undefined"==typeof e||null==e)},l=function(e){var t="";return e=e||{},r(e)&&r(e.major)&&(t+=e.major,r(e.minor)&&(t+="."+e.minor,r(e.patch)&&(t+="."+e.patch))),t},c=function(e){e=e||{};var t=l(e);return t&&(t=" "+t),e&&r(e.family)?e.family+t:""};return e.parse=function(t){var i=function(t){return e.regexes[t+"_parsers"].map(function(e){function i(t){var i=t.match(a);if(!i)return null;var o={};return o.family=(s?s.replace("$1",i[1]):i[1])||"other",o.major=parseInt(n?n:i[2])||null,o.minor=i[3]?parseInt(i[3]):null,o.patch=i[4]?parseInt(i[4]):null,o.tablet=e.tablet,o.man=e.manufacturer||null,o}var a=new RegExp(e.regex),s=e[("browser"===t?"family":t)+"_replacement"],n=e.major_version_replacement;return i})},a=function(){},o=i("browser"),d=i("os"),u=i("device"),f=new a;f.source=t,f.browser=s(t,o),r(f.browser)?(f.browser.name=c(f.browser),f.browser.version=l(f.browser)):f.browser={},f.os=s(t,d),r(f.os)?(f.os.name=c(f.os),f.os.version=l(f.os)):f.os={},f.device=s(t,u),r(f.device)?(f.device.name=c(f.device),f.device.version=l(f.device)):f.device={tablet:!1,family:"Other"};var p={};e.regexes.mobile_browser_families.map(function(e){p[e]=!0}),e.regexes.mobile_os_families.map(function(e){p[e]=!0});return"Spider"===f.browser.family?f.device.type="Spider":f.browser.tablet||f.os.tablet||f.device.tablet?f.device.type="Tablet":p.hasOwnProperty(f.browser.family)?f.device.type="Mobile":f.device.type="Desktop",f.device.manufacturer=f.browser.man||f.os.man||f.device.man||null,n([f.browser,f.os,f.device],["tablet","man"]),f},e}();"undefined"!=typeof i&&("undefined"!=typeof t&&t.exports&&(i=t.exports=s),i.detect=s)}(window)},{}],7:[function(e,t,i){function a(e){for(var t=e.urlParams.lan||"cn",i=!1,a=0;a<o.length;a++)if(o[a]==t){i=!0;break}switch(i||(t="cn"),t){case"cn":return s;case"en":return n}}var s=e("./locale/zh-cn.json"),n=e("./locale/en.json"),o=["cn","en"];t.exports=a},{"./locale/en.json":8,"./locale/zh-cn.json":9}],8:[function(e,t,i){t.exports={html:{HTML_MSG00:"Back",HTML_MSG01:"Load more record",HTML_MSG02:"Manual",HTML_MSG03:"Send",HTML_MSG04:"Photos",HTML_MSG05:"Feedback",HTML_MSG06:"Feedback",HTML_MSG07:"Continue",HTML_MSG08:"Submit",HTML_MSG09:"The email has been sent successfully",HTML_MSG010:"The team will contact you soon",HTML_MSG011:"OK",HTML_MSG0112:"Load more record",HTML_MSG0113:"Manual",HTML_MSG0114:"Send",HTML_MSG0115:"Feedback",HTML_MSG0116:"Continue",HTML_MSG0117:"Email",HTML_MSG0118:"Tel"},system:{L10001:"Sorry, the team is not in service right now ",L10002:"{0} is at your service ",L10003:"Conversation has ended temporarily,{0} ",L10004:"Please wait, there are {0} people in need of service before you ",L10005:"You haven't been talking for long time ",L10006:'<a href="javascript: window.location.reload();">Continue</a> ',L10007:"Conversation with {0} has been ended temporarily {1} ",L10008:"Conversation with {0} has been ended temporarily {1} ",L10009:"Conversation with {0} has been ended temporarily ",L10010:"Conversation has been ended temporarily.{0} ",L10011:"{0} You have opened a new window {1}",L10012:"No more record",L10013:"Sorry, the team is not in service right now ",L10014:"Image size can not exceed 5M",L10015:"This file type is not supported",L10016:"Loading...",L10017:"Loading...",L10018:"Load more record",L10019:"{0} is at your service",L10020:"\b{0} is typing",L10021:"Conversation with {0} has been ended temporarily",L10022:'{0} You can also send us an <a href="javascript: void(0);" id="systemMsgLeaveMessage"> email </a>',L10023:'{0} <span  id="systemMsgLeaveMsg">Please wait...</span>',L10024:'You can also send us an <a class="leave-msg-btn" href="{0}" data-href="{1}"> email </a>',L10025:"Service Unavailable",L10026:"Waiting",L10027:"Sorry, the team is not in service right now",L10028:"Conversation with {0} has been ended temporarily",L10029:"You haven't been talking for long time",L10030:"You've opened a new window",L10031:"Conversation has been ended temporarily",L10032:"Please try to describe your problem in other ways",L10033:"This file type is not supported",L10034:"Image size can not exceed 5M",L10035:"Please try another browser",L10036:"Sending...",L10037:"Thank you",L10038:"Failure, please try again",L10039:'You can also send us an <a class="leave-msg-btn js-leaveMessage" href="javascript:void(0);" > email </a>',L10040:"The customer service {0} withdrew a message",L10041:"Reminder, This information may have a risk",L10042:"problem description up to 5000 code"},text:{T0000:"Cancel",T0001:"OK",T0002:"Load more record",T0003:"Loading",T0004:"No more record",T0005:"Yes",T0006:"No",T0010:"What do you need?",T0011:"Today",T0012:"Customer Support_",T0013:"Yesterday",T0020:"Customer Service is typing",T0021:"Are you satisfied with our service?",T0022:"Are you satisfied with our service?",T0023:"Send a massage",T0024:"Please wait...",T0025:"We've received your feedback",T0026:"You need to ask questions before feedback",T0027:"What is the problem?",T0028:"Tell us your suggestion",T0029:"Submit",T0030:"Email",T0031:"Sending",T0032:"Thank you",T0033:"Failure, please try again",T0034:"Email@domain.com (required)",T0035:"Email doesn't look quite right",T0036:"Email doesn't look quite right",T0037:"The description is needed",T0038:"Continue",T0039:"Submit email",T0040:"Email",T0041:"Yes",T0042:"No",T0043:"Feedback",T0044:"Tel",T0045:"tel is not correct",T0046:" (required)",T0047:"",T0048:"Send a massage",T0049:"qq Face",T0050:"upload",T0051:"Email",T0052:"Feedback",T0053:"Email@domain.com",T0054:"telphone",T0055:"telphone(optional)",T0056:"The email has been sent successfully",
T0057:"Powered by Sobot",T0058:" new messages",T0059:"new messages",T0060:"Manual",T0061:"Company:",T0062:"Email:",T0063:"serviceNo:",T0064:"Name:",T0065:"Remark:",T0066:"Tel:",T0067:"phone:",T0068:"open",T0069:"close",T0070:"Thank You",T0071:"Sorry",T0072:"Session end",T0073:"Error",T0074:"Already evaluated",T0075:"Upload Error",T0076:"Please Upload Files",T0077:"Maximum upload file size",T0078:"Upload file is not supported",T0079:"Image size can not exceed 5M",T0080:"Please Upload Image",T0081:"This file type is not supported",T0082:"file size can not exceed 20M",T0083:"upload...",T0084:"upload failed",T0085:"upload attachments",T0086:"Maximum upload 5",T0087:"Confirm closing?",T0088:"Ignore upload failed files?",T0089:"Continue",T0090:"Uploading",T0091:"Ignore upload failed Images?",T0092:"Email@domain.com(optional)",T0093:"Feedback",T0094:"Tell us about your problems?",T0095:"Submit",T0096:"Feedback",T0097:"Not evaluate",T0098:"Whether to solve the problem?",T0099:"title",T0100:"abstract",T0101:"label",T0102:"url",T0103:"Please rate the service",T0104:"Please choose tag",T0105:"evaluate can't be blank",T0106:"Has your question been resolved?",T0107:"Your evaluation will make us do better",T0108:"Please Fill ",T0109:"Types",T0110:"Problem Description",T0111:"close",T0112:"Return",T0113:"Choose minutes",T0114:"Choose hours",T0115:"hours",T0116:"minutes",T0117:"Please fill in the description of the problem",T0118:"Select",T0119:"Customer is typing",T0120:"Submit",T0121:"province",T0122:"city",T0123:"country",T0124:"is not correct",T0125:"email is not correct",T0126:"please fill in the required",T0127:"fill in by format ",T0128:"All",T0129:"you have a new message",T0130:"Record",T0131:"complete",T0132:"dealing",T0133:"create",T0134:"order",T0135:"no history",T0136:"history",T0137:"look",T0138:"reply",T0139:"Customer service has successfully received your questions. Please be patient",T0140:"choose business",T0141:"Manual",T0142:"helpful",T0143:"helpless",T0144:"Email",T0145:"content",T0146:"The description is needed",T0147:"commit",T0148:"No data yet",T0149:"Custom service",T0150:"User",T0151:"Expand all",T0152:"click",T0153:"to view",T0154:"Satisfaction",T0155:"Not satisfied"}}},{}],9:[function(e,t,i){t.exports={html:{HTML_MSG00:"",HTML_MSG01:"",HTML_MSG02:"",HTML_MSG03:"   ",HTML_MSG04:"",HTML_MSG05:"",HTML_MSG06:"",HTML_MSG07:"",HTML_MSG08:"",HTML_MSG09:"",HTML_MSG010:"",HTML_MSG011:"",HTML_MSG0112:"",HTML_MSG0113:"",HTML_MSG0114:"",HTML_MSG0115:"",HTML_MSG0116:"",HTML_MSG0117:"",HTML_MSG0118:""},system:{L10001:"",L10002:",{0}",L10003:",{0}",L10004:"{0}",L10005:"",L10006:'<a href="javascript: window.location.reload();"></a>',L10007:"{0}{1}",L10008:"{0}{1}",L10009:"{0}",L10010:"{0}",L10011:"{0}{1}",L10012:"",L10013:"",L10014:"",L10015:"",L10016:"...",L10017:"...",L10018:"",L10019:"{0}",L10020:"{0}",L10021:"{0}",L10022:'{0} <a href="javascript: void(0);" id="systemMsgLeaveMessage">  </a>',L10023:'{0} <span  id="systemMsgLeaveMsg"></span>',L10024:'<a class="leave-msg-btn" href="#0"  data-href="{1}">  </a>',L10025:"",L10026:"",L10027:"",L10028:"{0}",L10029:"",L10030:"",L10031:"",L10032:"",L10033:"",L10034:"5M",L10035:"",L10036:"...",L10037:"",L10038:"!",L10039:' <a class="leave-msg-btn js-leaveMessage" href="javascript:void(0);" >  </a>',L10040:" {0} ",L10041:"",L10042:"5000"},text:{T0000:"",T0001:"",T0002:"",T0003:"",T0004:"",T0005:"",T0006:"",T0010:"",T0011:"",T0012:"",T0013:"",T0020:"",T0021:"",T0022:"",T0023:"",T0024:"",T0025:"",T0026:"",T0027:"",T0028:" ~",T0029:"",T0030:"",T0031:"",T0032:"",T0033:"!",T0034:" ",T0035:"",T0036:"",T0037:"",T0038:"",T0039:"",T0040:"",T0041:"",T0042:"",T0043:"",T0044:"",T0045:"",T0046:"",T0047:"",T0048:"...",T0049:"",T0050:"",T0051:"",T0052:"",T0053:"",T0054:"",T0055:"",T0056:"",T0057:"Powered by ",T0058:" ",T0059:"",T0060:"",T0061:"",T0062:"",T0063:"",T0064:"",T0065:"",T0066:"",T0067:"",T0068:"",T0069:"",T0070:"",T0071:"",T0072:"",T0073:"",T0074:"",T0075:"",T0076:"!",T0077:"",T0078:",ziprar",T0079:"5MB",T0080:"",T0081:"",T0082:"20MB",T0083:"...",T0084:"",T0085:"",T0086:"5",T0087:"",T0088:"",T0089:"",T0090:"",T0091:"",T0092:"",T0093:"",T0094:"",T0095:"",T0096:"",T0097:"",T0098:"",T0099:"",T0100:"",T0101:"",T0102:"",T0103:"",T0104:"",T0105:"",T0106:"",T0107:"",T0108:"",T0109:"",T0110:"",T0111:"",T0112:"",T0113:"",T0114:"",T0115:"",T0116:"",T0117:"",T0118:"",T0119:"",T0120:"",T0121:"",T0122:"",T0123:"",T0124:"",T0125:"",T0126:"",T0127:"",T0128:"",T0129:"",T0130:"",T0131:"",T0132:"",T0133:"",T0134:"",T0135:"",T0136:"",T0137:"",T0138:"",T0139:"",T0140:"",T0141:"",T0142:"",T0143:"",T0144:"",T0145:"",T0146:"",T0147:"",T0148:"",T0149:"",T0150:"",T0151:"",T0152:"",T0153:"",T0154:"",T0155:""}}},{}],10:[function(e,t,i){function a(t,i){var a,s=e("../util/listener.js"),n=e("../util/promise.js"),i=i||new n,o=e("./template.js"),r=(e("../util/load.js")(),t.global||{}),l=(t.groupId||"",t.tranType||""),c=(t.transferType||"",t.transferAction||"",r.language.lan,r.language.text),d=(e("../config/config.json"),e("../util/monitAjax.js")(r)),u=[],f={},p={},g=60,m=60,v=!0,h=function(){$.ajax({type:"get",url:"/v2/chat-web/user/queryFormConfig.action",dataType:"json",data:{uid:r.apiInit.uid},success:function(e){1==e.status&&(e.openFlag&&1!=e.ustatus&&r.apiInit.ustatus!=-2&&!r.apiConfig.fillFormFlag?"pc"===r.pageType?y(e):j(e):(s.trigger("chatGroups.hide"),i.resolve(t)))}})},y=function(n){var l=n.fields,h=e("./dropdownMenu.js"),y=!0,j={},T=function(){var e=$(this).attr("data-fieldId"),t=[],i=[];$(this).find(".js-userCheckIco"+e).hasClass("userCheckIcoActive")?($(this).addClass("userCheck"),$(this).find(".js-userCheckIco"+e).removeClass("userCheckIcoActive")):($(this).removeClass("userCheck"),$(this).find(".js-userCheckIco"+e).addClass("userCheckIcoActive")),$(".js-userCheckIco"+e).each(function(){$(this).hasClass("userCheckIcoActive")&&(t.push($(this).parent().attr("dataValue")),i.push($(this).parent().attr("dataName")))}),t=t.join(","),i=i.join(",");var a={fieldId:e,dataValue:t,dataName:i};p[a.fieldId].value=a.dataValue,f[a.fieldId]=a.dataValue},b=function(){var e=$(this).attr("data-fieldId"),t=$(this).attr("dataValue"),i=$(this).attr("dataName");a.find(".js-userOptIco"+e).removeClass("userOptIcoActive"),a.find(".js-userOptIco"+e).parent().addClass("userOpt"),$(this).removeClass("userOpt").find(".js-userOptIco"+e).addClass("userOptIcoActive");var s={fieldId:e,dataValue:t,dataName:i};p[s.fieldId].value=s.dataValue,f[s.fieldId]=s.dataValue},w=function(){var e=$(this).attr("data-fieldId"),t=$(this).val();p[e].value=t,f[e]=t,a.find(".js-errorTip"+e).css("visibility","hidden")},x=function(e,t){p[t].value=e,f[t]=e,a.find(".js-errorTip"+t).css("visibility","hidden")},I=function(){var e=$(this).attr("data-fieldId"),t=$(".js-definedNumInput"+e).val();t.length>300&&(t=t.slice(0,300)),a.find(".js-definedNumInput"+e).val(t)},F=function(e){"province"==e.key||"city"==e.key||"county"==e.key||("definedList"==e.type?(p[e.fieldId].value=e.dataValue,f[e.fieldId]=e.dataValue):"time"==e.type&&(p[e.fieldId].value=e.dataValue,f[e.fieldId]=e.dataValue),a.find(".js-errorTip"+e.fieldId).css("visibility","hidden"))},k=function(){a.find(".js-chatBeforeFormlayer").addClass("show"),a.find("#chatBeforeForm").animate({right:"0"})},C=function(){i.reject(i),a.find(".js-chatBeforeFormlayer").removeClass("show"),a.find(".js-chatBeforeForm").animate({right:"-390px"},function(){setTimeout(function(){a.remove()},300)}),s.off("core.closeAlldropMenu"),s.off("core.fillProvinceInner"),s.off("core.definedFieldResult"),s.off("core.fillCityInner")},S=function(){var e=$(".js-mainBox").height()-g-m;a.find(".chatBeforeFormBody").height(e)},A=function(e){var t;e&&e.this_el&&(t=e.this_el);for(var i in j)t&&i==t||j[i].collapse()},M=function(e){var e=e||{};return p.city.value="",e.areaId?(f.areaId=e.areaId,void(f.areaName=e.dataName)):void d({type:"post",url:"/v2/chat-web/user/queryCity.action",dataType:"json",data:e,success:function(t){if(t&&1==t.status)if(e.provinceId){var i={list:t.citys},s=doT.template(o.cityEle)(i);a.find(".js-cityDropListUl").html(s),a.find(".js-cityDropListTitle").html(""),a.find(".js-countryDropListTitle").html(""),f.proviceId=e.provinceId,f.proviceName=e.dataName,f.cityId="",f.cityName="",f.areaId="",f.areaName=""}else if(e.cityId){var i={list:t.areas},s=doT.template(o.countryEle)(i);a.find(".js-countryDropListUl").html(s),a.find(".js-countryDropListTitle").html(""),f.cityId=e.cityId,f.cityName=e.dataName,f.areaId="",f.areaName=""}},error:function(){}})},L=function(){var e={};d({type:"post",url:"/v2/chat-web/user/queryCity.action",dataType:"json",data:e,success:function(e){if(e&&1==e.status){var t={list:e.provinces},i=doT.template(o.provinceEle)(t);a.find(".js-provinceDropListUl").html(i)}},error:function(){}})},_=function(){for(var e=0,s=0;s<u.length;s++)if(p[u[s].id].fillFlag&&""==p[u[s].id].value?(a.find(".js-errorTip"+p[u[s].id].id).css("visibility","inherit"),v=!1):(u[s].value=p[u[s].id].value,a.find(".js-errorTip"+p[u[s].id].id).css("visibility","hidden"),e++),"email"==p[u[s].id].id&&""!=p[u[s].id].value){var n=/^([a-zA-Z0-9]+([-_\.][a-zA-Z0-9]+)*(?:@(?!-))(?:(?:[-a-zA-Z0-9]*)(?:[a-zA-Z0-9](?!-))(?:\.(?!-)))+[a-zA-Z0-9]{2,})$/;if(!n.test(p[u[s].id].value))return void a.find(".js-errorTip"+p[u[s].id].id).html(p[u[s].id].fieldName+c.T0124).css("visibility","inherit")}if(0!=u.length&&e!=u.length||(v=!0),v&&y){f=JSON.stringify(f),y=!1;var o={uid:r.apiInit.uid,companyId:r.sysNum,customerFields:f};d({type:"post",url:"/v2/chat-web/user/submitForm.action",dataType:"json",data:o,success:function(e){e&&1==e.status&&(i.resolve(t),r.apiConfig.fillFormFlag=!0,C())},error:function(){}})}},P=function(){$chatBeforeFormlayer=a.find(".js-chatBeforeFormlayer"),$close=a.find(".js-close"),$txtTip=a.find(".js-txt-tip"),$definedFields=a.find(".js-definedFields"),$userCheck=a.find(".js-userCheck"),$userOpt=a.find(".js-userOpt"),$definedNumInput=a.find(".js-definedNumInput"),$chatBeforeFormSubmit=a.find(".js-chatBeforeFormSubmit")},D=function(){$definedNumInput.on("input",I),a.delegate(".js-definedInput","blur",w),s.on("core.definedFieldResult",F),s.on("core.fillCityInner",M),s.on("core.fillProvinceInner",L),$userCheck.on("click",T),$userOpt.on("click",b),$chatBeforeFormSubmit.on("click",_),$(window).on("resize",S),a.delegate(".js-chatBeforeFormlayer","click",function(){C()}),a.delegate(".js-cancel-btn","click",function(){C()}),s.on("core.closeAlldropMenu",A)},B=function(){s.trigger("chatGroups.hide");var e=doT.template(o.chatBeforeFormPc)({global:r,formDoc:n.formDoc,formTitle:n.formTitle,languageText:c,definedField:l});a=$(e),$(".js-mainBox").append(a);for(var t=a.find(".js-dropdownList"),i=0;i<t.length;i++){var d=$(t[i]).attr("id");j[d]=new h(t[i],r,d)}a.find(".submit").css("background-color",r.apiConfig.color);for(var i=0;i<l.length;i++){var f={};f.id=l[i].cusFieldConfig.fieldId,f.fieldName=l[i].cusFieldConfig.fieldName,4==l[i].cusFieldConfig.fieldType?(f.fillFlag=0,f.value="00:00"):(f.fillFlag=l[i].cusFieldConfig.fillFlag,f.value=""),u.push(f),p[f.id]=f}for(var i=0,g=l.length;i<g;i++)3==l[i].cusFieldConfig.fieldType&&a.find("#dp"+l[i].cusFieldConfig.fieldId).datepicker().on("changeDate",function(e){var t,i,a,s=e.date;t=s.getFullYear(),i=s.getMonth()+1<10?"0"+(Number(s.getMonth())+1):s.getMonth()+1,a=s.getDate()<10?"0"+s.getDate():s.getDate(),_bir=t+"-"+i+"-"+a,$(this).val(_bir);var n=$(this).attr("data-fieldId");x(_bir,n),$(".datepicker.dropdown-menu").hide()});k(),P(),D(),S()};B()},j=function(e){var n,l,g=e.fields,m=!1,h=!0,y="",j=function(){var e=$(this).attr("fieldId"),t=$(this).val();p[e].value=t},T=function(){var e=$(this).attr("fieldId"),t=$(this).val();p[e].value=t},b=function(){var e=0;$(this).parents(".js-definedArea").find(".js-dropListArea").animate({bottom:e+"px",opacity:1},300),a.find(".js-definedLayer").show(),a.find(".js-definedLayer").animate({opacity:1},300)},w=function(){var e=$(this).attr("date-type"),t=0;"hour"==e?$(this).parent().find(".js-dropListHour").animate({bottom:t+"px"},300):"minutes"==e&&$(this).parent().find(".js-dropListMinutes").animate({bottom:t+"px"},300),a.find(".js-definedLayer").show(),a.find(".js-definedLayer").animate({opacity:1},300)},x=function(){var e=$(this).attr("date-type"),t=$(this).attr("dataValue"),i=$(this).attr("fieldId");$(this).addClass("active").siblings().removeClass("active"),"hour"==e?$(this).parents(".js-definedArea").find(".js-definedHour").val(t):"minutes"==e&&$(this).parents(".js-definedArea").find(".js-definedMinutes").val(t),p[i].value=$(this).parents(".js-definedArea").find(".js-definedHour").val()+":"+$(this).parents(".js-definedArea").find(".js-definedMinutes").val()},I=function(){$(this).parents(".js-dropListArea").animate({bottom:"-382px",opacity:0},300),a.find(".js-definedLayer").animate({opacity:0},300,function(){setTimeout(function(){a.find(".js-definedLayer").hide()},100)})},F=function(){var e=$(this).attr("datavalue"),t=$(this).attr("dataName"),i=$(this).attr("fieldId");p[i].value=e,$(this).parent().find("li").removeClass("active"),$(this).addClass("active"),$(this).parents(".definedArea").find(".js-definedDropListText").html(t)},k=function(){$(this).hasClass("checkedActive")?$(this).removeClass("checkedActive"):$(this).addClass("checkedActive")},C=function(){for(var e=$(this).attr("fieldId"),t=$(this).prev().find(".js-definedCheckedLi"),i="",s="",n=0;n<t.length;n++)$(t[n]).hasClass("checkedActive")&&(i+=$(t[n]).attr("dataValue")+",",s+=$(t[n]).attr("dataName")+";");i.length>0&&(i=i.substr(0,i.length-1)),s.length>0?(s=s.substr(0,s.length-1),$(this).parents(".js-definedArea").find(".js-definedDropListText").html(s)):$(this).parents(".js-definedArea").find(".js-definedDropListText").html("--"),p[e].value=i,$(this).parents(".js-dropListArea").animate({bottom:"-382px",opacity:0},300),a.find(".js-definedLayer").animate({opacity:0},300,function(){setTimeout(function(){a.find(".js-definedLayer").hide()},100)})},S=function(){var e=(window.screen.width,50),t=0;"none"!=$(".js-header-back").css("display")&&(t=50,a.find(".js-chatFormLayer").css("top",t+"px")),definedHeight=l.height()-e,a.find(".js-chatBeforeForm-content").css({height:definedHeight-t+"px"})},A=function(){a.find(".js-orderClassifyLayer").show();var e=0;a.find(".js-orderClassifyInner").animate({bottom:e+"px"},300),a.find(".js-orderClassifyLayer").animate({opacity:1},300),h=!0},M=function(){a.find(".js-orderClassifyInner").animate({bottom:"-280px"},300),a.find(".js-orderClassifyLayer").animate({opacity:0},300,function(){setTimeout(function(){a.find(".js-orderClassifyLayer").hide()},100)})},L=function(e){var e=e||{};h&&(h=!1,d({type:"post",url:"/v2/chat-web/user/queryCity.action",dataType:"json",data:e,success:function(t){if(t&&1==t.status){if(e.provinceId){m=!0,g=t.citys,f.proviceId=e.provinceId,f.proviceName=e.provinceName,y=e.provinceName,a.find(".js-cityTitle").html(c.T0122),p.city.value=y,a.find(".js-cityAreaTitle").html(y);var i={items:g,languageText:c},s=doT.template(o.cityListEleH5)(i);a.find(".js-areaListArea").html(s)}else if(e.cityId){m=!0,g=t.areas,f.cityId=e.cityId,f.cityName=e.cityName,y+=e.cityName,a.find(".js-cityTitle").html(c.T0123),p.city.value=y,a.find(".js-cityAreaTitle").html(y);var i={items:g,languageText:c},s=doT.template(o.areaListEleH5)(i);a.find(".js-areaListArea").html(s)}else{m=!0,g=t.provinces;var i={items:g,languageText:c},s=doT.template(o.provinceEleH5)(i);a.find(".js-areaListArea").html(s),A()}setTimeout(function(){h=!0},200)}},error:function(){}}))},_=function(e){L()},P=function(){var e=$(this).attr("provinceId"),t=$(this).attr("cityId"),i=$(this).attr("areaId"),s=$(this).attr("endFlag"),n={};if(p.city.value="",e){var o=$(this).attr("provinceName");n={provinceId:e,provinceName:o},"true"==s?($(this).addClass("active"),a.find(".js-cityAreaTitle").html(o),f.proviceId=n.provinceId,f.proviceName=n.provinceName,M()):L(n)}else if(t){var r=$(this).attr("cityName");n={cityId:t,cityName:r},"true"==s?($(this).addClass("active"),a.find(".js-cityAreaTitle").html(y+r),f.cityId=n.cityId,f.cityName=n.cityName,M()):L(n)}else if(i){var l=$(this).attr("areaName");return f.areaId=n.areaId,f.areaName=l,y+=l,a.find(".js-cityAreaTitle").html(y),$(this).addClass("active"),M(),void a.find(".js-cityTitle").html(c.T0121)}},D=function(){for(var e=0,s=0;s<u.length;s++){if(p[u[s].id].fillFlag&&""==p[u[s].id].value)return B(c.T0126),void(v=!1);if(u[s].value=p[u[s].id].value,f[u[s].id]=u[s].value,e++,"email"==p[u[s].id].id&&""!=p[u[s].id].value){var n=/^([a-zA-Z0-9]+([-_\.][a-zA-Z0-9]+)*(?:@(?!-))(?:(?:[-a-zA-Z0-9]*)(?:[a-zA-Z0-9](?!-))(?:\.(?!-)))+[a-zA-Z0-9]{2,})$/;if(!n.test(p[u[s].id].value))return void B(c.T0125)}if(3==p[u[s].id].filedType&&""!==p[u[s].id].value){var o=/^((19[0-9][0-9])|(20[0-9][0-9]))-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8])))$/,l=o.test(p[u[s].id].value);if(!l)return void B(p[u[s].id].fieldName+c.T0124)}}if(0!=u.length&&e!=u.length||(v=!0),v&&h){f=JSON.stringify(f),h=!1;var g={uid:r.apiInit.uid,companyId:r.sysNum,customerFields:f};d({type:"post",url:"/v2/chat-web/user/submitForm.action",dataType:"json",data:g,success:function(e){e&&1==e.status&&(i.resolve(t),a.remove(),r.apiConfig.fillFormFlag=!0)},error:function(){}})}},B=function(e){var t={};t={text:e};var i=doT.template(o.showTip)(t),a=$(i);l.append(a);var s=l.height()/2-21,n=l.width()/2-70;a.find(".js-showTip").css({top:s,left:n}),setTimeout(function(){a.find(".js-showTip").remove()},3e3)},N=function(){i.reject(i),a.remove()},R=function(){l=$(".js-wrapBox"),n=$(".js-showTip")},O=function(){a.delegate(".js-cityAreaTitle","click",_),a.delegate(".js-provinceList","click",P),a.delegate(".js-orderClassifyClose","click",M),a.delegate(".js-definedInput","blur",j),a.delegate(".js-definedDate","blur",T),a.delegate(".js-chatBeforeFormCommit","click",D),a.delegate(".js-definedDropList","click",b),a.delegate(".js-definedTimeDropList","click",w),a.delegate(".js-definedTimeLi","click",x),a.delegate(".js-dropLIstAreaClose","click",I),a.delegate(".js-definedDropListLi","click",F),a.delegate(".js-definedCheckedLi","click",k),a.delegate(".js-checkedSure","click",C),a.delegate(".js-closeForm","click",N)},z=function(){s.trigger("chatGroups.hide");var t={global:r,formDoc:e.formDoc,formTitle:e.formTitle,languageText:c,items:g},i=doT.template(o.chatBeforeFormH5)(t);a=$(i),l.append(a);for(var n=0;n<g.length;n++){var d={};d.id=g[n].cusFieldConfig.fieldId,d.fieldName=g[n].cusFieldConfig.fieldName,4==g[n].cusFieldConfig.fieldType?(d.fillFlag=0,d.value="00:00"):3==g[n].cusFieldConfig.fieldType?(d.fillFlag=g[n].cusFieldConfig.fillFlag,d.value="",d.filedType=3):(d.fillFlag=g[n].cusFieldConfig.fillFlag,d.value=""),u.push(d),p[d.id]=d}},E=function(){R(),z(),O(),S()};E()},T=function(){"keySwitch"==l?i.resolve(t):h()};return T(),i}t.exports=a},{"../config/config.json":2,"../util/listener.js":33,"../util/load.js":34,"../util/monitAjax.js":35,"../util/promise.js":37,"./dropdownMenu.js":13,"./template.js":22}],11:[function(e,t,i){function a(t,i){var a=e("../util/listener.js"),s=e("../util/promise.js"),i=i||new s,n=t.global,o=t.groupList;t.groupId||"",t.tranType||"";transferType=t.transferType||"",transferAction=t.transferAction||"";var r,l=e("./template.js"),c=(n.language.lan,n.language.text),d=(window.navigator.userAgent.indexOf("Mobile")>=0,e("../util/monitAjax.js")(n),!0),u=function(e){var t=doT.template(l.groupTemplate)({list:e,languageText:c});r=$(t),$(".js-wrapBox").append(r),r.delegate(".js-item","click",function(e){var t=e.currentTarget,a=$(t).attr("data-id"),s={global:n,groupId:a,transferType:transferType,transferAction:transferAction};i.resolve(s),r.remove()}),$(document.body).delegate(".js-shadow-layer","click",function(){i.reject(i),r.remove()}),r.delegate(".js-group-outer","click",function(e){e.stopPropagation(),e.preventDefault()}),r.delegate(".js-cancel-btn","click",function(e){i.reject(i),r.remove()}),$(".js-item").css("background-color",n.apiConfig.color),$(".js-cancel-btn").css("color",n.apiConfig.color)},f=function(e){var t=n.apiConfig.color,a=doT.template(l.groupTemplatePC)({list:e,languageText:c});r=$(a),$(".js-mainBox").append(r),r.find(".js-group-outer").animate({right:"0"}),r.delegate(".js-item","click",function(e){if(d){d=!1;var a=e.currentTarget,s=$(a).attr("data-id");$(a).css({"border-color":t,color:t}).siblings().css({"border-color":"",color:""});var o={global:n,groupId:s,transferType:transferType,transferAction:transferAction};i.resolve(o),e.stopPropagation()}}),r.delegate(".js-cancel-btn","click",function(e){r.find(".js-group-outer").animate({right:"-390px"},function(){r.remove(),i.reject(i)})}),r.delegate(".js-group-layer","click",function(){r.find(".js-group-outer").animate({right:"-390px"},function(){r.remove(),i.reject(i)})})},p=function(){"pc"===n.pageType?r.find(".js-group-outer").animate({right:"-390px"},function(){r.remove()}):r.remove()},g=function(){n.urlParams.groupId||"";"pc"===n.pageType?f(o):u(o),a.on("chatGroups.hide",p)};return o?g():i.resolve(t),i}t.exports=a},{"../util/listener.js":33,"../util/monitAjax.js":35,"../util/promise.js":37,"./template.js":22}],12:[function(e,t,i){var a,s={},n=e("../util/listener.js");s.setCurrentState=function(e){a=e,n.trigger("core.statechange",a)},s.getCurrentState=function(){return a},t.exports=s},{"../util/listener.js":33}],13:[function(e,t,i){var a=function(t,i,a){var s=(e("../util/monitAjax.js")(i),e("../util/listener.js")),n=(e("./template.js"),!1);t=$(t);var o=!1,r=function(e){e.stopPropagation();var i=$(this).parent().attr("id"),a={this_el:i};s.trigger("core.closeAlldropMenu",a),n?(t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),n=!1):(t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),$(this).find(".dropListTitleIcn").css("background-position","-3320px 13px"),$(this).addClass("checkActive"),$(this).next().addClass("openActive"),n=!0),"province"!=i||o||(o=!0,s.trigger("core.fillProvinceInner"))},l=function(e){e.stopPropagation();var i=$(this).attr("data-fieldId")||"",a=$(this).attr("dataValue")||"",o=($(this).attr("fieldType")||"",$(this).attr("dataName")||"");if(t.find(".js-dropdown-title").html($(this).html()),a)var r={fieldId:i,dataValue:a,dataName:o,type:"definedList"};else{var l="00:00";l=$("#hour"+i).find(".js-definedHour").html()+":"+$("#minute"+i).find(".js-definedMinutes").html();var r={fieldId:i,dataValue:l,dataName:l,type:"time"}}s.trigger("core.definedFieldResult",r),t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),n=!1},c=function(e){e.stopPropagation();var i=$(this).attr("provinceId"),a=$(this).attr("cityId"),o=$(this).attr("areaId"),r=$(this).attr("title")||"",l={};t.find(".js-dropdown-title").html($(this).html()),i?l={provinceId:i,dataName:r}:a?l={cityId:a,dataName:r}:o&&(l={areaId:o,dataName:r}),s.trigger("core.fillCityInner",l),t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),n=!1},d=function(){n=!1,t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px")},u=function(){},f=function(){},p=function(){t.delegate(".js-dropdown-btn","click",r),t.delegate(".js-dropdownLi","click",l),t.delegate(".js-cityLi","click",c),$(document.body).on("click",function(){s.trigger("core.closeAlldropMenu")})},g=function(){},m=function(){g(),f(),p()};m(),this.expand=u,this.collapse=d};t.exports=a},{"../util/listener.js":33,"../util/monitAjax.js":35,"./template.js":22}],14:[function(e,t,i){var a=function(t){var i,a,s=e("../util/listener.js"),n=e("../util/promise.js"),o=e("../util/date.js"),r=e("../socket/robot.js"),l=e("./currentState.js"),c=e("../util/monitAjax.js")(t),d=(e("../socket/websocket.js"),e("../socket/rolling.js"),e("./transfer.js")),u=e("./initsession.js"),f=e("../socket/socketfactory.js"),p=t.apiConfig.leaveMsg,g=t.language.lan,m=!1,v=function(){t.apiConfig.guideFlag&&1!=t.apiInit.multiFlag&&2!=t.apiConfig.type&&$.ajax({type:"post",url:"/v2/chat/user/robotGuide.action",dataType:"json",data:{uid:t.apiInit.uid,robotFlag:t.urlParams.robotFlag||""},success:function(e){var i=e.data.ts?new Date(e.data.ts):new Date;i=new Date(i.getTime()+1e5);var a=o.formatDate(i,!0),n=e.data.answer||"";n.indexOf("<a")>=0&&(n=n.replace(/<a/g,'<a target="_blank"'));var r=[];r.push({type:"robot",answerType:"welcome-sugguestions",date:a,content:[{senderName:t.apiConfig.robotName,senderType:3,msg:n,stripe:"",list:e.data.suggestions,ts:a}]}),s.trigger("core.initsession",r)}})},h=function(e,i,a){var n=a?i.aface:t.apiConfig.robotLogo,r=a?i.aname:t.apiConfig.robotName,a=a||t.urlParams.robotHelloWord,c=t.apiInit.ustatus==-2,d=t.apiInit.ustatus==-2?1:0;e||(e=[]);var u=new Date,f={date:o.formatDate(u),content:[{senderType:d?1:a?2:1,t:+u,msg:a,ts:o.formatDate(u,!0),senderFace:n,senderName:r}]};c?l.setCurrentState("robot"):l.setCurrentState("human"),t.apiConfig.adminHelloWordFlag&&e.push(f),setTimeout(function(){s.trigger("core.initsession",e)},0)},y=function(e,a){e||(e=[]);var n=new Date,c={date:o.formatDate(n),content:[{senderType:1,t:+n,msg:t.urlParams.robotHelloWord,ts:o.formatDate(n,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};!t.apiInit.multiFlag&&t.apiConfig.robotHelloWordFlag&&e.push(c),i&&i.destroy(),i=new r(t),l.setCurrentState("robot"),setTimeout(function(){s.trigger("core.initsession",e)},0)},j=function(e,a){if(e){var n=new Date,c={date:o.formatDate(n),content:[{senderType:1,t:+n,msg:t.urlParams.robotHelloWord,ts:o.formatDate(n,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};l.setCurrentState("robot"),i&&i.destroy(),i=new r(t),u(t,a,!1).then(function(e){t.apiConfig.robotHelloWordFlag&&e.push(c),s.trigger("core.initsession",e)})}},T=function(e,n,o,c){var d=e.queueDoc;m=!0,n?(v(),h(o,e,null),setTimeout(function(){t.urlParams.msgflag?e.content=d:e.content=d+" "+p,7==e.status&&(e.content=e.msg),!c&&t.apiConfig.customerQueueFlag&&s.trigger("core.system",{type:"system",status:"queue",data:e})},1)):(t.urlParams.msgflag?e.content=d:e.content=d+" "+p,7==e.status&&(e.content=e.msg),(t.apiConfig.customerQueueFlag||1==queueFlag||2==queueFlag)&&s.trigger("core.system",{type:"system",status:"queue",data:e})),i&&i.destroy(),a||7==e.status||(a=f(e,t),a.start()),i=new r(t),l.setCurrentState("robot"),7!=e.status&&s.trigger("core.sessionclose",-3)},b=function(e){for(var n=e.list||[],o=0,r=n.length;o<r;o++){var c=n[o],d=c;if(200===c.type){i&&a&&(i.destroy(),i=a,a=null),l.setCurrentState("human"),s.trigger("core.system",{type:"system",status:"transfer",data:{content:g.L10002.replace("{0}",d.aname)}}),d.serviceInfo.adminHelloWord&&(t.urlParams.adminHelloWord=d.serviceInfo.adminHelloWord),d.content=t.urlParams.adminHelloWord,s.trigger("core.system",{type:"human",data:d}),s.trigger("core.buttonchange",{type:"transfer",action:"hide"});break}}},w=function(e,a,n){s.trigger("core.buttonchange",{type:"transfer",action:"show"}),a?(v(),y(n,e,null),setTimeout(function(){t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+" "+p,s.trigger("core.system",{type:"system",status:"offline",data:e})},1)):(i&&i.destroy(),i=new r(t),l.setCurrentState("robot"),t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+p,s.trigger("core.system",{type:"system",status:"offline",data:e}))},x=function(e,a){t.urlParams.msgflag?e.content=g.L10001:e.content=g.L10001+" "+p,i=new r(t),l.setCurrentState("robot"),s.trigger("core.system",{type:"system",status:"blacklist",data:e}),a&&y()},I=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null},F=function(e,n,o){var o=!!o,r=e.groupId||"",d=e.tranType||"",p=e.transferFlag||"",v=e.keyword||"",y=e.keywordId||"",j=e.queueFlag||"",b=e.transferType||"",F=e.transferAction||"";u(t,n,!0).then(function(e,n){var u;u=a&&"websocket"==a.type?8:1;var k=t.urlParams,C="/v2/chat/user/chatconnect.action",S={sysNum:t.sysNum,uid:t.apiInit.uid,chooseAdminId:t.urlParams.aid||"",tranFlag:t.urlParams.tranFlag,way:u,current:m,groupId:r||"",keyword:v||"",keywordId:y||"",queueFlag:j,transferType:b,transferAction:F};if(null!=I("queueFirst")&&(S.queueFirst=I("queueFirst")),k.autoManual&&k.aid&&(C="/v2/chat/user/invite.action",S.aid=k.aid),1==j){var A={answer:"",answerType:"5",msgId:"",transferType:0,ustatus:-1};s.trigger("core.onreceive",{list:[A],type:"robot"})}c({url:C,type:"post",dataType:"json",data:S,success:function(a){if(t.urlParams.leaveMsgGroupId=r,1==a.status||"keySwitch"!=d||1!=p||a.count)return a.status==-1?void s.trigger("core.sessionclose",7):void(2==a.status?w(a,o,e):0==a.status||7==a.status?T(a,o,e,y):1==a.status?(window.parent&&window.postMessage&&"iframe"==t.urlParams.from&&window.parent.postMessage(JSON.stringify({name:"manual",status:"success"}),"*"),m=!1,a.adminHelloWord&&(t.urlParams.adminHelloWord=a.adminHelloWord),t.urlParams.queueDoc=a.queueDoc||"",a.serviceEndPushMsg&&(t.urlParams.serviceEndPushMsg=a.serviceEndPushMsg||""),o?(h(e,a,t.urlParams.adminHelloWord),s.trigger("core.transfersuccess",{data:a})):(s.trigger("core.system",{type:"system",status:"transfer",data:{content:g.L10002.replace("{0}",a.aname)}}),s.trigger("core.transfersuccess",{data:a}),a.content=t.urlParams.adminHelloWord,t.apiConfig.adminHelloWordFlag&&s.trigger("core.system",{type:"human",status:"transfer",data:a})),i&&i.destroy(),i=f(a,t),i.start(),l.setCurrentState("human"),s.trigger("core.buttonchange",{type:"transfer",action:"hide"})):3==a.status?(s.trigger("core.sessionclose",7),x(a,o)):6==a.status&&(delete t.urlParams.aid,t.apiConfig.smartRouteInfoFlag=!1,s.trigger("core.grouplist")))},fail:function(){}})})},k=function(e,i,a){var a=!!a,i=new n;return d(t,i,m).then(function(e){F(e,null,a)},function(){0==t.apiConfig.smartRouteInfoFlag&&(a=!0),j(a,i)}),i},C=function(e){var i=new n;return d(t,i,m,e).then(function(e){F(e,null,!1)},function(){j(!1,i)}),i},S=function(){},A=function(){s.on("sendArea.artificial",k),s.on("listMsg.keyWordArtificial",C),s.on("listMsg.transTypeArtificial",C),s.on("core.onreceive",b)},M=function(){var e=t.apiInit.ustatus;0==e||1==e||e==-2?k(null,null,!0):e==-1&&u(t).then(y)},L=function(){S(),A(),M()};L(),this.getWelcome=function(){};
};t.exports=a},{"../socket/robot.js":25,"../socket/rolling.js":26,"../socket/socketfactory.js":27,"../socket/websocket.js":28,"../util/date.js":29,"../util/listener.js":33,"../util/monitAjax.js":35,"../util/promise.js":37,"./currentState.js":12,"./initsession.js":16,"./transfer.js":23}],15:[function(e,t,i){function a(t){var i=e("../util/listener.js"),a=e("../util/promise.js"),s=e("../util/date.js"),n=e("../util/monitAjax.js")(t),o=(e("../socket/robot.js"),e("../socket/websocket.js"),e("./currentState.js")),r=(e("../socket/rolling.js"),e("./currentState.js")),l=e("./transfer.js"),c=e("./initsession.js"),d=e("../socket/socketfactory.js"),u=t.apiConfig.leaveMsg,f=t.language.lan,p=null,g=!1,m=function(e,a,n){var o=n?a.aface:t.apiConfig.robotLogo,r=n?a.aname:t.apiConfig.robotName,n=n||t.urlParams.robotHelloWord,l=t.apiInit.ustatus==-2?1:0;e||(e=[]);var c=new Date,d={date:s.formatDate(c),content:[{senderType:l?1:n?2:1,t:+c,msg:n,ts:s.formatDate(c,!0),senderFace:o,senderName:r}]};t.apiConfig.adminHelloWordFlag&&e.push(d),setTimeout(function(){i.trigger("core.initsession",e)},0)},v=function(e,i,s){var s=!!s,i=new a;return l(t,i,g).then(function(e){x(e,null,s)},y),i},h=function(e){for(var a=e.list||[],s=0,n=a.length;s<n;s++){var r=a[s],l=r;if(200===r.type){o.setCurrentState("human"),i.trigger("core.system",{type:"system",status:"transfer",data:{content:f.L10002.replace("{0}",l.aname)}}),l.serviceInfo.adminHelloWord&&(t.urlParams.adminHelloWord=l.serviceInfo.adminHelloWord),l.content=t.urlParams.adminHelloWord,i.trigger("core.system",{type:"human",data:l}),i.trigger("core.buttonchange",{type:"transfer",action:"hide"});break}}},y=function(){setTimeout(function(){i.trigger("core.sessionclose",-1)},0)},j=function(e,a,s){var n=e.queueDoc;g=!0,p&&p.destroy(),p=d(e,t),p.start(),a?(i.trigger("core.initsession",s),setTimeout(function(){t.urlParams.msgflag?e.content=n:e.content=n+" "+u,e.aname=f.L10026,t.apiConfig.customerQueueFlag&&i.trigger("core.system",{type:"system",status:"queue",data:e}),i.trigger("core.sessionclose",-2)},1)):(t.urlParams.msgflag?e.content=n:e.content=n+" "+u,e.aname="",i.trigger("core.system",{type:"system",status:"queue",data:e}),i.trigger("core.sessionclose",-2))},T=function(e,a,s){p&&p.destroy(),t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+" "+u,i.trigger("core.buttonchange",{type:"transfer",action:"hide",data:e}),a?setTimeout(function(){i.trigger("core.sessionclose",-1)},1):i.trigger("core.sessionclose",-1)},b=function(e,a){t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+" "+u,e.aname=f.L10025,i.trigger("core.system",{type:"system",status:"blacklist",data:e,moduleType:"humanOnly"}),i.trigger("core.sessionclose",-1)},w=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null},x=function(e,a,s){var s=!!s,o=e.groupId||"";c(t,a).then(function(e,a){var l=t.urlParams,c="/v2/chat/user/chatconnect.action",u={sysNum:t.sysNum,chooseAdminId:t.urlParams.aid||"",tranFlag:t.urlParams.tranFlag,uid:t.apiInit.uid,way:1,current:g,groupId:o||"",transferAction:t.urlParams.transferAction};null!=w("queueFirst")&&(u.queueFirst=w("queueFirst")),l.autoManual&&l.aid&&(c="/v2/chat/user/invite.action",u.aid=l.aid),n({url:c,type:"post",dataType:"json",data:u,success:function(a){return t.urlParams.leaveMsgGroupId=o,a.status==-1?void i.trigger("core.sessionclose",7):void(2==a.status?T(a,s,e):0==a.status?j(a,s,e):1==a.status?(window.parent&&window.postMessage&&"iframe"==t.urlParams.from&&window.parent.postMessage(JSON.stringify({name:"manual",status:"success"}),"*"),a.adminHelloWord&&(t.urlParams.adminHelloWord=a.adminHelloWord),t.urlParams.queueDoc=a.queueDoc||"",a.serviceEndPushMsg&&(t.urlParams.serviceEndPushMsg=a.serviceEndPushMsg||""),s?(m(e,a,t.urlParams.adminHelloWord),i.trigger("core.transfersuccess",{data:a})):(i.trigger("core.system",{type:"system",status:"transfer",data:{content:f.L10002.replace("{0}",a.aname)}}),i.trigger("core.transfersuccess",{data:a}),a.content=t.urlParams.adminHelloWord,i.trigger("core.system",{type:"human",status:"transfer",data:a})),p&&p.destroy(),p=d(a,t),r.setCurrentState("human"),p.start(),i.trigger("core.buttonchange",{type:"transfer",action:"hide"})):3==a.status?b(a,s):6==a.status?(delete t.urlParams.aid,t.apiConfig.smartRouteInfoFlag=!1,i.trigger("core.grouplist")):7==a.status&&(a.content=a.msg,i.trigger("core.system",{type:"system",status:"queue",data:a})))},fail:function(){}})})},I=function(){i.on("sendArea.artificial",v)},F=function(){i.on("core.onreceive",h)},k=function(){var e=t.apiInit.ustatus;0!=e&&1!=e&&e!=-2||v(null,null,!0)},C=function(){I(),F(),k()};C()}t.exports=a},{"../socket/robot.js":25,"../socket/rolling.js":26,"../socket/socketfactory.js":27,"../socket/websocket.js":28,"../util/date.js":29,"../util/listener.js":33,"../util/monitAjax.js":35,"../util/promise.js":37,"./currentState.js":12,"./initsession.js":16,"./transfer.js":23}],16:[function(e,t,i){var a,s,n,o=e("../util/promise.js"),r=e("../util/date.js"),l=e("./offlineMessage.js"),c=(e("../crypto-js/crypto-js.min.js"),function(e,t){var t=t||new o;return 0==e.apiInit.ustatus?setTimeout(function(){t.resolve([])},0):$.ajax({type:"post",url:"/v2/chat/user/queryChatDetailByCid.action",dataType:"json",data:{cid:e.apiInit.cid,ukey:e.apiInit.ukey,companyId:e.apiInit.pid},success:function(e){if(e.length>0)for(var i=e[0].content,a=0;a<i.length;a++)i[a].msg.indexOf("msgFileIco js-msgFileIco")>-1&&(i[a].msg=i[a].msg.replace(/prompt()/gi,""));t.resolve(e)}}),t}),d=function(e,t){var t=t||new o;return $.ajax({url:"/v2/chat/msgOffline/queryOfflineMsg.action",dataType:"jsonp",type:"GET",data:{uid:a.apiInit.uid},success:function(i){var a;if(i.length>0){for(var s=0;s<i.length;s++)for(var n=i[s].content||[],o=0;o<n.length;o++){var c=n[o];0==o&&(a=c),l[c.msgId]=!0,c.msgType="offline",null===c.senderType&&(c.senderType=2),c.msg||(c.msg="")}var d=a.t?new Date(a.t):new Date;d=new Date(d.getTime()+1e5);var u=r.formatDate(d,!0);e.push({type:"offline-seperator",date:"",content:[{senderType:-1,msg:"",ts:a?a.ts:u,t:a?a.t:+new Date}]})}var n=e.concat(i);t.resolve(n)}}),t},u=function(e,t){var t=t||new o;if(s)return void setTimeout(function(){t.resolve(e)},0);var i;return void 0!==a.urlParams.moduleType&&(i=a.urlParams.moduleType),void 0===i&&(i=a.apiConfig.type),a.apiConfig.guideFlag&&1!=a.apiInit.multiFlag&&1!=a.apiInit.ustatus&&2!=i?$.ajax({type:"post",url:"/v2/chat/user/robotGuide.action",dataType:"json",data:{uid:a.apiInit.uid,robotFlag:a.urlParams.robotFlag||""},success:function(i){var s=i.data.ts?new Date(i.data.ts):new Date;s=new Date(s.getTime()+1e5);var n=r.formatDate(s,!0),o=i.data.answer||"";o.indexOf("<a")>=0&&(o=o.replace(/<a/g,'<a target="_blank"')),e.push({type:"robot",answerType:"welcome-sugguestions",date:n,content:[{senderName:a.apiConfig.robotName,senderType:3,msg:o,stripe:"",list:i.data.suggestions,ts:n}]}),t.resolve(e)}}):t.resolve(e),t};t.exports=function(t,i,o){return a=t,n=e("../util/monitAjax.js")(a),s=o,c(a).then(d).then(u)}},{"../crypto-js/crypto-js.min.js":3,"../util/date.js":29,"../util/monitAjax.js":35,"../util/promise.js":37,"./offlineMessage.js":18}],17:[function(e,t,i){function a(t){var i,a,r=3,l=4,c=1,d=2,u=e("./humanfirst.js"),f=e("./robotfirst.js"),p=e("./robotonly.js"),g=e("./humanonly.js"),m=e("../comm.js");if(i=m.getQueryParam(),a=i.moduleType>=1&&i.moduleType<=4?i.moduleType:t.apiConfig.type,s)return s;switch(a!=l&&a!=d||t.apiInit.pid!==o||n.specialError("qufenqi_human_first","mode",{url:location.href,moduleType:a,uid:t.apiInit.uid},t),a){case r:s=new f(t);break;case l:s=new u(t);break;case c:s=new p(t);break;case d:s=new g(t)}return s}var s=null,n=e("../util/errorlog.js"),o="a2a01f79faed48489058af7eabaafc1c";t.exports=a},{"../comm.js":1,"../util/errorlog.js":30,"./humanfirst.js":14,"./humanonly.js":15,"./robotfirst.js":20,"./robotonly.js":21}],18:[function(e,t,i){t.exports={}},{}],19:[function(e,t,i){function a(e){var t=0;for(var i in s)s.hasOwnProperty(i)&&t++;if(0!=t)for(var a=0;a<e.length;a++){for(var n=[],o=0;o<e[a].content.length;o++){var r=e[a].content[o];s[r.msgId]?delete s[r.msgId]:n.push(r)}e[a].content=n}}var s=e("./offlineMessage.js");t.exports=a},{"./offlineMessage.js":18}],20:[function(e,t,i){var a=function(t){var i,a,s=e("../util/listener.js"),n=e("../util/promise.js"),o=e("../util/date.js"),r=e("../socket/robot.js"),l=e("./currentState.js"),c=(e("../socket/websocket.js"),e("../socket/rolling.js"),e("./transfer.js")),d=e("./initsession.js"),u=e("../util/monitAjax.js")(t),f=e("../socket/socketfactory.js"),p=t.apiConfig.leaveMsg,g=t.language.lan,m=!1,v=(new n,0),h=function(){$transferBtn=$(".temp_test")},y=function(e,i){var i=i||new n;return d(t,i).then(function(e,i){e||(e=[]);var a=new Date,n={date:o.formatDate(a),content:[{senderType:1,t:+a,msg:t.urlParams.robotHelloWord,ts:o.formatDate(a,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};return t.apiConfig.robotHelloWordFlag&&e.push(n),setTimeout(function(){s.trigger("core.initsession",e)},0),i}),i},j=function(e,i){var a=!!e,n=e?i.aface:t.apiConfig.robotLogo,r=e?i.aname:t.apiConfig.robotName,e=e||t.urlParams.robotHelloWord,l=t.apiInit.ustatus==-2?1:0;d(t).then(function(i,c){i||(i=[]);var d=new Date,u={date:o.formatDate(d),content:[{senderType:l?1:e?2:1,t:+d,msg:e,ts:o.formatDate(d,!0),senderFace:n,senderName:r}]};return a&&!t.apiInit.multiFlag&&t.apiConfig.adminHelloWordFlag&&i.push(u),a||t.apiInit.multiFlag||!t.apiConfig.robotHelloWordFlag||i.push(u),setTimeout(function(){s.trigger("core.initsession",i)},0),c})},T=function(e,i){i?(j(null,e),setTimeout(function(){t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+p,t.apiConfig.adminNoneLineFlag&&s.trigger("core.system",{type:"system",status:"offline",data:e})},1)):(t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+p,t.apiConfig.adminNoneLineFlag&&s.trigger("core.system",{type:"system",status:"offline",data:e})),l.setCurrentState("robot")},b=function(e,n,o){var c=e.queueDoc;m=!0,a||(a=f(e,t),a.start()),i&&i.destroy(),i=new r(t),n?(j(null,e),setTimeout(function(){t.urlParams.msgflag?e.content=c:e.content=c+" "+p,!o&&t.apiConfig.customerQueueFlag&&s.trigger("core.system",{type:"system",status:"queue",data:e})},1)):(t.urlParams.msgflag?e.content=c:e.content=c+" "+p,(!o&&t.apiConfig.customerQueueFlag||1==e.queueFlag||2==e.queueFlag)&&s.trigger("core.system",{type:"system",status:"queue",data:e})),l.setCurrentState("robot")},w=function(e,a){i&&i.destroy(),window.parent&&window.postMessage&&"iframe"==t.urlParams.from&&window.parent.postMessage(JSON.stringify({name:"manual",status:"success"}),"*"),m=!1,window.parent&&window.postMessage&&window.parent.postMessage(JSON.stringify({type:"manual",status:"success"}),"*"),i=f(e,t),i.start(),l.setCurrentState("human"),e.adminHelloWord&&(t.urlParams.adminHelloWord=e.adminHelloWord),t.urlParams.queueDoc=e.queueDoc||"",e.serviceEndPushMsg&&(t.urlParams.serviceEndPushMsg=e.serviceEndPushMsg||""),a?(j(t.urlParams.adminHelloWord,e),s.trigger("core.transfersuccess",{data:e})):(s.trigger("core.system",{type:"system",status:"transfer",data:{content:g.L10002.replace("{0}",e.aname)}}),s.trigger("core.transfersuccess",{data:e}),e.content=t.urlParams.adminHelloWord,t.apiConfig.adminHelloWordFlag&&s.trigger("core.system",{type:"human",data:e})),s.trigger("core.buttonchange",{type:"transfer",action:"hide"})},x=function(e,i){t.urlParams.msgflag?e.content=g.L10001:e.content=g.L10001+" "+p,s.trigger("core.system",{type:"system",status:"blacklist",data:e}),i&&k()},I=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null},F=function(e){var i;e&&(i=!!e.clickType),c(t,null,m,e).then(function(e,n){var o,r=e.groupId||"",l=e.tranType||"",c=e.transferFlag||"",d=e.keyword||"",f=e.keywordId||"",p=e.queueFlag,g=e.transferType;transferAction=e.transferAction,o=a&&"websocket"==a.type?8:1;var h=t.urlParams,y="/v2/chat/user/chatconnect.action",j={sysNum:t.sysNum,uid:t.apiInit.uid,chooseAdminId:t.urlParams.aid||"",tranFlag:t.urlParams.tranFlag,way:o,current:m,groupId:r||"",keyword:d||"",keywordId:f||"",queueFlag:p,transferType:g,transferAction:transferAction};if(1==p){var F={answer:"",answerType:"5",msgId:"",ustatus:-1};s.trigger("core.onreceive",{list:[F],type:"robot"})}null!=I("queueFirst")&&(j.queueFirst=I("queueFirst")),null!=I("groupId")&&(j.groupId=I("groupId")),h.autoManual&&h.aid&&(y="/v2/chat/user/invite.action",j.aid=h.aid),u({url:y,type:"post",dataType:"json",data:j,success:function(e){if(1==e.status||"keySwitch"!=l||1!=c||e.count||1==e.queueFlag){if(e.status==-1)return void s.trigger("core.sessionclose",7);v++,v>6||(t.urlParams.leaveMsgGroupId=r,2==e.status?T(e,i):0==e.status?b(e,i,f):1==e.status?w(e,i):3==e.status?(s.trigger("core.sessionclose",7),x(e,i),$(".js-queueing").remove()):6==e.status?(delete t.urlParams.aid,t.apiConfig.smartRouteInfoFlag=!1,s.trigger("core.grouplist")):7==e.status&&(e.content=e.msg,s.trigger("core.system",{type:"system",status:"queue",data:e})))}},fail:function(){}})},function(){})},k=function(e,a){e||(e=[]);var n=new Date,c={date:o.formatDate(n),content:[{senderType:1,t:+n,msg:t.urlParams.robotHelloWord,ts:o.formatDate(n,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};!t.apiInit.multiFlag&&t.apiConfig.robotHelloWordFlag&&e.push(c),setTimeout(function(){s.trigger("core.initsession",e)},0),i=new r(t),l.setCurrentState("robot")},C=function(e){for(var n=e.list||[],o=0,r=n.length;o<r;o++){var c=n[o],d=c;if(200===c.type){i&&a&&(i.destroy(),i=a,a=null),l.setCurrentState("human"),s.trigger("core.system",{type:"system",status:"transfer",data:{content:g.L10002.replace("{0}",d.aname)}}),d.serviceInfo.adminHelloWord&&(t.urlParams.adminHelloWord=d.serviceInfo.adminHelloWord),d.content=t.urlParams.adminHelloWord,t.apiConfig.adminHelloWordFlag&&s.trigger("core.system",{type:"human",data:d}),s.trigger("core.buttonchange",{type:"transfer",action:"hide"});break}}},S=function(){s.on("sendArea.artificial",F),s.on("listMsg.keyWordArtificial",F),s.on("listMsg.transTypeArtificial",F),s.on("core.onreceive",C)},A=function(){s.trigger("core.buttonchange",{type:"transfer",action:"show"});var e=t.apiInit.ustatus;if(0==e)i=new r(t),y(),l.setCurrentState("robot");else if(1==e||e==-2){var a={clickType:!0};F(a)}else e==-1&&d(t).then(k)},M=function(){h(),S(),A()};M()};t.exports=a},{"../socket/robot.js":25,"../socket/rolling.js":26,"../socket/socketfactory.js":27,"../socket/websocket.js":28,"../util/date.js":29,"../util/listener.js":33,"../util/monitAjax.js":35,"../util/promise.js":37,"./currentState.js":12,"./initsession.js":16,"./transfer.js":23}],21:[function(e,t,i){var a=function(t){var i,a,s=e("../util/listener.js"),n=e("../util/promise.js"),o=e("../util/date.js"),r=e("../socket/robot.js"),l=e("./currentState.js"),c=(e("../socket/websocket.js"),e("../socket/rolling.js"),e("./transfer.js")),d=e("./initsession.js"),u=t.apiConfig.leaveMsg,f=e("../socket/socketfactory.js"),p=e("../util/monitAjax.js")(t),g=t.language.lan,m=!1,v=function(e,t,a){i&&i.destroy(),e.content=g.L10027+" "+u,s.trigger("core.buttonchange",{type:"transfer",action:"hide",data:e}),t?setTimeout(function(){s.trigger("core.sessionclose",-1)},1):s.trigger("core.sessionclose",-1)},h=function(e,i,a){var n=a?i.aface:t.apiConfig.robotLogo,r=a?i.aname:t.apiConfig.robotName,a=a||t.urlParams.robotHelloWord,l=t.apiInit.ustatus==-2?1:0;e||(e=[]);var c=new Date,d={date:o.formatDate(c),content:[{senderType:l?1:a?2:1,t:+c,msg:a,ts:o.formatDate(c,!0),senderFace:n,senderName:r}]};t.apiConfig.robotHelloWordFlag&&e.push(d),setTimeout(function(){s.trigger("core.initsession",e)},0)},y=function(e,i){t.urlParams.msgflag?e.content=g.L10001:e.content=g.L10001+" "+u,e.aname=g.L10025,s.trigger("core.system",{type:"system",status:"blacklist",data:e}),s.trigger("core.sessionclose",-1)},j=function(e,a,n){var o=g.L10004.replace("{0}",e.count);m=!0,i&&i.destroy(),i=f(e,t),i.start(),a?setTimeout(function(){t.urlParams.msgflag?e.content=o:e.content=o+" "+u,e.aname=g.L10026,s.trigger("core.system",{type:"system",status:"queue",data:e}),s.trigger("core.sessionclose",-2)},1):(t.urlParams.msgflag?e.content=o:e.content=o+" "+u,e.aname=g.L10026,s.trigger("core.system",{type:"system",status:"queue",data:e}),s.trigger("core.sessionclose",-2))},T=function(e,i){var i=i||new n;return d(t,i).then(function(e,i){e||(e=[]);var a=new Date,n={date:o.formatDate(a),content:[{senderType:1,t:+a,msg:t.urlParams.robotHelloWord,ts:o.formatDate(a,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};return t.apiConfig.robotHelloWordFlag&&e.push(n),setTimeout(function(){s.trigger("core.initsession",e)},0),i}),i},b=function(){setTimeout(function(){s.trigger("core.sessionclose",-1)},0)},w=function(e,n,o){var o=!!o;d(t,n).then(function(n,r){var c;c=a&&"websocket"==a.type?8:1;var d=t.urlParams,u="/v2/chat/user/chatconnect.action",T={sysNum:t.sysNum,uid:t.apiInit.uid,chooseAdminId:t.urlParams.aid||"",tranFlag:t.urlParams.tranFlag,way:c,current:m,groupId:e||""};d.autoManual&&d.aid&&(u="/v2/chat/user/invite.action",T.aid=d.aid),p({url:u,type:"post",dataType:"json",data:T,success:function(a){return a.status==-1?void s.trigger("core.sessionclose",7):void(2==a.status?v(a,o,n):0==a.status?(t.urlParams.groupId=e,j(a,o,n)):1==a.status?(window.parent&&window.postMessage&&"iframe"==t.urlParams.from&&window.parent.postMessage(JSON.stringify({name:"manual",status:"success"}),"*"),o?(h(n,a,t.urlParams.adminHelloWord),s.trigger("core.transfersuccess",{data:a})):(s.trigger("core.system",{type:"system",status:"transfer",data:{content:g.L10002.replace("{0}",a.aname)}}),s.trigger("core.transfersuccess",{data:a}),a.content=t.urlParams.adminHelloWord,s.trigger("core.system",{type:"human",status:"transfer",data:a})),i&&i.destroy(),i=f(a,t),l.setCurrentState("human"),i.start(),window.parent&&window.postMessage&&window.parent.postMessage(JSON.stringify({type:"manual",status:"success"}),"*"),s.trigger("core.buttonchange",{type:"transfer",action:"hide"})):3==a.status?(s.trigger("core.sessionclose",7),y(a,o)):6==a.status&&(delete t.urlParams.aid,s.trigger("core.grouplist")))},fail:function(){}})})},x=function(e,i,a){var a=!!a,i=new n;return c(t,i,m).then(function(){w(null,null,a)},b),i},I=function(e,i){e||(e=[]);var a=new Date,n={date:o.formatDate(a),content:[{senderType:1,t:+a,msg:t.urlParams.robotHelloWord,ts:o.formatDate(a,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};!t.apiInit.multiFlag&&t.apiConfig.robotHelloWordFlag&&e.push(n),setTimeout(function(){s.trigger("core.initsession",e)},0)},F=function(){},k=function(){},C=function(){var e=t.apiInit.ustatus;0==e?(setTimeout(function(){s.trigger("core.buttonchange",{type:"transfer",action:"hide"})},5),i=new r(t),l.setCurrentState("robot"),T()):e==-1?(setTimeout(function(){s.trigger("core.buttonchange",{type:"transfer",action:"hide"})},5),i=new r(t),l.setCurrentState("robot"),d(t).then(I)):x(null,null,!0)},S=function(){F(),k(),C()};S()};t.exports=a},{"../socket/robot.js":25,"../socket/rolling.js":26,"../socket/socketfactory.js":27,"../socket/websocket.js":28,"../util/date.js":29,"../util/listener.js":33,"../util/monitAjax.js":35,"../util/promise.js":37,"./currentState.js":12,"./initsession.js":16,"./transfer.js":23}],22:[function(e,t,i){var a={},s='<div class="shadow-layer js-shadow-layer"><div class="group-outer js-group-outer"><div class="group-title">{{= it.languageText.T0010}}</div><div class="group-main"><ul class="clearfix">{{  for(var i=0;i<it.list.length;i++){ }}{{ var item = it.list[i];}}<li class="js-item" data-id="{{=item.groupId}}">{{=item.recGroupName}}</li>{{  } }}</ul></div><div class="group-footer"><span class="js-cancel-btn cancel">{{=it.languageText.T0000}}</span></div></div></div>',n='<div><div class="group-layer js-group-layer"></div><div class="group-outer js-group-outer"><p class="group-title">{{= it.languageText.T0010}}<span class="close_button js-cancel-btn js-group-cancel"></span></p><div class="group-main"><ul class="clearfix">{{  for(var i=0;i<it.list.length;i++){ }}{{ var item = it.list[i];}}<li class="js-item" data-id="{{=item.groupId}}">{{=item.recGroupName}}</li>{{  } }}</ul></div></div></div>',o='<div class=""><div class="chatBeforeFormlayer js-chatBeforeFormlayer"></div><div id="chatBeforeForm" class="chatBeforeForm js-chatBeforeForm"> <div class="js-chatBeforeFormHeader chatBeforeFormHeader"><p class="title">{{=it.formTitle}}</p><span class="close js-cancel-btn"></span></div><div class="chatBeforeFormBody js-chatBeforeFormBody"><div class="guide">{{=it.formDoc}}</div><div class="definedFields js-definedFields">{{for(var i=0;i<it.definedField.length;i++){}} {{if(it.definedField[i].cusFieldConfig.fieldType==1){}} <div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span> {{}}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><input type="text" class="definedInput js-definedInput" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId}}"><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==2){}}<div class="definedArea js-definedArea"> <p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span> {{}}} {{=it.definedField[i].cusFieldConfig.fieldName}}</p><textarea class="definedTextarea js-definedInput" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId}}"></textarea><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==3){}}<div class="definedArea definedDateArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><input type="text" class="definedInput js-definedDate" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId}}" id="dp{{=it.definedField[i].cusFieldConfig.fieldId}}" readonly="readonly" ><div style="clear:both"></div></div><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}" style="margin:3px 3%">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p>{{}else if(it.definedField[i].cusFieldConfig.fieldType==4){}}<div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div class="definedTimeDropList js-dropdownList" id="hour{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}"><div class="js-dropdown-btn"><p class="definedTimeInput js-dropdown-title js-definedHour">00</p><span class="dropListTitleIcn"></span></div><ul class="dropdown-menus js-dropdown-menu zc-scroll">{{for(var j=0;j < 24;j++){}}{{if(j<10){}}<li class="js-dropdownLi dropdownLi" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" style="width:60px;">{{="0"+j}}</li>{{}else{}}<li class="js-dropdownLi dropdownLi" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" style="width:60px;">{{=j}}</li>{{}}}{{}}}</ul></div><span class="definedTimeText">:</span><div class="definedTimeDropList js-dropdownList" id="minute{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}"><div class="js-dropdown-btn"><p class="definedTimeInput js-dropdown-title js-definedMinutes">00</p> <span class="dropListTitleIcn"></span></div><ul class="dropdown-menus js-dropdown-menu zc-scroll">{{for(var j=0;j < 60;j++){}}{{if(j<10){}}<li class="js-dropdownLi dropdownLi" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" style="width:60px;">{{="0"+j}}</li>{{}else{}}<li class="js-dropdownLi dropdownLi" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" style="width:60px;">{{=j}}</li>{{}}}{{}}} </ul></div><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p> <div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==5){}}<div class="definedArea js-definedArea"><p class="title">{{=it.definedField[i].cusFieldConfig.fieldName}}{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span> {{}}}</p><input class="definedInput js-definedInput js-definedNumInput js-definedNumInput{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" type="number" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}"><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==6){}}<div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}} {{=it.definedField[i].cusFieldConfig.fieldName}}</p><div class="js-dropdownList dropdownList" id="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}"><div class="definedDropList js-dropdown-btn"><p class="definedDropListTitle js-dropdown-title">{{=it.languageText.T0118}}</p><span class="dropListTitleIcn"></span></div><ul class="definedDropListUl js-dropdown-menu zc-scroll">{{for(var j=0;j<it.definedField[i].cusFieldDataInfoList.length;j++){}}<li class="js-dropdownLi" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" dataValue="{{=it.definedField[i].cusFieldDataInfoList[j].dataValue}}" fieldType="{{=it.definedField[i].cusFieldDataInfoList[j].fieldType}}" dataName="{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}" title="{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}">{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}<span></span></li>{{}}}</ul><div style="clear:both"></div></div><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==7){}}<div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}} {{=it.definedField[i].cusFieldConfig.fieldName}}</p><ul class="definedCheckedUl">{{for(var j=0;j<it.definedField[i].cusFieldDataInfoList.length;j++){}} <li class="definedCheckedLi  js-userCheck {{=it.definedField[i].cusFieldDataInfoList[j].userCheckIcoActive=="userCheckIcoActive"?"":"userCheck"}}" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" dataValue="{{=it.definedField[i].cusFieldDataInfoList[j].dataValue?it.definedField[i].cusFieldDataInfoList[j].dataValue:""}}" dataName="{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}"><span class="definedCheckedLiIcn js-userCheckIco{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}} {{=it.definedField[i].cusFieldDataInfoList[j].userCheckIcoActive=="userCheckIcoActive"?"userCheckIcoActive":""}}"></span><span class="definedCheckedLiText">{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}</span></li>{{}}}</ul><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==8){}}<div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span> {{}}} {{=it.definedField[i].cusFieldConfig.fieldName}}</p><div class="definedOptionUl js-optionArea">{{for(var j=0;j<it.definedField[i].cusFieldDataInfoList.length;j++){}} <div class="js-userOpt definedOptionLi {{=it.definedField[i].cusFieldDataInfoList[j].userOptIcoActive=="userOptIcoActive"?"":"userOpt"}}" data-fieldId="{{=it.definedField[i].cusFieldDataInfoList[j].fieldId?it.definedField[i].cusFieldDataInfoList[j].fieldId:""}}" dataValue="{{=it.definedField[i].cusFieldDataInfoList[j].dataValue?it.definedField[i].cusFieldDataInfoList[j].dataValue:""}}" dataName="{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}"><span class="userOptIco js-userOptIco{{=it.definedField[i].cusFieldDataInfoList[j].fieldId}} {{=it.definedField[i].cusFieldDataInfoList[j].userOptIcoActive=="userOptIcoActive"?it.definedField[i].cusFieldDataInfoList[j].userOptIcoActive:""}}"></span><p class="definedOptionLiText">{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}</p></div>{{}}}</div><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==9){}} <div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div class="js-dropdownList dropdownList" id="province"><div class="cityDropList js-dropdown-btn"><p class="cityDropListTitle js-dropdown-title">{{=it.languageText.T0121}}</p><span class="dropListTitleIcn"></span></div><ul class="cityDropListUl js-provinceDropListUl js-dropdown-menu zc-scroll"></ul><div style="clear:both"></div></div><div class="js-dropdownList dropdownList" id="city"><div class="cityDropList js-dropdown-btn"><p class="cityDropListTitle js-dropdown-title js-cityDropListTitle">{{=it.languageText.T0122}}</p><span class="dropListTitleIcn"></span></div><ul class="cityDropListUl js-cityDropListUl js-dropdown-menu zc-scroll"></ul><div style="clear:both;"></div></div><div class="js-dropdownList dropdownList" id="county"><div class="cityDropList js-dropdown-btn"><p class="cityDropListTitle js-dropdown-title js-countryDropListTitle">{{=it.languageText.T0123}}</p><span class="dropListTitleIcn"></span></div><ul class="cityDropListUl js-countryDropListUl js-dropdown-menu zc-scroll"></ul><div style="clear:both"></div></div><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}}}{{}}}</div></div><div class="submitArea"><span class="submit js-chatBeforeFormSubmit">{{=it.languageText.T0120}}</span></div></div></div>',r='<div><div class="chatFormLayer js-chatFormLayer"><div class="chatBeforeForm"><div class="header"><p class="title">{{=it.formTitle}}</p><span class="closeForm js-closeForm"></span></div><div class="chatBeforeForm-content js-chatBeforeForm-content"><div class="wrap-helper js-wrap-helper"><div class="js-helper helper"><div><p><span>{{=it.formDoc}}</span></p></div></div></div><div class="definedAreas">{{for(var i=0;i<it.items.length;i++){}}{{if(it.items[i].cusFieldConfig.fieldType==1){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><input type="text" class="definedInput js-definedInput" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}"></div>{{}else if(it.items[i].cusFieldConfig.fieldType==2){}} <div class="definedArea js-definedArea"><p class="title" style="height:80px">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><textarea class="definedTextarea js-definedInput" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}"></textarea></div>{{}else if(it.items[i].cusFieldConfig.fieldType==3){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><div class="definedDateArea js-definedDateArea"><input type="text" class="definedDate js-definedDate" placeholder="{{=it.languageText.T0127}}xxxx-xx-xx" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}"></div></div>{{}else if(it.items[i].cusFieldConfig.fieldType==4){}} <div class="definedArea js-definedArea"><p class="title" style="width:18%">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><div class="definedTimeArea"><input type="text" readonly="readonly" value="00" date-type="hour" class="definedTimeDropList js-definedTimeDropList js-definedHour"><span  class="definedTimeText">{{=it.languageText.T0115}} <span class="definedTimeIcn"></span> |</span><input type="text" readonly="readonly" value="00" date-type="minutes" class="definedTimeDropList js-definedTimeDropList js-definedMinutes"><span  class="definedTimeText">{{=it.languageText.T0116}} <span class="definedTimeIcn"></span></span><div class="dropListArea js-dropListArea js-dropListHour"><p class="dropListAreaTitle"><span class="titleText">{{=it.languageText.T0114}}</span><span class="close js-dropLIstAreaClose">{{=it.languageText.T0111}}</span></p><ul class="definedTimeDropListUl">{{for(var j=0;j<24;j++){}} {{if(j<10){}}<li class="js-definedTimeLi js-dropLIstAreaClose" date-type="hour" dataValue="{{="0"+j}}" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}">{{="0"+j}}<span></span></li>{{}else{}}<li class="js-definedTimeLi js-dropLIstAreaClose" date-type="hour" dataValue="{{=j}}" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}">{{=j}}<span></span></li>{{}}}{{}}}</ul></div><div class="dropListArea js-dropListArea js-dropListMinutes"><p class="dropListAreaTitle"><span class="titleText">{{=it.languageText.T0113}}</span><span class="close js-dropLIstAreaClose">{{=it.languageText.T0111}}</span></p><ul class="definedTimeDropListUl">{{for(var j=0;j<60;j++){}} {{if(j<10){}}<li class="js-definedTimeLi js-dropLIstAreaClose" date-type="minutes" dataValue="{{="0"+j}}" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}">{{="0"+j}}<span></span></li>{{}else{}}<li class="js-definedTimeLi js-dropLIstAreaClose" date-type="minutes" dataValue="{{=j}}" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}">{{=j}}<span></span></li>{{}}}{{}}}</ul></div></div></div>{{}else if(it.items[i].cusFieldConfig.fieldType==5){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><input class="definedInput js-definedInput" type="number" oninput="if(value.length>300)value=value.slice(0,300)"  fieldId="{{=it.items[i].cusFieldConfig.fieldId}}"></div>{{}else if(it.items[i].cusFieldConfig.fieldType==6){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><div class="definedDropList js-definedDropList"><p class="definedDropListText js-definedDropListText"></p><span class="definedDropListTextIcn"></span></div><div class="dropListArea js-dropListArea"><p class="dropListAreaTitle"><span class="titleText">{{=it.items[i].cusFieldConfig.fieldName}}</span><span class="close js-dropLIstAreaClose">{{=it.languageText.T0111}}</span></p><div class="definedDropListUlWidely"><ul class="definedDropListUl">{{for(var j=0;j<it.items[i].cusFieldDataInfoList.length;j++){}}<li class="js-definedDropListLi js-dropLIstAreaClose" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}" dataValue="{{=it.items[i].cusFieldDataInfoList[j].dataValue}}" dataName="{{=it.items[i].cusFieldDataInfoList[j].dataName}}"><span class="definedDropListLiText">{{=it.items[i].cusFieldDataInfoList[j].dataName}}</span><span class="icn"></span></li>{{}}}</ul></div></div></div>{{}else if(it.items[i].cusFieldConfig.fieldType==7){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><div class="definedDropList js-definedDropList"><p class="definedDropListText js-definedDropListText"></p><span class="definedDropListTextIcn"></span></div><div class="dropListArea js-dropListArea"><p class="dropListAreaTitle"><span class="titleText">{{=it.items[i].cusFieldConfig.fieldName}}</span><span class="close js-dropLIstAreaClose">{{=it.languageText.T0111}}</span></p><div class="definedCheckedUlWidely zc-scroll"><ul class="definedCheckedUl">{{for(var j=0;j<it.items[i].cusFieldDataInfoList.length;j++){}}<li class="definedCheckedLi js-definedCheckedLi" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}" dataValue="{{=it.items[i].cusFieldDataInfoList[j].dataValue}}" dataName="{{=it.items[i].cusFieldDataInfoList[j].dataName}}"><span class="definedCheckedLiText">{{=it.items[i].cusFieldDataInfoList[j].dataName}}</span><span class="icn"></span></li>{{}}}</ul></div><p class="checkedSure js-checkedSure" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0001}}</p></div></div>{{}else if(it.items[i].cusFieldConfig.fieldType==8){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><div class="definedDropList js-definedDropList"><p class="definedDropListText js-definedDropListText"></p><span class="definedDropListTextIcn"></span></div><div class="dropListArea js-dropListArea"><p class="dropListAreaTitle"><span class="titleText">{{=it.items[i].cusFieldConfig.fieldName}}</span><span class="close js-dropLIstAreaClose">{{=it.languageText.T0111}}</span></p><div class="definedDropListUlWidely"><ul class="definedDropListUl">{{for(var j=0;j<it.items[i].cusFieldDataInfoList.length;j++){}}<li class="js-definedDropListLi js-dropLIstAreaClose" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}" dataValue="{{=it.items[i].cusFieldDataInfoList[j].dataValue}}" dataName="{{=it.items[i].cusFieldDataInfoList[j].dataName}}"><span class="definedDropListLiText">{{=it.items[i].cusFieldDataInfoList[j].dataName}}</span><span class="icn"></span></li>{{}}}</ul></div></div></div>{{}else if(it.items[i].cusFieldConfig.fieldType==9){}}<div class="cityArea "><p class="text">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><p class="cityAreaTitle js-cityAreaTitle"></p><span class="classIfyIcn"></span><div class="cityAreaLayer js-orderClassifyLayer"><div class="cityAreaInner js-orderClassifyInner"><div class="titleArea"><span class="title js-cityTitle">{{=it.languageText.T0121}}</span><span class="close js-orderClassifyClose">{{=it.languageText.T0111}}</span></div><div class="areaListArea js-areaListArea"></div></div></div></div>{{}}}{{}}}</div><div class="chatBeforeFormCommitWidely"><p class="chatBeforeFormCommit js-chatBeforeFormCommit">{{=it.languageText.T0120}}</p></div></div><div class="definedLayer js-definedLayer"></div></div></div>',l='<div class="cityList"><div class="questionList js-firstQuestionList">{{ for(var i=0;i<it.items.length;i++){ }}{{if(it.items[i].provinceId){}}<p class="js-provinceList" provinceId="{{=it.items[i].provinceId}}" provinceName="{{=it.items[i].provinceName}}" endFlag="{{=it.items[i].endFlag}}">{{=it.items[i].provinceName}}{{if(!it.items[i].endFlag){}}<span class="firstIcon"></span>{{}}}<span class="sureActive"></span></p>{{}}}{{ } }}</div></div>',c='<div class="cityList"><div class="questionList js-firstQuestionList">{{ for(var i=0;i<it.items.length;i++){ }}{{if(it.items[i].cityId){}}<p class="js-provinceList" cityId="{{=it.items[i].cityId}}" cityName="{{=it.items[i].cityName}}" endFlag="{{=it.items[i].endFlag}}">{{=it.items[i].cityName}}{{if(!it.items[i].endFlag){}}<span class="firstIcon"></span>{{}}}<span class="sureActive"></span></p>{{}}}{{ } }}</div></div>',d='<div class="cityList"><div class="questionList js-firstQuestionList">{{ for(var i=0;i<it.items.length;i++){ }}{{if(it.items[i].areaId){}}<p class="js-provinceList" areaId="{{=it.items[i].areaId}}" areaName="{{=it.items[i].areaName}}">{{=it.items[i].areaName}}<span class="sureActive"></span></p>{{}}}{{ } }}</div></div>',u='{{for(var i=0;i<it.list.length;i++){}}<li class="js-cityLi" provinceId="{{=it.list[i].provinceId}}" title="{{=it.list[i].provinceName}}">{{=it.list[i].provinceName}}</li>{{}}}',f='{{for(var i=0;i<it.list.length;i++){}}<li class="js-cityLi" cityId="{{=it.list[i].cityId}}" title="{{=it.list[i].cityName}}">{{=it.list[i].cityName}}</li>{{}}}',p='{{for(var i=0;i<it.list.length;i++){}}<li class="js-cityLi" areaId="{{=it.list[i].areaId}}" title="{{=it.list[i].areaName}}">{{=it.list[i].areaName}}</li>{{}}}',g='<div><div class="js-showTip showTip"><p class="showTipText">{{=it.text}}</p></div></div>';
a.groupTemplate=s,a.groupTemplatePC=n,a.provinceEle=u,a.cityEle=f,a.countryEle=p,a.chatBeforeFormPc=o,a.chatBeforeFormH5=r,a.provinceEleH5=l,a.cityListEleH5=c,a.areaListEleH5=d,a.showTip=g,t.exports=a},{}],23:[function(e,t,i){function a(t,i,a,s){var n=(e("../util/listener.js"),e("../util/promise.js"));i=i||new n;var o=(e("./template.js"),t.language.lan,t.language.text,e("./chatGroups.js")),r=e("./chatBeforeForm.js"),l=e("../util/monitAjax.js")(t),c=function(e,t,i,a){var s=e.urlParams.groupId||"",n=e.urlParams.transferAction||"",o=e.urlParams,r={global:e,groupId:s,transferType:a&&a.transferType?a.transferType:"",queueFlag:a&&a.queueFlag?a.queueFlag:"",transferFlag:a&&a.transferFlag?a.transferFlag:"",transferAction:n},c=a?a.switchType:"",d=a?a.groupId:"",u=a?a.transferFlag:"",f=a?a.keyword:"",p=a?a.keywordId:"";if(queueFlag=a?a.queueFlag:"","transferType"==c&&(r.tranType="transferType",r.transferFlag=u),"keySwitch"==c)if(s){if(1==queueFlag){var g={global:e,groupId:"",tranType:c,transferFlag:u,keyword:f,keywordId:p,queueFlag:queueFlag,transferAction:n};setTimeout(function(){t.resolve(g)},0)}}else{var g={global:e,groupId:d,tranType:c,transferFlag:u,keyword:f,keywordId:p,queueFlag:queueFlag,switchTypeStyle:a.switchTypeStyle,transferAction:n};setTimeout(function(){t.resolve(g)},0)}else o.aid&&"number"==typeof o.tranFlag?setTimeout(function(){t.resolve(r)},0):o.autoManual&&o.aid?setTimeout(function(){t.resolve(r)},0):0!==e.apiInit.ustatus&&e.apiInit.ustatus!==-1?setTimeout(function(){t.resolve(r)},0):i?setTimeout(function(){t.resolve(r)},0):0===e.apiConfig.groupflag?setTimeout(function(){t.resolve(r)},0):"keySwitch"!=c&&e.urlParams.groupId&&e.urlParams.groupId.length?setTimeout(function(){t.resolve(r)},0):e.apiConfig.smartRouteInfoFlag?setTimeout(function(){t.resolve(r)},0):l({url:"/v2/chat/user/getGroupList.action",dataType:"json",type:"get",data:{companyId:e.apiInit.pid,source:e.userInfo.source,channelFlag:e.urlParams.channelFlag||""},success:function(e){if(1==e.length){var i=e[0];r.global.urlParams.groupId=i.groupId,r.groupId=i.groupId,t.resolve(r)}else 0==e.length?t.resolve(r):(r.groupList=e,t.resolve(r))},fail:function(){}});return t};return c(t,i,a,s).then(o).then(r,function(e){e.reject(e)}).then(function(e){i.resolve(e)},function(e){e.reject(e)}),i}t.exports=a},{"../util/listener.js":33,"../util/monitAjax.js":35,"../util/promise.js":37,"./chatBeforeForm.js":10,"./chatGroups.js":11,"./template.js":22}],24:[function(e,t,i){function a(t){var i,i,a=2e4,r=3e3,l=e("../util/monitAjax.js")(t);s.on("core.sessionclose",function(e){e!==-2&&e!==-3&&clearInterval(i)});var c=function(){l({url:"/v2/chat/user/msgt.action",type:"post",dataType:"json",data:{uid:t.apiInit.uid,pid:t.apiInit.pid},success:function(e){e&&0==e.ustatus&&"human"==n.getCurrentState()&&s.trigger("core.sessionclose",4);var t=o.isReady();if(t){var i="rolling"===o().getType()?1:8;i!==e.way&&s.trigger("core.sessionclose",4)}},error:function(e){var t=new Image;t.src="images/static/errorlog.png?t="+ +new Date+"&response="+encodeURIComponent(e.response)+"&status="+e.status+"&statusText="+encodeURIComponent(e.statusText)+"&timeout="+e.timeout+"&from=heartbeat_user"}})};setTimeout(function(){c(),i=setInterval(c,a)},r)}var s=e("../util/listener.js"),n=e("../mode/currentState.js"),o=e("./socketfactory.js");t.exports=a},{"../mode/currentState.js":12,"../util/listener.js":33,"../util/monitAjax.js":35,"./socketfactory.js":27}],25:[function(e,t,i){function a(t){var i=e("../util/listener.js"),a="robot",s=!1,n=e("../util/monitAjax.js")(t),o=e("../util/errorlog.js"),r=function(){},l=function(e){return e.uid+""+e.date},c=function(e){var r=e[0];if(!r.leaveMsg&&"robot"===r.currentStatus){var c=(l(r),r.answer.replace(/(^\s+|\s+$)/g,""));/^\d+$/.test(c)||(s=!1),"question"==r.requestType&&(s=!0),r.answer||o.specialError("question_blank","common_robot",r,t),n({url:"/v2/chat/user/robotsend.action",data:{requestText:("string"==typeof r.requestText?r.requestText:JSON.stringify(r.requestText))||r.answer||"",question:("object"==typeof r.multiDiaQuestion?JSON.stringify(r.multiDiaQuestion):r.multiDiaQuestion)||r.answer,sysNum:t.sysNum,uid:t.apiInit.uid,cid:t.apiInit.cid,source:t.userInfo.source,questionFlag:2===r.questionFlag?r.questionFlag:s?1:0,lanFlag:t.urlParams.lanFlag||0,robotFlag:t.urlParams.robotFlag||""},type:"post",success:function(e){var t="object"==typeof e?e:JSON.parse(e);if(4==t.answerType&&(s=!0),i.trigger("core.onreceive",{list:[t],type:a}),i.trigger("core.msgresult",{msgId:r.dateuid,result:"success"}),t.keyword)i.trigger("core.keySwitchAdmin",t);else if(1==t.transferType||2==t.transferType){var n={answer:"",answerType:"5",msgId:"",transferType:0,ustatus:-1};i.trigger("core.onreceive",{list:[n],type:a}),i.trigger("core.transTypeSwitchAdmin",t)}0===t.ustatus&&i.trigger("core.sessionclose",8)},error:function(e){i.trigger("core.msgresult",{msgId:r.dateuid,result:"fail"})}}),s=!1}},d=function(){i.off("sendArea.send",c),i.off("sendArea.sendSugguestions",c),i.off("multiConv.send",c)},u=function(){i.on("sendArea.send",c),i.on("sendArea.sendSugguestions",c),i.on("multiConv.send",c)},f=function(){r(),u()};this.destroy=d,f()}t.exports=a},{"../util/errorlog.js":30,"../util/listener.js":33,"../util/monitAjax.js":35}],26:[function(e,t,i){function a(t,i,a){this.puid=t;var n,o=e("../util/listener.js"),r=e("../util/uploadLog.js"),l=e("../util/monitAjax.js")(a),c=e("../util/errorlog.js"),d="human",u=0,f={},p=(a.language.lan,this),g=function(e,i){var i=i||0,a=e[0];if("human"===a.currentStatus){a.date?a.ts=a.date:a.ts=+new Date;var s={};s=24==a.msgType?{puid:t,cid:a.cid,uid:a.uid,msgType:a.msgType,content:a.miniPage}:{puid:t,cid:a.cid,uid:a.uid,content:a.answer},l({url:"/v2/chat/user/chatsend.action",data:s,dataType:"json",type:"POST",success:function(e){o.trigger("core.msgresult",{msgId:a.dateuid,result:"success"})},error:function(e){i>=3?o.trigger("core.msgresult",{msgId:a.dateuid,result:"fail"}):setTimeout(function(){g([a],i+1)},1e3)}})}},m=function(){clearInterval(n)},v=function(e){for(var t=[],i=0,a=e.length;i<a;i++){var s=e[i],n={type:300,utype:u,cid:s.cid,uid:s.uid,msgId:s.msgId};t.push(n)}t.length<=0||!JSON.stringify||l({url:"/v2/chat/user/msg/ack.action",dataType:"json",data:{content:JSON.stringify(t),tnk:+new Date},type:"POST"})},h=function(){l({url:"/v2/chat/user/msg.action",dataType:"json",data:{puid:t,uid:a.apiInit.uid,token:+new Date},type:"get",success:function(e){if(e&&e.length)try{for(var t=[],i=[],s=0;s<e.length;s++){var n=JSON.parse(e[s]);if(n.msgId||(n.msgId=+new Date+Math.random().toString(36).substr(2)+n.type),!f[n.msgId])if(f[n.msgId]=!0,t.push(n),202===n.type&&i.push(n),204===n.type){n.logMsg="rolling.js========204",r.uploadLog(n);var l=a.urlParams.serviceEndPushMsg.replace("##",n.aname);if(o.trigger("core.sessionclose",n.status),2==n.status||4==n.status)a.apiConfig.serviceEndPushFlag&&o.trigger("core.system",{type:"system",status:"kickout",data:{content:l}});else if(5==n.status){var u="";o.trigger("core.system",{type:"system",status:"kickout",data:{content:u}})}}else 212==n.type&&o.trigger("core.system",{type:"system",status:"",data:{content:n.content}})}window.parent&&"iframe"===a.urlParams.from&&i.length>0&&window.postMessage&&window.parent.postMessage(JSON.stringify({name:"zhichiReceive",data:i}),"*"),v(t),o.trigger("core.onreceive",{type:d,list:t})}catch(p){c.runtimeError(p,"onreceive.rolling",{type:d,list:t},a)}},error:function(e,t){var i=new Image;i.src="images/static/errorlog.png?t="+ +new Date+"&e="+encodeURIComponent(t)+"&reponse="+e.responseText+"&uid="+a.apiInit.uid}})},y=function(){o.on("sendArea.send",g),o.on("multiConv.send",g),o.on("sendArea.sendSugguestions",g)},j=function(){setInterval(h,1500),s(a)},T=function(){y(),j()};T(),this.getType=function(){return p.type},this.type="rolling",this.destroy=m,this.start=h}var s=e("./heartbeat.js");t.exports=a},{"../util/errorlog.js":30,"../util/listener.js":33,"../util/monitAjax.js":35,"../util/uploadLog.js":39,"./heartbeat.js":24}],27:[function(e,t,i){var a=null,s=3e5,n=!1,o=function(t,i){if(a)return a;var o=+new Date;window.localStorage&&(o=+window.localStorage.getItem("websocketerror"));var r=!0;o&&(r=+new Date-o>s);var l=e("../socket/websocket.js"),c=e("../socket/rolling.js"),d=t["wslink.bak"];d.push(t["wslink.default"]);var u=t["wslink.default"];return a=window.WebSocket&&r&&(u.indexOf("ws:")>=0||u.indexOf("wss:")>=0)?new l(t.puid,d,u,i):new c(t.puid,t["wslink.default"],i),n=!0,a};o.isReady=function(){return n},t.exports=o},{"../socket/rolling.js":26,"../socket/websocket.js":28}],28:[function(e,t,i){function a(t,i,a,n){this.puid=t;var o,r,l,c=(Math.floor(Math.random()*i.length),"human"),d={},u=e("../util/listener.js"),f=e("../util/uploadLog.js"),p=e("../util/errorlog.js"),g=e("../util/date.js"),m=15e3,v=n.language.lan,h=this;this.channelId=Math.random().toString(32).substr(2);var y=!1,j=0,T=0,b=0,w=(new Date,5e3),x=0,I={},F=function(){var e=+new Date;for(var t in I){var i=I[t];e-i.sendTime>=w&&(delete I[t],u.trigger("core.msgresult",{msgId:i.dateuid,result:"fail"}))}},k=function(e){var t=e;if(Object.prototype.toString.call(e).indexOf("Array")>=0&&(t=e[0]),"human"===t.currentStatus){var i=t.date?new Date(t.date):new Date;t.t=+i,t.ts=g.formatDate(i,!0),t.type=103,t.msgId=t.dateuid,t.sendTime=t.date,t.channelId=h.channelId,t.content=t.answer,t.uname=n.apiInit.uname;var a=$("<div></div>");a.text(t.uname),t.uname=a.html(),t.face=n.userInfo.face,I[t.msgId]=t,T++,o.send(JSON.stringify(t))}},C=function(e){u.trigger("core.msgresult",{msgId:e.msgId,result:"success"}),delete I[e.msgId]},S=function(e){u.trigger("core.onreceive",{type:c,list:[e]})},A=function(e){var t=n.urlParams.serviceEndPushMsg.replace("##",e.aname);if(204==e.type){if(e.logMsg="websocket.js========204",f.uploadLog(e),u.trigger("core.sessionclose",e.status),y=e.status%2==0,o.close(),2==e.status||4==e.status)u.trigger("core.system",{type:"system",status:"kickout",data:{content:t}});else if(5==e.status){var i="";u.trigger("core.system",{type:"system",status:"kickout",data:{content:i}})}}else 212==e.type&&u.trigger("core.system",{type:"system",status:"",data:{content:e.content}});u.trigger("core.onreceive",{type:c,list:[e]})},M=function(e){if(301!=e.type){var t={type:300,msgId:e.msgId,utype:x,data:[e],channelId:h.channelId};try{o.send(JSON.stringify(t))}catch(i){}}},L=function(e){if("pong"===e.data)return clearTimeout(l),void(l=setTimeout(function(){o.close()},m));b++;var t=JSON.parse(e.data);if(!d[t.msgId+"_"+t.type]){var i=[];202===t.type&&i.push(t),window.top&&"iframe"===n.urlParams.from&&i.length>0&&window.top.postMessage(JSON.stringify({name:"zhichiReceive",data:i}),"*"),M(t),t.msgId||(t.msgId=+new Date+Math.random().toString(36).substr(2)+t.type),d[t.msgId+"_"+t.type]=t;try{301==t.type?C(t):202==t.type?S(t):A(t)}catch(a){p.runtimeError(a,"receive.websocket",t,n)}}},_=function(){if(j++>=3){var e=v.L10003.replace("{0}","");return u.trigger("core.system",{type:"system",status:"kickout",data:{content:e}}),void u.trigger("core.sessionclose",-4)}setTimeout(function(){Math.floor(Math.random()*i.length);o=new WebSocket(a),o.onerror=N,o.onopen=D,o.onclose=B,o.onmessage=L},5e3)},P=function(e){if(window.localStorage&&!y)try{window.localStorage.setItem("websocketerror",+new Date)}catch(e){p.runtimeError(e,"localStorage error",data,n)}y||_()},D=function(){r=setInterval(function(){o.send("ping")},5e3),window.localStorage&&window.localStorage.removeItem("websocketerror");var e={t:x,u:n.apiInit.uid,puid:t,s:n.sysNum,ts:+new Date},i=0;for(var a in I)i++;j=0,o.send(JSON.stringify(e));for(var a in I){var s=I[a];o.send(JSON.stringify(s))}setInterval(F,1e3)},B=function(e){P(e),clearTimeout(r)},N=function(e){},R=function(){o.onerror=N,o.onopen=D,o.onclose=B,o.onmessage=L,u.on("sendArea.send",k),u.on("sendArea.sendSugguestions",k)},O=function(){R()},z=function(){o&&(o.close(),clearTimeout(r))},E=function(){o=new WebSocket(a),O(),s(n)},H=function(){};this.getType=function(){return h.type},this.type="websocket",this.destroy=z,this.start=E,this.stop=H}var s=e("./heartbeat.js");t.exports=a},{"../util/date.js":29,"../util/errorlog.js":30,"../util/listener.js":33,"../util/uploadLog.js":39,"./heartbeat.js":24}],29:[function(e,t,i){var a={},s=function(e){return e>=10?e+"":"0"+e},n=function(e){var t=s,i=e.getHours(),a=e.getMinutes(),n=e.getSeconds(),o=[t(i),t(a),t(n)];return o.join(":")},o=function(e,t){var i=s,a=e.getFullYear(),o=e.getMonth()+1,r=e.getDate(),l=[i(a),i(o),i(r)],c=e.getHours(),d=e.getMinutes(),u=e.getSeconds();[i(c),i(d),i(u)];return l.join("-")+(t?" "+n(e):"")};a.formatTime=n,a.formatDate=o,t.exports=a},{}],30:[function(e,t,i){var a,s={},n=e("../config/config.json"),o=e("../lib/detect.js"),r=encodeURIComponent,l=/Mobile/.test(window.navigator.userAgent)?"wap":"pc",c=function(e,t,i,s){var o=new Image,c="error="+r(e.toString());c+="&stack="+r(e.stack),c+="&from="+t,c+="&os="+a.os.family,c+="&osVersion="+a.os.version,c+="&browser="+a.browser.family,c+="&browserVersion="+a.browser.version,c+="&type="+l,c+="&uid="+s.apiInit.uid,c+="&data="+r(JSON.stringify(i)),c+="&pid="+s.apiInit.pid,o.src="//"+n.errorlogPath+"runtime?"+c},d=function(e,t,i,a){new Image;$.ajax({url:"//"+n.errorlogPath+"special",type:"post",dataType:"json",data:{errorType:e,from_type:t,data:r(JSON.stringify(i)),pid:a.apiInit.pid,type:l}})},u=function(e,t,i,a,s,o){var c=new Image,d=[];d.push("url="+r(t)),d.push("data="+r(JSON.stringify(i))),d.push("pid="+o.apiInit.pid),d.push("duration="+r(a)),d.push("uid="+r(o.apiInit.uid)),d.push("type="+l),d.push("reqType="+s);var u=d.join("&");c.src="//"+n.errorlogPath+"overtime?"+u},f=function(e,t,i,a,s){var o=new Image,c=[];c.push("status="+e.status),c.push("statusText="+e.statusText),c.push("url="+r(t)),c.push("data="+r(JSON.stringify(i))),c.push("pid="+s.apiInit.pid),c.push("responseText="+r(e.responseText)),c.push("type="+l),c.push("uid="+r(s.apiInit.uid)),c.push("reqType="+a);var d=c.join("&");o.src="//"+n.errorlogPath+"network?"+d};!function(){var e=window.navigator.userAgent;a=o.parse(e)}(),s.networkError=f,s.runtimeError=c,s.overTimeError=u,s.specialError=d,s.init=function(){},s.getFlag=function(){return!1},t.exports=s},{"../config/config.json":2,"../lib/detect.js":6}],31:[function(e,t,i){function a(e,t){var t=t||0;if("object"!=typeof e)throw"not a json";var i=Object.prototype.toString.call(e),s="";if(/Array/.test(i)){s="[";for(var n=[],o=0;o<e.length;o++){var r=e[o];if("object"==typeof r)try{n.push(a(r,t))}catch(l){continue}else n.push(r.toString())}return s+n.join(", ")+"]"}if(/Object/.test(i)){var c,d="",u="",n=[];s="{";var f=0;for(var p in e)if(e.hasOwnProperty(p)){if("number"==typeof e[p])c="",f>0&&(c+=","),c+='"'+p+'":'+e[p],n.push(c);else if("boolean"==typeof e[p])c="",f>0&&(c+=","),c+='"'+p+'":'+e[p],n.push(c);else if("string"==typeof e[p])c="",f>0&&(c+=","),c+='"'+p+'":"'+e[p]+'"',n.push(c);else if("object"==typeof e[p]){c="";try{f>0&&(c+=","),c+='"'+p+'":'+a(e[p],t+1),n.push(c)}catch(l){continue}}f++}return s+=n.join(""+d)+""+u+"}"}throw"not a json"}t.exports=a},{}],32:[function(require,module,exports){function init(){var parse=function(str){var obj;try{obj=eval("("+str+")")}catch(e){}return obj},stringify=function(e){if(e){var t=formatJSON(e,0);return t}return""};window.JSON||(window.JSON={parse:parse,stringify:stringify})}var formatJSON=require("./formatJSON.js");module.exports=init},{"./formatJSON.js":31}],33:[function(e,t,i){var a={},s={},n=function(e,t){if(s[e])for(var i=0,a=s[e].length;i<a;i++){var n=s[e][i];n(t)}},o=function(e,t){s[e]||(s[e]=[]);for(var i=!1,a=s[e],n=0,o=a.length;n<o;n++)if(a[n]==t){i=!0;break}i||s[e].push(t)},r=function(e,t){if(t&&"function"==typeof t){var i=s[e];if(i&&i.length)for(var a=i.length,n=a-1;n>=0;n--){var o=i[n];if(o==t){i.splice(n,1);break}}}else delete s[e]};a.on=o,a.off=r,a.trigger=n,t.exports=a},{}],34:[function(e,t,i){var a=e("./promise.js"),s={},n={},o=function(e,t){var t=t||new a;if(n[e])return a.when(function(){var t=n[e],i=new a;return setTimeout(function(){i.resolve(t)},0),i});var t=a.when(function(){return $.ajax({url:e,dataType:"text",type:"get"}).success(function(i){t.resolve(i),n[e]=i}).fail(function(e){t.reject(e)}),t});return t};s.load=o;var r=function(){return s};t.exports=r},{"./promise.js":37}],35:[function(e,t,i){t.exports=function(){return function(t){var i=(e("./errorlog.js"),{}),a=$.extend({url:"",data:{}},t),s=new Date;a.success&&(i.successCallback=a.success,delete a.success),a.fail&&(i.failCallback=a.fail,delete a.fail),a.error&&(i.failCallback=a.error,delete a.error);a.url,a.data;return a.success=function(e){new Date,new Date-s;i.successCallback&&i.successCallback(e)},a.error=function(e){i.failCallback&&i.failCallback(e)},$.ajax(a),i.success=function(e){return i.successCallback=e,i},i.fail=function(e){return i.failCallback=e,i},i}}},{"./errorlog.js":30}],36:[function(e,t,i){var a={doc:document,timer:null,oldTitle:"",flashFlag:!1,count:0,msg:"",flash:function(){this.flashFlag?this.clear():this.oldTitle=this.doc.title,this.flashFlag=!0;var e=this;this.timer=setInterval(function(){e.count++,e.count>=30&&(e.count=0,e.clear()),e._flash()},500)},_flash:function(){this.index=this.index?0:1,this.doc.title=this.index?this.msg:this.oldTitle},clear:function(){clearInterval(this.timer),this.flashFlag&&(this.doc.title=this.oldTitle),this.flashFlag=!1}};t.exports=a},{}],37:[function(e,t,i){function a(){var e=[],t=this;this.resolve=function(i){var a=e.shift();a&&a.success&&"function"==typeof a.success&&a.success(i,t)},this.reject=function(i){var a=e.shift();a&&a.fail&&"function"==typeof a.fail&&a.fail(i,t)},this.then=function(i,a){return e.push({success:i,fail:a}),t}}a.when=function(e){return e()},t.exports=a},{}],38:[function(e,t,i){var a={},s=function(){var e="MIICeAIBADANBgkqhkiG9w0BAQEFAASCAmIwggJeAgEAAoGBAJNEbfpifvq6j9oIyA7LVAyvnQyEIvAMCJLAO8+JwycPPV7GzFL73/FLObM4H/Fb5SqNomO2mnGynBroaK7+IWj25TjVa7SolCS9MsPzF9Xe/95faofXMqFDR2KlCI+GVAkhNSYV/shflkeBWuZSbLELHreNd2IcUoGz+O/x/d3jAgMBAAECgYEAj5a9FNFMtfOJpzHAvowKG4RvQHDmD9/rzAqbRrQwD7mQQQTc3Fyx8XdDfzdODetn+qG2oDq/Q/S+uI265ETtFQsIxFo0EAaGbMApUFiX8SYuWeKvejnpv4UJatJXPbPJd0+l7q+fppSHM0LrleYLn+Km5F+bGccz/2aD4Qpyh4ECQQDTSXj/16fbmcAOCxzMGE3ukK/rwaPwxlldRLrAMyBzq/YJUkz6LclnkraMrNEb79Gkn3oW6zjZMho4NG5PHPwRAkEAsm6sYk79OuJPgTgHS4CGjXMbeVfZE9698ZvW+fZlr6Qi009cPD3glak//SE8SpfVxrddGj7RnK7z2k1crFW+swJARNc2hl1UgrdonOq/+judALLBrtXLvYJS0ZG4KzE9TJLlugnHrOfILGff9JvGEg0kSDfxxo/jWNj7M/7ZRguSkQJBAJooThzdW6D9F21vp7XOg/E/SrRKdozZO0e7uT7aZz4ZU9E21lxhpWAICvW6OinEBnkZwIFFVrnE2X94qSFnL0sCQQDKCypbjCQ9NauzeWOLOAbEd6pogORzDxoLE+JfUiw0s8dK7r/3FSKiRbhOQM13S80NoQHoeISmxNvkofLEPXLh",t="";return $.ajax({url:"/v2/chat-web/newwebchat/getParameter.action",data:{},async:!1,type:"GET",success:function(i){var a=new window.JSEncrypt;a.setPublicKey(e),t=a.encryptLong(JSON.stringify(i))},fail:function(e){}}),encodeURIComponent(t)};a.getRsaSign=s,t.exports=a},{}],39:[function(e,t,i){(function(i){var a={},s=e("../util/monitAjax.js")(i),n=function(e){s({type:"post",url:"/v2/chat/user/finishLog.action",dataType:"json",data:e,success:function(e){}})};a.uploadLog=n,t.exports=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/monitAjax.js":35}],40:[function(e,t,i){t.exports={basePath:"//service.bilibili.com/chat/pc"}},{}],41:[function(e,t,i){var a=function(t){var i,a=e("../../../common/initConfig.js")("pc"),s=e("../../../common/mode/mode.js");e("../../../common/socket/heartbeat.js");e("../../../common/util/initJSON.js")();var n,o=e("../../../common/util/listener.js"),r=function(){},l=function(){o.on("system.send",function(e){})},c=function(){i=s(n)},d=function(){r(),l(),c()};a.then(function(e){$(".white-layer").remove(),$(document.body).trigger("core.onload",[{data:e}]),n=e,d(),t.parent&&t.parent!==t&&t.parent.postMessage(JSON.stringify({name:"init"}),"*"),o.trigger("core.onload",[n])})};t.exports=a},{"../../../common/initConfig.js":4,"../../../common/mode/mode.js":17,"../../../common/socket/heartbeat.js":24,"../../../common/util/initJSON.js":32,"../../../common/util/listener.js":33}],42:[function(e,t,i){!function(t){var i=e("./core/core.js")(window,"pc"),a=e("./nesting/nesting.js"),s=e("./listMsg/index.js"),n=e("./sendArea/index.js");e("./util/json.js");var o=function(){},r=function(){window.console||(window.console={log:function(){}}),s(),n($("#footer"),i,window),a()},l=function(){o(),r()};l()}(document.body)},{"./core/core.js":41,"./listMsg/index.js":43,"./nesting/nesting.js":50,"./sendArea/index.js":55,"./util/json.js":66}],43:[function(e,t,i){var a=function(){var t,i,a,s,n,o,r,l,c,d,u,f,p=e("../../../common/util/listener.js"),g=e("../../../common/util/load.js")(),m=(e("../../../common/crypto-js/crypto-js.min.js"),e("../util/qqFace.js")),v=e("../../../common/mode/offlineMessageFilter.js"),h=e("../config/config.json"),y=e("./template.js"),j=e("./theme.js"),T=e("./msgHandler.js"),b=e("../util/datetime.js"),w=e("../../../common/comm.js"),x={},I=60,F=107,k=0,C=0,S=[],A=0,M=0,L="",_=!0,P=function(){0===A&&_?(_=!1,t({type:"post",url:"/v2/chat/user/queryUserCids.action",dataType:"json",data:{uid:i.apiInit.uid,time:i.urlParams.time||0},success:function(e){S=e.cids.reverse(),L=S[A],M=S.length-1,D(L)}})):A>0&&_&&(_=!1,L=S[A],D(L))},D=function(e){if(A<=M){$pulldownLoading.css("display","block"),$pulldownText.css("display","none");var r=o.find(".magBox").eq(0).attr("creattime");Number(k)||r,$(this);f=o.children().eq(0),t({type:"post",url:"/v2/chat/user/queryChatDetailByCid.action",dataType:"json",data:{ukey:i.apiInit.ukey,cid:e,companyId:i.apiInit.pid},success:function(t){t.length>0?(v(t),k=t[0].content.length>0?t[0].content[0].t:+new Date,g.load(h.basePath+"/views/listMsg/historyMsg.html").then(function(e){for(var i="",r=["<a","<img","<frame","<audio","<video","<iframe","<IFRAME","<EMBED","<embed"],l=!1,c=["<script"],d=0;d<t.length;d++){var u=t[d].date;if(u){var p=t[d].content[0].ts;u=b.formatTime(p,s),i+=doT.template(y.msgDate)(u)}for(var g=0;g<t[d].content.length;g++){if(l=!1,9==t[d].content[g].msgType||10==t[d].content[g].msgType){"string"==typeof t[d].content[g].msg&&(t[d].content[g].msg=JSON.parse(t[d].content[g].msg));var m=t[d].content[g].msg;if(m.retCode&&"000000"!=m.retCode)"000002"==m.retCode?t[d].content[g].msg=m.retErrorMsg:"000001"==m.retCode&&(t[d].content[g].msg=doT.template(y.cyclicSessionError)(m));else if("string"==typeof m.inputContentList){var v=m.inputContentList.split(","),h={multiDiaRespInfo:m,contentAry:v,msgId:""};t[d].content[g].msg=doT.template(y.inputContentTMP)(h)}else if("object"==typeof m.inputContentList){for(var v=[],j=[],T=0;T<m.inputContentList.length;T++)for(var I in m.inputContentList[T])j.push(I),v.push(m.inputContentList[T][I]);var h={multiDiaRespInfo:m,titleAry:j,contentAry:v,msgId:""};t[d].content[g].msg=doT.template(y.inputContentTMP_1511)(h)}else switch(m.template){case 0:var h={multiDiaRespInfo:m,msgId:m.msgId,from:"history"};t[d].content[g].msg=doT.template(y.cyclicSessionTMP0)(h);break;case 1:var h={multiDiaRespInfo:m,from:"history"};t[d].content[g].msg=doT.template(y.cyclicSessionTMP1)(h);break;case 2:var h={multiDiaRespInfo:m,from:"history"};t[d].content[g].msg=doT.template(y.cyclicSessionTMP2)(h);break;case 3:var h={multiDiaRespInfo:m};t[d].content[g].msg=doT.template(y.cyclicSessionTMP3)(h);break;case 4:var h={multiDiaRespInfo:m};t[d].content[g].msg=doT.template(y.cyclicSessionTMP4)(h);break;default:t[d].content[g].msg=m.remindQuestion}}for(var T=0;T<r.length;T++)"string"==typeof t[d].content[g].msg&&t[d].content[g].msg.indexOf(r[T])>=0&&(l=!0);if("string"==typeof t[d].content[g].msg&&t[d].content[g].msg.indexOf(c[0])>=0){var F=$("<div></div>").text(t[d].content[g].msg);t[d].content[g].msg=F.html()}"object"!=typeof t[d].content[g].msg&&(t[d].content[g].msg=l?t[d].content[g].msg:w.getNewUrlRegex(t[d].content[g].msg)),t[d].content[g].recallMsg=a.L10040.replace("{0}",t[d].content[g].senderName)}i+=doT.template(e)({data:t[d].content})}i=x.analysis(i),o.find("li:first").before(i);var k=f.offset().top;n.scrollTop(k-n.offset().top-100),$("#cutoff").css("display","none")}),A++):(A++,e=S[A],D(e)),_=!0,$pulldownLoading.css("display","none"),$pulldownText.css("display","block")}})}else $pulldownText.html(s.T0004)},B=function(e){var e=e.data;p.trigger("listMsg.artificial",e),d.attr("src",e.aface),u.html(e.aname),u.attr("title",e.aname),C=1},N=function(){$(this).hasClass("removeVoice")?(l.css("background-position","-581px 0px"),$(this).removeClass("removeVoice"),p.trigger("listMsg.openVoice",!0)):(l.css("background-position","-501px 0px"),$(this).addClass("removeVoice"),p.trigger("listMsg.openVoice",!1))},R=function(){2===i.apiConfig.pageCloseFlag&&(p.trigger("core.sessionclose",999),t({type:"post",url:"/v2/chat-web/user/out.action",dataType:"json",data:{uid:i.apiInit.uid},success:function(e){e.status}}))},O=function(){if(i.urlParams.satDegree_A){var e={from:"close",resultFlag:!0,sourceType:1};p.trigger("listMsg.toEvaluate",e)}else window.parent!==window?(window.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*"),R()):(window.close(),window.location.href="about:blank")},z=function(e){var t=0,i=($(window).height(),$(window).width(),$(".js-mainBox").width(),$(".js-mainBox").height());e&&(t=e.noticeMsgHeight||0);var a=i-I-F-t;n.css("height",a+"px")},E=function(e){"human"===e?C=1:"robot"===e&&(C=0)},H=function(n){i=n[0],t=e("../../../common/util/monitAjax.js")(i),a=i.language.lan,s=i.language.text,document.title=i.apiConfig.companyName,q()},q=function(){j(i),x=m(window,i),z(),T(i,window),d.attr("src",i.apiConfig.robotLogo),u.html(i.apiConfig.robotName),c.html(i.apiConfig.companyName),u.attr("title",i.apiConfig.robotName),c.attr("title",i.apiConfig.companyName)},W=function(){n=$(".js-chatPanel"),o=$(".js-chatPanelList"),r=$(".js-historyTrigger"),$pulldownLoading=$(".js-pulldown-loading"),l=$(".js-zhichiVoice"),c=$(".js-infoBarCompany"),$pulldownText=$(".js-pulldown-text"),d=$(".js-infoBarLogo"),u=$(".js-titleName"),$closeForm=$(".js-closeForm")},U=function(){p.on("core.onload",H),r.on("click",P),p.on("core.transfersuccess",B),l.on("click",N),$closeForm.on("click",O),$(window).resize(function(){z()}),p.on("listMsg.noticeInit",z),$(document.body).on("click",".openEdit",function(){$(this).hasClass("active")?($(this).closest(".leftMsg").find(".editContent").scrollTop(0),$(this).closest(".leftMsg").find(".editContent").removeClass("active"),$(this).removeClass("active"),$(this).find(".texts").text("")):($(this).closest(".leftMsg").find(".editContent").addClass("active"),$(this).addClass("active"),$(this).find(".texts").text(""))})},G=function(){W(),U(),p.on("core.statechange",E)};G()};t.exports=a},{"../../../common/comm.js":1,"../../../common/crypto-js/crypto-js.min.js":3,"../../../common/mode/offlineMessageFilter.js":19,"../../../common/util/listener.js":33,"../../../common/util/load.js":34,"../../../common/util/monitAjax.js":35,"../config/config.json":40,"../util/datetime.js":61,"../util/qqFace.js":72,"./msgHandler.js":44,"./template.js":48,"./theme.js":49}],44:[function(e,t,i){var a=function(t,i){var a,t,s,n,o,r,l,c,d,u,f,p,g,m,v=e("../../../common/util/listener.js"),h=e("../../../common/util/uploadLog.js"),y=e("../../../common/comm.js"),j=e("../util/qqFace.js"),T=(e("../../../common/util/promise.js"),!0),b=e("../../../common/util/errorlog.js"),w=e("../../../common/util/monitAjax.js")(t),x=0,I=e("./template.js"),F=e("../util/datetime.js"),k=e("./noticeMessage.js"),C=e("./pushEvaHandler.js"),S=e("../util/showTip.js"),A=e("../../../common/util/msgReminder.js"),M=e("../sendArea/leaveMessage.js"),L="",_={},P=0,D=!0,B=0,N=!0,R="",O=0,z=!1,E="",H=[],q={},W=0,U=!1,G="",Z=!1,V=!1,J=!0,Q="",K=[],X=t.language.lan,Y=t.language.text,ee=t.apiConfig.userOutFlag,te=t.apiConfig.adminOutFlag,ie=t.urlParams.adminTipWord,ae=60*t.apiConfig.adminTipTime,se=t.apiConfig.accountStatus,ne=!1,oe=!1,re=function(e){"human"==e&&(P=1)},le=function(e){if(!e.originalEvent.data){var t=JSON.parse(e.originalEvent.data);"offlineMessage"==t.name?(0==$(".cutoff").length&&v.trigger("core.onreceive",{type:"human",list:[{type:-110}]}),t.data.type=202,t.data.msg=t.data.content,v.trigger("core.onreceive",{type:"human",list:[t.data]})):"collapse"==t.name?(a=t.name,x=0,$(".cutoff").length>0&&$(".cutoff").remove(),v.trigger("core.onreceive",{type:"human",list:[{type:-110}]})):"expand"==t.name&&(a=t.name,Xe(),0==x?($(".cutoff").remove(),$(".js-unread").hide()):$(".js-unread").show().text(x+Y.T0058))}},ce=function(e){var t=new Date,i=t.getHours()>=10?t.getHours():"0"+t.getHours(),a=t.getMinutes()>=10?t.getMinutes():"0"+t.getMinutes(),s=Y.T0011+i+":"+a,n=d.children().last().prev();if(d&&d.children().length&&n.hasClass("sysData")&&n.find(".msgData").html(s),1===e){var o=doT.template(I.msgDate)(s);d.append(o)}},de=function(e){if("humanOnly"!=e.moduleType||"blacklist"!=e.status){if("system"===e.type){var a=(+new Date,""),s="";if("queue"==e.status)return $(".js-queueing").remove(),s=doT.template(I.systemMsg)(e.data),s=Je(s),L=$(s),d.append(L),7==e.data.status&&setTimeout(function(){t.urlParams.isLeaveCustomSysFlag?i.open(t.urlParams.leaveCustomUrl,"_self"):v.trigger("listMsg.openleaveMsgPage")},5e3),Xe(),ue(),fe(e.data.id),$(".js-moduleSwitch").remove(),d.find(".js-fengefu1").remove(),U=!0,void(R&&$("#"+R).remove());if("kickout"==e.status)return;e.data.id="systemMsg"+ +new Date,2===e.data.status&&(R&&$("#"+R).remove(),R=e.data.id),3==e.data.status?(a=doT.template(I.systemMsg2)(e.data),a=Je(a)):(a=doT.template(I.systemMsg)(e.data),a=Je(a));var n=$(a);d.append(n),"evaluate"!=e.status&&"leaveMsgComplete"!=e.status||setTimeout(function(){fe(e.data.id)},5e3),"transfer"==e.status&&ce(1),Xe()}else if("human"==e.type){var e=e.data;f.attr("src",e.aface),u.html(e.aname),u.attr("title",e.aname),v.trigger("listMsg.artificial",e);var a=doT.template(I.transferSayHello)(e);a=Je(a),t.apiConfig.adminHelloWordFlag&&d.append(a),d.find(".js-SwitchAdminsMsg").remove()}Xe()}},ue=function(){var e=40;$(".js-queueing").css("width",$(".js-chatPanelBody").width()-e+"px")},fe=function(e){$("#"+e).remove()},pe=function(e){t.urlParams.templateId=e,w({url:"/v2/chat/data/invokeOtherByUser.action",dataType:"json",type:"get",data:{uid:t.apiInit.uid,url:"basic-set/getCusMsgTemplateConfig/4",method:"get",param:JSON.stringify({templateId:e})}}).success(function(e){t.apiConfig.msgTxt=e.item.msgTxt,t.urlParams.emailFlag=e.item.emailFlag,t.urlParams.emailShowFlag=e.item.emailShowFlag,t.urlParams.enclosureFlag=e.item.enclosureFlag,t.urlParams.enclosureShowFlag=e.item.enclosureShowFlag,t.urlParams.telFlag=e.item.telFlag,t.urlParams.telShowFlag=e.item.telShowFlag,t.urlParams.ticketShowFlag=e.item.ticketShowFlag,t.urlParams.ticketTypeFlag=e.item.ticketTypeFlag,t.urlParams.ticketTypeId=e.item.ticketTypeId,M(t,1)})},ge=function(e){if(e&&e.length)for(var a=0;a<e.length;a++){var s=e[a].date||"",n="";if(s&&"welcome-sugguestions"!==e[a].answerType){var o=e[a].content[0].ts,r=0;try{r=e[1].content[0].t}catch(l){}s=F.formatTime(o,Y),n+=doT.template(I.msgDate)(s),d.append(n)}"welcome-sugguestions"===e[a].answerType&&(q=e[a],e[a].content[0].answer=e[a].content[0].msg,he(e[a],!1));var c=e[a].content||[];me(c,0,function(){$(".webchat_img_upload")&&$(".webchat_img_upload").parent().parent().parent().addClass("imgMagBox"),$(".js-msgFileIco")&&$(".js-msgFileIco").parent().parent().parent().addClass("fileMagBox")}),B>10&&$(".js-unread").css("display","block").html(B+Y.T0058)}if(0==$(".js-chatPanelList").find(".js-noticeMsg").length){var u=doT.template(I.noticeHtml)({languageText:Y,style:t.apiConfig.announceTopFlag});t.apiConfig.announceTopFlag?(p.append(u),t.apiConfig.announceClickUrl&&t.apiConfig.announceClickFlag&&(p.find(".js-noticeMsg").attr("href",t.apiConfig.announceClickUrl),p.find(".js-openUrl").addClass("openUrlShow"))):setTimeout(function(){$(".js-chatPanelList  > li:first-child").before(u)},10),!t.apiConfig.announceMsgFlag||t.apiInit.multiFlag&&!t.apiConfig.announceTopFlag||setTimeout(function(){
k(t,i)},50)}if(d.append(E),$(".js-changeGroup").click(function(){W++,W>=H.length&&(W=0);var e={list:H[W],isHistory:!1},t=doT.template(I.sugguestionsListMsg)(e);$(".sugguestions-change").html(t)}),t.multiGuideData){var f=doT.template(I.multiGuideHtml)({languageText:Y,robotData:t.apiConfig,multiGuideData:t.multiGuideData});d.append(f)}if(d.append(L),"1"==t.existFlag&&t.apiConfig.ticketShowFlag){var g='<div style="width: 190px;height: 28px;background:rgba(240,244,245,1);border-radius:4px;text-align: center;margin: 0px auto"><p class="sysData js-jumpLeaveMsg" style="color:#8C989B;margin-top:0;text-align: center;line-height: 28px;">'+Y.T0129+""+Y.T0152+'<span class="js-jump" style="color:#4D9DFE;cursor: pointer ">'+Y.T0153+"</span></p></div>";d.append(g),$(".js-jump").on("click",function(){w({type:"post",url:"/v2/chat-web/user/getWsTemplate.action",dataType:"json",data:{uid:t.apiInit.uid,source:0,channelFlag:t.urlParams.channelFlag||""},success:function(e){var t=e||[],a=doT.template(I.groupTemplate)({list:t});layer=$(a),$(".js-mainBox").append(layer),layer.delegate(".js-item","click",function(){layer.remove();var e=$(this).data("id");pe(e)}),layer.delegate(".js-open-url","click",function(e){i.location.href="https://mall.bilibili.com/neul-next/index.html?page=serviceticket_newService"}),layer.find(".js-group-outer").animate({right:"0"}),layer.delegate(".js-cancel-btn,.js-group-layer","click",function(){layer.find(".js-group-outer").animate({right:"-390px"},function(){layer.remove()})})}}),$(this).parent().parent().remove()})}ce(),Xe()},me=function(e,i,a){try{if(i>=e.length)return void(a&&a(i));var s=e[i],n=function(){me(e,i+1,a)};switch(s.senderType){case-1:var o={content:Y.T0059},r=doT.template(I.cutoffMsg)(o);d.append(r),n();break;case 0:var l="";9==s.msgType||10==s.msgType?(s.msg=JSON.parse(s.msg),l=ve(s.msg,s.senderType)):"string"==typeof s.msg&&(l=Re(s.msg));var c={msg:l,t:s.t,dateuid:s.msgId,senderType:s.senderType,from:"initHistory"},r=doT.template(I.rightMsg)(c);d.append(r),n();break;case 1:try{9==s.msgType||10==s.msgType?(s.msg=JSON.parse(s.msg),s.msg=ve(s.msg,s.senderType)):"string"==typeof s.msg&&(s.msg=Re(s.msg));var c={msg:s.msg,aname:s.senderName,t:s.t,languageText:Y,revokeFlag:s.revokeFlag,from:"initHistory"},r=doT.template(I.leftMsg)(c);r=Je(r),d.append(r),n()}catch(u){}break;case 2:try{9==s.msgType||10==s.msgType?(s.msg=JSON.parse(s.msg),s.msg=ve(s.msg,s.senderType)):"string"==typeof s.msg&&(s.msg=Re(s.msg));var c={msg:s.msg,aname:s.senderName,t:s.t,languageText:Y,revokeFlag:s.revokeFlag,from:"initHistory",ticketMsgFlag:s.ticketMsgFlag,msgType:s.msgType},r=doT.template(I.leftMsg)(c);r=Je(r),1==t.apiConfig.adminHelloWordCountRule&&1==t.apiInit.ustatus&&(oe=!0),c.msgType>=0?d.append(r):oe||d.append(r),"offline"===s.msgType&&B++,n()}catch(u){}break;case 3:n();break;default:n()}}catch(u){b.runtimeError(u,"initmessage",s,t)}},ve=function(e,t){var i=e;if(1==t||2==t)if("000000"==i.retCode)if("string"==typeof i.inputContentList){var a=i.inputContentList.split(","),s={multiDiaRespInfo:i,contentAry:a,msgId:e.msgId};e.msg=doT.template(I.inputContentTMP)(s)}else if("object"==typeof i.inputContentList){for(var a=[],n=[],o=0;o<i.inputContentList.length;o++)for(var r in i.inputContentList[o])n.push(r),a.push(i.inputContentList[o][r]);var s={multiDiaRespInfo:i,titleAry:n,contentAry:a,msgId:e.msgId};e.msg=doT.template(I.inputContentTMP_1511)(s)}else if(i.interfaceRetList)switch(i.template){case 0:var s={multiDiaRespInfo:i};e.msg=doT.template(I.cyclicSessionTMP0)(s);break;case 1:var s={multiDiaRespInfo:i};e.msg=doT.template(I.cyclicSessionTMP1)(s);break;case 2:var s={multiDiaRespInfo:i};e.msg=doT.template(I.cyclicSessionTMP2)(s);break;case 3:var s={multiDiaRespInfo:i};e.msg=doT.template(I.cyclicSessionTMP3)(s);break;case 4:var s={multiDiaRespInfo:i};e.msg=doT.template(I.cyclicSessionTMP4)(s);break;default:e.msg=i.remindQuestion}else e.msg=i.remindQuestion||i.answer;else if("000002"==i.retCode)e.msg=i.retErrorMsg;else{var s={multiDiaRespInfo:i};e.msg=doT.template(I.cyclicSessionError)(s)}else switch(i.template){case 0:var s={multiDiaRespInfo:i};e.msg=doT.template(I.cyclicSessionTMP0)(s);break;case 1:var s={multiDiaRespInfo:i};e.msg=doT.template(I.cyclicSessionTMP1)(s);break;case 2:var s={multiDiaRespInfo:i};e.msg=doT.template(I.cyclicSessionTMP2)(s);break;case 3:var s={multiDiaRespInfo:i};e.msg=doT.template(I.cyclicSessionTMP3)(s);break;default:e.msg=i.remindQuestion}return e.msg},he=function(e,i){if("robot"==e.type||i===!0){if(m&&m.play&&N)try{m.play()}catch(a){}if(i===!0)var s=e,n=e.answerType;else{if(e.list)var s=e.list[0],n=e.list[0].answerType;if(e.content)var s=e.content[0],n=e.content[0].answerType}if(contentInner=be(s),contentInner&&0!=contentInner){var o={aname:t.apiConfig.robotName,msg:contentInner,languageText:Y,showArtificial:z,showEvaluate:showEvaluate,wurl:G,wurlOpenStyle:V,robotFlag:s.robotFlag,docId:s.docId,question:s.question,msgId:s.msgId},r=doT.template(I.leftMsg)(o),c=$(r);if(1==t.urlParams.realuateFlag&&s.docId&&c.find(".msgDiv").css("display","block"),n&&c.find(".msgText").find("a").attr("target","_blank"),"welcome-sugguestions"===e.answerType)return void(E=c);if(d.append(c),$(".sugguestions").find("a").attr("target","_self"),s.multiDiaRespInfo){var u=s.multiDiaRespInfo.level;if(Q!=K[u].conversationId)return d.find(".js-tmp"+K[u].conversationId).parents(".msgDiv").addClass("noneClick"),void Xe()}}$(".sugguestions").find("a").attr("target","_self"),te&&clearInterval(l)}else"human"==e.type?(Me(e.list,0,function(){}),A.flash()):b.specialError("ignore message","msgHandler",{data:e,searchFlag:i},t);setTimeout(function(){Xe()},100)},ye=function(e){var t={switchType:"transferType",queueFlag:e.queueFlag,transferType:e.transferType};v.trigger("listMsg.transTypeArtificial",t)},je=function(e){if(1==e.transferFlag||3==e.transferFlag){var i={switchType:"keySwitch",groupId:e.groupId,transferFlag:e.transferFlag,keyword:e.keyword,keywordId:e.keywordId,queueFlag:e.queueFlag};v.trigger("listMsg.keyWordArtificial",i)}else if(2==e.transferFlag&&!t.urlParams.groupId){var i={aname:t.apiConfig.robotName,list:e.groupList,tipsMessage:e.tipsMessage,transferFlag:e.transferFlag,keyword:encodeURIComponent(e.keyword),keywordId:e.keywordId},a=doT.template(I.keySwitchAdmins)(i),s=$(a);d.append(s)}},Te=function(){var e=$(this).attr("data-id"),t=$(this).attr("keyword"),i=$(this).attr("keywordId"),a={switchType:"keySwitch",groupId:e,keyword:decodeURIComponent(t),keywordId:i,switchTypeStyle:"click",queueFlag:2};v.trigger("listMsg.keyWordArtificial",a)},be=function(e){var i=e.answer,a=e.answerType,s=["1511","1522","1523","15239","1524"],n=!1;if((e.sugguestions||[]).length>0||3==e.senderType){for(var o=0;o<s.length;o++)s[o]==a&&(n=!0);n||(i=Ae(e,!1))}else i=Re(i);if(0===e.ustatus)return!1;switch(z=!1,showEvaluate=!1,a){case"1":"1"!==t.urlParams.manualTypeObj.direct||U||1==t.apiConfig.type||(z=!0),1==t.urlParams.realuateFlag&&(showEvaluate=!0);break;case"2":"1"!==t.urlParams.manualTypeObj.under||U||1==t.apiConfig.type||(z=!0);break;case"3":1===t.urlParams.chatConnectButton&&(O++,O==t.urlParams.manualBtnCount&&v.trigger("listMsg.showChatSwitch")),"1"!==t.urlParams.manualTypeObj.unknow||U||1==t.apiConfig.type||(z=!0);break;case"4":"1"!==t.urlParams.manualTypeObj.guide||U||1==t.apiConfig.type||(z=!0);break;case 5:break;case 6:break;case 7:break;case 8:break;case"9":"1"!==t.urlParams.manualTypeObj.direct||U||1==t.apiConfig.type||(z=!0),1==t.urlParams.realuateFlag&&(showEvaluate=!0);break;case 10:break;case"11":"1"!==t.urlParams.manualTypeObj.direct||U||1==t.apiConfig.type||(z=!0),1==t.urlParams.realuateFlag&&(showEvaluate=!0);break;case"12":"1"!==t.urlParams.manualTypeObj.direct||U||1==t.apiConfig.type||(z=!0),1==t.urlParams.realuateFlag&&(showEvaluate=!0);break;case"14":1==t.urlParams.realuateFlag&&(showEvaluate=!0);break;case"15":case"151":case"1521":case"153":if("000000"==e.multiDiaRespInfo.retCode){var r=e.multiDiaRespInfo;if(K[r.level]=r,Q=r.conversationId,r.endFlag&&(Q=""),r.inputContentList){var l=r.inputContentList.split(",");l.length>9&&(l=l.slice(0,9));var c={multiDiaRespInfo:r,contentAry:l,msgId:e.msgId};i=doT.template(I.inputContentTMP)(c)}else if(r.interfaceRetList){if(0==r.template){var c={multiDiaRespInfo:r,msgId:e.msgId};i=doT.template(I.cyclicSessionTMP0)(c)}else if(1==r.template){var c={multiDiaRespInfo:r,msgId:e.msgId};i=doT.template(I.cyclicSessionTMP1)(c)}else if(2==r.template){var c={multiDiaRespInfo:r,msgId:e.msgId};i=doT.template(I.cyclicSessionTMP2)(c)}else if(3==r.template){var c={multiDiaRespInfo:r,msgId:e.msgId};i=doT.template(I.cyclicSessionTMP3)(c)}else if(4==r.template){var c={multiDiaRespInfo:r,msgId:e.msgId};i=doT.template(I.cyclicSessionTMP4)(c)}}else i=e.multiDiaRespInfo.remindQuestion;if(1==t.urlParams.realuateFlag)for(var d=["1521","1522","1523","15239","1524","153"],o=0;o<d.length;o++)e.answerType==d[o]&&(showEvaluate=!0)}else if("000002"==e.multiDiaRespInfo.retCode){var r=e.multiDiaRespInfo;K[r.level]=r,Q=r.conversationId,r.endFlag&&(Q=""),i=e.multiDiaRespInfo.retErrorMsg}else{var r=e.multiDiaRespInfo;K[r.level]=r,Q=r.conversationId,r.endFlag&&(Q=""),i=doT.template(I.cyclicSessionError)(e)}break;case"1511":var r=e.multiDiaRespInfo;Q=r.conversationId,K[r.level]=r,r.endFlag&&(Q="");var l=[],u=[],f={};if("000000"==r.retCode){for(var o=0;o<r.inputContentList.length;o++)for(var p in r.inputContentList[o])u.push(p),l.push(r.inputContentList[o][p]);f={multiDiaRespInfo:r,titleAry:u,contentAry:l,msgId:e.msgId}}else f={multiDiaRespInfo:r};i=doT.template(I.inputContentTMP_1511)(f);break;case"1522":case"1523":case"15239":case"1524":if(1==t.urlParams.realuateFlag)for(var d=["1521","1522","1523","15239","1524","153"],o=0;o<d.length;o++)e.answerType==d[o]&&(showEvaluate=!0);var r=e.multiDiaRespInfo;Q=r.conversationId,K[r.level]=r,e.multiDiaRespInfo.endFlag&&(Q=""),i=we(e)}return i},we=function(e){var t=e.sugguestions||e.list,i="";i=e.answer||e.multiDiaRespInfo.answer||"";var a={list:t,answerStrip:e.multiDiaRespInfo.answerStrip||e.answerStrip||"",stripe:e.stripe||"",answer:i},s=doT.template(I.multiListSugguestionsMsg)(a);return s},xe=function(){var e=$(this).attr("conversationId"),t=parseInt($(this).attr("page")),i=91,a=$(this).parent().find(".js-interfaceRetList"+e),s=a.find("li").length,n=0;if(t<=Math.floor(s/3)-1)n=t*(3*i),t++;else{var o=i*(s%3);0==o?(n=0,t=1):(n=(t-1)*(3*i)+o,t=0)}$(this).attr("page",t),a.stop(!0).animate({"margin-top":-n},500)},Ie=function(){var e=parseInt($(this).attr("page")),t=$(this).parent().find(".js-tmp2List li"),i=t.length;if(i>3*e){e++,$(this).attr("page",e);for(var a=3*(e-1);a<3*e;a++){if(a>i-1)return $(this).find("span").html(""),void $(this).find("i").addClass("pull");a==i-1&&($(this).find("span").html(""),$(this).find("i").addClass("pull")),t.eq(a).removeClass("multiHide")}}else{$(this).find("span").html(""),$(this).find("i").removeClass("pull");for(var a=3;a<i;a++)t.eq(a).addClass("multiHide");$(this).attr("page",1)}},Fe=function(){var e=parseInt($(this).attr("page")),t=$(this).parent().find(".js-tmp1List li"),i=t.length;if(i>9*e){e++,$(this).attr("page",e);for(var a=9*(e-1);a<9*e;a++){if(a>i-1)return $(this).find("span").html(""),void $(this).find("i").addClass("pull");t.eq(a).removeClass("multiHide")}}else{$(this).find("span").html(""),$(this).find("i").removeClass("pull");for(var a=9;a<i;a++)t.eq(a).addClass("multiHide");$(this).attr("page",1)}},ke=function(){try{var e=$(this).attr("level"),i=$(this).attr("data-index");$(this).attr("conversationId");if(!K.length)return;var a=K[e],o=a.interfaceRetList[i],r=a.outPutParamList,l=a.template,c={},d=[],u=a.conversationId;if(Q!=u)return;d.push(o),c={interfaceRetList:d,template:l},r=r.split("#");for(var f={},p=0;p<r.length;p++)f[r[p]]=o[r[p]];f.level=K[a.level].level,f.conversationId=K[a.level].conversationId;var g="";0==l?g=0==P?'<div class="tmp0InnerList">'+$(this).html()+"</div>":c.interfaceRetList[0].title:1==l?(g=$(this).html(),c=$(this).html()):2==l&&(g=0==P?'<div class="tmp2InnerList">'+$(this).html()+"</div>":c.interfaceRetList[0].title),v.trigger("sendArea.send",[{answer:g,requestText:f,multiDiaQuestion:c,uid:s,cid:n,sysNum:t.sysNum,date:+new Date,questionFlag:2,source:0,robotFlag:t.urlParams.robotFlag||"",lanFlag:t.urlParams.lanFlag||0,currentStatus:0==P?"robot":"human"}])}catch(m){}},Ce=function(){try{if(!K.length)return;var e={},i=($(this).attr("data-index"),$(this).text()),a=$(this).attr("level"),o=K[a].outPutParamList;$(this).attr("conversationId");if(e.level=K[a].level,e.conversationId=K[a].conversationId,e[o]=i,Q!=K[a].conversationId)return;v.trigger("sendArea.send",[{answer:i,requestText:e,multiDiaQuestion:i,uid:s,cid:n,sysNum:t.sysNum,date:+new Date,questionFlag:2,source:0,robotFlag:t.urlParams.robotFlag||"",lanFlag:t.urlParams.lanFlag||0,currentStatus:0==P?"robot":"human"}])}catch(r){}},Se=function(){try{if(!K.length)return;var e={},i=$(this).attr("title"),a=$(this).attr("content"),o=$(this).attr("level"),r=(K[o].remindQuestion,$(this).attr("conversationId"),i+""+a);if(e.level=K[o].level,e.conversationId=K[o].conversationId,e[i]=a,Q!=K[o].conversationId)return;v.trigger("sendArea.send",[{answer:r,requestText:e,multiDiaQuestion:r,uid:s,cid:n,sysNum:t.sysNum,date:+new Date,questionFlag:2,source:0,robotFlag:t.urlParams.robotFlag||"",lanFlag:t.urlParams.lanFlag||0,currentStatus:0==P?"robot":"human"}])}catch(l){}},Ae=function(e,i){if(e){if(e.list){if(t.apiConfig.guideGroupFlag&&t.apiConfig.guideGroupNum!==-1){for(var a=e.list,s=JSON.parse(JSON.stringify(a)),n=s.length,o=t.apiConfig.guideGroupNum,r=n%o===0?n/o:Math.floor(n/o+1),l=0;l<r;l++){var c=s.slice(l*o,l*o+o);H.push(c)}var d="";e.answer&&(d="[object Object]"==Object.prototype.toString.call(e.answer)?e.answer.msg:e.answer);var u={list:H[W],isHistory:i,stripe:e.stripe,answer:d,count:t.apiConfig.guideGroupFlag},f=doT.template(I.listSugguestionsMsgChange)(u);return f}var a=e.list,d="";e.answer&&(d="[object Object]"==Object.prototype.toString.call(e.answer)?e.answer.msg:e.answer);var u={list:a,isHistory:i,stripe:e.stripe,answer:d},f=doT.template(I.listSugguestionsMsgChange)(u);return f}if(e.sugguestions){var a=e.sugguestions,d="";e.answer&&(d="[object Object]"==Object.prototype.toString.call(e.answer)?e.answer.msg:e.answer);var u={list:a,isHistory:i,stripe:e.stripe,answer:d},f=doT.template(I.listSugguestionsMsg)(u);return f}}return X.L10032},$e=function(){},Me=function(e,s,n){if(s>=e.length)return void(n&&n(s));var r=e[s],c=function(){Me(e,s+1,n)};switch(r.type){case 200:r.serviceInfo.serviceOutDoc&&(ie=r.serviceInfo.serviceOutDoc),r.serviceInfo.serviceOutTime&&r.serviceInfo.serviceOutDoc&&(ae=60*r.serviceInfo.serviceOutTime);case 201:if(t.urlParams.msgflag)var p=r.queueDoc;else var p=r.queueDoc+X.L10039;var g={id:r.msgId,content:p},y=doT.template(I.systemqueue)(g);$(".js-queueing").html(y),ue(),c();break;case 202:"collapse"==a&&x++;var j=Re(r.content);j.indexOf("")==-1||0!=se&&1!=se||(Z=!0);var g={msg:j,msgId:r.msgId,aname:r.aname,languageText:Y,language:X,revokeFlag:r.revokeFlag,dangerWarnFlag:Z},y=doT.template(I.leftMsg)(g),b=$(y);if(1==t.urlParams.realuateFlag&&r.docId&&b.find(".msgDiv").css("display","block"),d.append(b),Z=!1,$("#js-inputIng").removeClass("inputIngActive"),te&&clearInterval(l),ee&&Ee(),(document.hidden||!T)&&N&&m&&m.play)try{m.play()}catch(w){}c();break;case 204:r.logMsg="pc===msgHandler.js========204",h.uploadLog(r);var y="";i.parent!==i&&i.parent.postMessage(JSON.stringify({name:"closeSession",data:r,status:r.status}),"*"),D=!1,c();break;case 205:clearInterval(o),r.content=Y.T0119,$("#js-inputIng").html(r.content).addClass("inputIngActive"),o=setTimeout(function(){$("#js-inputIng").removeClass("inputIngActive")},5e3),c();break;case 206:var j=Re(r.content),g={msg:j,aname:u.html(),languageText:Y},y=doT.template(I.leftMsg)(g);d.append(y),$("#js-inputIng").removeClass("inputIngActive"),c();break;case 210:f.attr("src",r.face),u.html(r.name),u.attr("title",r.name),v.trigger("listMsg.artificial",r),r.serviceInfo.serviceOutDoc&&(ie=r.serviceInfo.serviceOutDoc),r.serviceInfo.serviceOutTime&&r.serviceInfo.serviceOutDoc&&(ae=60*r.serviceInfo.serviceOutTime),c();break;case-110:var y=doT.template(I.cutoffMsg)({content:Y.T0059});d.append(y),c();break;case 209:C(t,i,r),c();break;case 211:var F=X.L10040.replace("{0}",r.adminName),g={tips:F},y=doT.template(I.recallMsg)(g);d.find('[data-msg-id="'+r.revokeMsgId+'"]').html(y),c();break;default:c()}Xe()},Le=function(e){var t=e.percentage;$("#"+e.token).find(".js-processSpan").css("width",t+"%")},_e=function(e){var t="fileOther";switch(e.filetype){case"rar":t="fileRar";break;case"txt":t="fileTxt";break;case"doc":t="fileDoc";break;case"pdf":t="filePdf";break;case"ppt":t="filePpt";break;case"xls":t="fileXls";break;default:t="fileOther"}if(e.browserVersion&&"ie-"===e.browserVersion)var i={filename:e.filename+e.extension,filetype:e.filetype,filesize:e.filesize,t:e.date,dateuid:e.token,fileIcoClass:t,source:"uploadFile"};else var i={filename:e.filename+e.extension,filetype:e.filetype,filesize:e.filesize||"",t:e.date,dateuid:e.token,fileIcoClass:t,source:"uploadFile"};var a=doT.template(I.rightMsg)(i),s=$(a);d.append(s),e.browserVersion&&"ie-"===e.browserVersion?(s.find(".js-uploadFileProcess").remove(),s.find(".js-filecancel").remove(),s.find(".js-fileSize").remove(),s.find(".js-sizeAfter").html("...")):s.delegate("#filecancel"+e.token,"click",function(){v.trigger("listMsg.closeUploadFile","cancel"),s.find(".js-uploadFileProcess").remove(),s.find(".js-filecancel").remove(),s.find(".js-filecanceled").css("display","block")}),Xe()},Pe=function(e){if(e.browserVersion&&"ie-"===e.browserVersion)var t={msg:'<img  class="webchat_img_upload js-zhichiMsgReUpload" src="img/upImgLoad.png"/>',t:e.date,dateuid:e.token,source:"uploadImg"};else var t={msg:'<img  class="webchat_img_upload js-zhichiMsgReUpload" src="'+e.result+'"/>',t:e.date,dateuid:e.token,source:"uploadImg"};var i=doT.template(I.rightMsg)(t),a=$(i);d.append(a);var s=$("#"+e.token).find(".js-uploadImgLayer").height();$("#"+e.token).find(".js-cancelUploadImg").css("margin-top",(s-60)/2+"px"),a.delegate("#imgCancel"+e.token,"click",function(){v.trigger("listMsg.closeUploadImg"),$("#"+e.token).remove()}),Xe()},De=function(e){"ie-"===e.browserVersion?($("#"+e.dateuid).find(".js-sizeAfter").remove(),$("#"+e.dateuid).find(".js-filefail").css("display","block")):($("#"+e.dateuid).find(".js-uploadFileProcess").remove(),$("#"+e.dateuid).find(".js-filecancel").remove(),$("#"+e.dateuid).find(".js-filefail").css("display","block"))},Be=function(e){A.clear(),e=e[0];var t=Re(e.answer);e.dateuid||(e.dateuid=e.uid+ +new Date);var i=e.dateuid,a={msg:t,dateuid:i};if("image"===e.msgSendType)$("#"+i).find(".msgText").html(e.answer),$("#"+i).find(".js-uploadImgLayer").remove(),$("#msgStatus"+i).remove();else if("file"===e.msgSendType)$("#"+i).find(".js-filecancel").remove(),$("#"+i).find(".js-uploadFileProcess").remove(),$("#"+i).find(".js-filedownload").css("display","inline-block").attr("href",e.fileurl);else if("ie-image"===e.msgSendType)$("#"+i).find(".js-zhichiMsgReUpload").attr("src",e.fileurl),$("#"+i).find(".js-uploadImgLayer").remove();else if("ie-file"===e.msgSendType)$("#"+i).find(".js-sizeAfter").html("");else{var s=doT.template(I.rightMsg)(a);d.append(s),$("#msgStatus"+i).addClass("msgsending")}ee&&clearInterval(r),te&&He(),e.image===!0?setTimeout(function(){Xe()},500):Xe()},Ne=function(e){var t={msg:e.answer,leaveMsgFlag:1},i=doT.template(I.rightMsg)(t);d.append(i),Xe()},Re=function(e){var t=["<a","<img","<frame","<audio","<video","<iframe","<IFRAME","<EMBED","<embed"],i=!1;if("string"==typeof e){var a=["<script"];if(e.indexOf(a[0])>=0){var s=$("<div></div>").text(e);e=s.html()}for(var n=0;n<t.length;n++)e.indexOf(t[n])>=0&&(i=!0);return e=i?e:y.getNewUrlRegex(e),e=_.analysis(e)}},Oe=function(e){"success"===e.result?$("#msgStatus"+e.msgId).remove():"ImgSendFail"==e.result?$("#msgStatus"+e.msgId).addClass("msgsendError js-ImgSendFail"):$("#msgStatus"+e.msgId).addClass("msgsendError")},ze=function(){A.clear();var e=$(this).attr("id"),t=$("#"+e).parent().find(".msgText").html();if($("#"+e).parent().parent().remove(),e=e.substr(9,e.length),$(this).hasClass("js-ImgSendFail")){var i=$(this).parent().find(".js-zhichiMsgReUpload").attr("src");return void v.trigger("sendArea.createUploadImg",{result:i,date:+new Date,token:e})}v.trigger("sendArea.send",[{answer:t,uid:s,cid:n,dateuid:e,currentStatus:0==P?"robot":"human",date:+new Date,token:e,sendAgain:!0}]),ee&&clearInterval(r),te&&He()},Ee=function(){var e=t.urlParams.userTipWord,i=60*t.apiConfig.userTipTime,a=0;clearInterval(r),r=setInterval(function(){if(D){if(a+=1,i===a){e=Je(e);var t=[{type:206,content:e}];Me(t,0,function(){}),Xe()}}else clearInterval(r)},1e3)},He=function(){if(1===P&&!ne){var e=0;clearInterval(l),t.apiConfig.serviceOutCountRule&&(ne=!0),l=setInterval(function(){if(D){if(e+=1,ae===e){ie=Je(ie);var t=[{type:206,content:ie}];Me(t,0,function(){}),Xe()}}else clearInterval(l)},1e3)}},qe=function(){var e=$(this).attr("data-docid")||"",t=$(this).html();if(J){J=!1;var i=s+ +new Date;v.trigger("sendArea.send",[{requestText:e,answer:t,uid:s,cid:n,dateuid:i,requestType:"question",questionFlag:1,date:+new Date,currentStatus:0==P?"robot":"human"}]),$("#msgStatus"+i).removeClass("msgsending"),setTimeout(function(){J=!0},1e3)}},We=function(){var e=($(this).attr("data-docid")||"",$(this).attr("data-num")),i=[{question:e,answer:e,sysNum:t.sysNum,uid:s,cid:n,currentStatus:0==P?"robot":"human",source:t.userInfo.source,lanFlag:t.urlParams.lanFlag||0,robotFlag:t.urlParams.robotFlag||"",questionFlag:0}];v.trigger("sendArea.send",i)},Ue=function(){},Ge=function(e){switch(h.uploadLog({logMsg:"pc===msgHandler.js===endSessionHandler",logSessionCloseType:e}),e){case-3:u.attr("title","").html(t.apiConfig.robotName),U=!0;break;case-1:if(t.urlParams.msgflag)var i=t.urlParams.adminNonelineTitle;else var i=t.urlParams.adminNonelineTitle+t.apiConfig.leaveMsg;var a={type:"system",status:"offline",data:{content:i}};t.apiConfig.adminNoneLineFlag&&de(a);break;case-2:u.attr("title","").html(X.L10026),f.attr("src","img/nolink.png"),1===t.apiConfig.sideBarStatus&&($(".js-barRobotName").html(X.L10026),$(".js-barHeadImg").attr("src","img/nolink.png")),U=!0;break;case-4:var a={type:"system",status:"offline",data:{content:t.urlParams.adminNonelineTitle}};t.apiConfig.adminNoneLineFlag&&de(a);break;case 2:case 3:if(t.apiConfig.serviceEndPushFlag){var a={type:"system",status:"offline",data:{content:t.urlParams.serviceEndPushMsg.replace("##",u.html())}};de(a)}break;case 5:var a={type:"system",status:"offline",data:{content:""}};de(a);break;case 6:var a={type:"system",status:"offline",data:{content:X.L10030}};de(a);break;case 1:var s="";s=""===u.html()?t.urlParams.serviceEndPushMsg.replace("##",""):t.urlParams.serviceEndPushMsg.replace("##","");var n={content:s};_html=doT.template(I.systemMsg)(n),t.apiConfig.serviceEndPushFlag&&d.append(_html);break;case 4:var o=Je(t.apiConfig.userOutWord),n=[{type:206,content:o,aname:u.html()}];Me(n,0,function(){});case 7:break;case 8:var a={type:"system",status:"offline",data:{content:X.L10031.replace("{0}",u.html())}};de(a)}},Ze=function(e){G=e.wurl,V=e.wurlOpenStyle},Ve=function(){$(".js-moduleSwitch").remove()},Je=function(e){return e+="",e.replace(/target=\"_self\"/g,'target="_blank"')},Qe=function(e){"transfer"===e.status&&($(".js-queueing").remove(),clearInterval(r),$(".js-switchRobot").remove())},Ke=function(){var e=$(this),t=e.attr("docId"),i=e.attr("robotFlag"),a=e.attr("question"),o=e.attr("status"),r=e.attr("msgId");w({type:"post",url:"/v2/chat/user/rbAnswerComment.action",dataType:"json",data:{uid:s,cid:n,docId:t,msgId:r,docName:a,status:o,robotFlag:i},success:function(t){if(t.ustatus!==-1&&1!==t.ustatus){if(0===t.ustatus){var i=Y.T0072;return void S.show(i)}var i=Y.T0073;return void S.show(i)}if(1==o)var i=Y.T0070;else var i=Y.T0071;S.show(i),e.hide().siblings(".js-evaback").show(),1==o?(e.siblings(".js-okBack").addClass("yesBack"),e.siblings(".js-noBack").addClass("no2Back")):(e.siblings(".js-okBack").addClass("yes2Back"),e.siblings(".js-noBack").addClass("noBack")),e.siblings(".js-msgEvaluate").remove()}})},Xe=function(){try{var e=document.getElementById("chatPanel");e.scrollTop=e.scrollHeight}catch(t){return""}},Ye=function(){var e=(document.getElementById("chatPanel"),$(".cutoff")),t=$(".js-chatPanel"),i=e.parent(),a=e.offset().top-i.offset().top;t.animate({scrollTop:a-25},300)},et=function(){$(".js-chatSwitch").hide(),$(".js-fengefu1").hide(),$(".js-manual-remove").remove();for(var e=$(".js-msgBottomArea").length,t=0;t<e;t++)if(!$($(".js-msgBottomArea")[t]).attr("showEvaluate")){$(".js-msgBottomArea").remove();break}},tt=function(e){e.data.serviceOutDoc&&(ie=e.data.serviceOutDoc),e.data.serviceOutTime&&e.data.serviceOutDoc&&(ae=60*e.data.serviceOutTime),$(".js-switchRobot").remove()},it=function(){_=j(i,t),S=S(t)},at=function(){var e=$(this).attr("data-src");$("body").append('<div class="videoLayer js-videoLayer"><span class="videoClose"></span><div class="blackBG"><video class="bigVideo js-bigVideo" src="'+e+'" autoplay loop></video></div></div>'),$(".js-videoLayer").animate({opacity:"0.98"},800)},st=function(e){$(".js-videoLayer").animate({opacity:"0"},300,function(){$(".js-videoLayer").remove()})},nt=function(){c=$(".js-chatPanel"),d=$(".js-chatPanelList"),$msgStatus=$(".js-msgStatus"),u=$(".js-titleName"),f=$(".js-infoBarLogo"),p=$(".js-header"),g=$(".js-queueing"),m=document.getElementById("newMsgAudio")},ot=function(){v.on("core.initsession",ge),v.on("core.onreceive",he),v.on("core.keySwitchAdmin",je),v.on("core.transTypeSwitchAdmin",ye),v.on("sendArea.send",Be),v.on("sendArea.sendLeaveMsg",Ne),$(i).on("message",le),v.on("core.msgresult",Oe),v.on("sendArea.msgresult",Oe),v.on("core.statechange",re),v.on("core.sessionclose",Ge),v.on("core.system",de),v.on("core.system_pc",$e),v.on("sendArea.sendAreaSystemMsg",de),v.on("sendArea.robotOverTimeHandler",Ue),v.on("listMsg.openVoice",function(e){N=e}),v.on("listMsg.scrollToBottom",Xe),v.on("sendArea.wurlHandler",Ze),v.on("sendArea.revmoveChatSwitch",Ve),v.on("sendArea.createUploadFile",_e),v.on("sendArea.uploadFileProcess",Le),v.on("sendArea.createUploadImg",Pe),v.on("sendArea.uploadFileFail",De),v.on("sendArea.hideMsgBotBtn",et),v.on("core.system",Qe),v.on("core.transfersuccess",tt),d.delegate("img","click",function(){var e=$(this).attr("src"),t=$(this).attr("noJump");e.indexOf("data:")>=0||t||i.open(e)}),$(document.body).delegate(".js-unread","click",function(){Ye(),$(".js-unread").css("display","none")}),$(i).resize(function(){ue()}),d.delegate(".js-answerBtn","click",qe),d.delegate(".js-multiAnswerBtn","click",We),d.delegate(".js-msgStatus","click",ze),d.delegate(".js-msgEvaluate","click",Ke),d.delegate(".js-tmpInnerList","click",ke),d.delegate(".js-inputContent","click",Ce),d.delegate(".js-inputContent_1511","click",Se),d.delegate(".js-tranMultiGroup","click",xe),d.delegate(".js-tmp2MultiMore","click",Ie),d.delegate(".js-tmp1MultiMore","click",Fe),d.delegate(".js-keySwitchAdmin","click",Te),$("body").delegate(".js_webchat_video","click",at),$("body").delegate(".js-videoLayer","click",st),$("body").delegate(".js-bigVideo","click",function(e){e.stopPropagation()}),i.onfocus=function(){T=!0},i.onblur=function(){T=!1},c.on("scroll",function(){var e=c.scrollTop(),t=$(".cutoff"),i=($(".js-chatPanel"),t.parent());if(!(t.length<=0)){var a=t.offset().top-i.offset().top;e<a&&$(".js-unread").css("display","none")}})},rt=function(){s=t.apiInit.uid,n=t.apiInit.cid,nt(),it(),ot()};rt()};t.exports=a},{"../../../common/comm.js":1,"../../../common/util/errorlog.js":30,"../../../common/util/listener.js":33,"../../../common/util/monitAjax.js":35,"../../../common/util/msgReminder.js":36,"../../../common/util/promise.js":37,"../../../common/util/uploadLog.js":39,"../sendArea/leaveMessage.js":57,"../util/datetime.js":61,"../util/qqFace.js":72,"../util/showTip.js":73,"./noticeMessage.js":45,"./pushEvaHandler.js":46,"./template.js":48}],45:[function(e,t,i){var a=function(t,i){var a,s,n,o,r=e("../../../common/util/listener.js"),l=(e("./template.js"),t.language.lan,t.language.text),c=t.apiConfig.announceTopFlag,d=function(){s.css("display","block"),n.append(t.apiConfig.announceMsg),n.find("a").attr("target","_blank"),n.height()>114&&(n.addClass("noticeInner-ellipsis-5"),o.css("display","block"),s.css("padding-bottom","30px"))},u=function(){var e=40,t=$(".js-chatPanelBody").width()-e;s.css("width",t+"px"),n.css("width",t+"px");var i=40;c&&($(".js-chatPanelBody").css("padding-top",i),n.css("overflow","hidden")),r.trigger("listMsg.noticeInit",{noticeMsgHeight:i})},f=function(){o.hasClass("openActive")?(o.removeClass("openActive").addClass("closeActive"),o.html(l.T0069),n.removeClass("noticeInner-ellipsis-5")):(o.addClass("openActive").removeClass("closeActive"),o.html(l.T0068),n.addClass("noticeInner-ellipsis-5"))},p=function(){},g=function(){$mainBox=$(".js-mainBox"),a=$mainBox.find(".js-header"),s=$mainBox.find(".js-noticeMsg"),n=$mainBox.find(".js-noticeInner"),o=$mainBox.find(".js-openNotice")},m=function(){c&&$(i).resize(function(){u()}),o.on("click",f),r.on("listMsg.noticeToTop",p),r.on("listMsg.sideBarAfterNotice",u)},v=function(){g(),m(),d(),c&&u()};v()};t.exports=a},{"../../../common/util/listener.js":33,"./template.js":48}],46:[function(e,t,i){var a=function(t,i,a){var s,n=e("../../../common/util/listener.js"),o=e("./template.js"),r=e("../util/showTip.js"),l=!0,c=0,d={},u=1,f=e("../../../common/util/monitAjax.js")(t),p=t.language.lan,g=t.language.text,m=t.userInfo.color?t.userInfo.color:t.apiConfig.color,v=function(){$aLi=s.find(".isSatisfaction .operateTypeBtn p");for(var e=0,t=1;t<=$aLi.length;t++)$aLi[t-1].index=t,$($aLi[t-1]).bind("click",function(){switch(e=this.index){case 2:c=1,y();break;case 1:c=5,j()}s.find(".js-commit").css({"background-color":m,color:"#fff"})})},h=function(){s.find(".isSatisfaction .operateTypeBtn p").unbind()},y=function(){b()},j=function(){l&&(l=!1,1!=d[0].isQuestionFlag&&(u=-1),f({type:"post",url:"/v2/chat/user/comment.action",dataType:"json",data:{cid:t.apiInit.cid,visitorId:t.apiInit.uid,score:5,tag:"",remark:"",commentType:0,type:1,solved:u},success:function(e){1===e.status?(h(),showTipObj.show(g.T0032),s.undelegate(),s.find(".js-moregood").html(g.T0025),1==u?(s.find(".isSolve .js-unSolved").removeClass("unsolveActive"),s.find(".isSolve .js-unSolved").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".isSolve .js-solved").css({background:m,border:"1px solid "+m}),s.find(".isSolve .js-solved").removeClass("defaultSolveActive").addClass("solveActive")):0==u&&(s.find(".isSolve .js-solved").removeClass("solveActive"),s.find(".isSolve .js-solved").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".isSolve .js-unSolved").addClass("unsolveActive"),s.find(".isSolve .js-unSolved").css({background:m,border:"1px solid "+m}))):showTipObj.show(g.T0033)},error:function(){showTipObj.show(g.T0033)}})),setTimeout(function(){l=!0},4e3)},T=function(){v()},b=function(){var e=0;e=s.find(".isSolve .js-solved").hasClass("solveActive")?1:s.find(".isSolve .js-unSolved").hasClass("unsolveActive")?2:0;var t={from:"push",score:1,resultFlag:!1,sourceType:0,commentType:0,solveActive:e};n.trigger("listMsg.toEvaluate",t)},w=function(e){$aLi=s.find(".isSatisfaction .operateTypeBtn p");var t=e.score,i=e.solved;1==i?(s.find(".isSolve .js-unSolved").removeClass("unsolveActive"),s.find(".isSolve .js-unSolved").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".isSolve .js-solved").css({background:m,border:"1px solid "+m}),s.find(".isSolve .js-solved").removeClass("defaultSolveActive").addClass("solveActive")):0==i&&(s.find(".isSolve .js-solved").removeClass("solveActive"),s.find(".isSolve .js-solved").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".isSolve .js-unSolved").addClass("unsolveActive"),s.find(".isSolve .js-unSolved").css({
background:m,border:"1px solid "+m})),5==t?(s.find(".isSatisfaction .js-unSolved").removeClass("unsolveActive"),s.find(".isSatisfaction .js-unSolved").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".isSatisfaction .js-solved").css({background:m,border:"1px solid "+m}),s.find(".isSatisfaction .js-solved").removeClass("defaultSolveActive").addClass("solveActive")):1==t&&(s.find(".isSatisfaction .js-solved").removeClass("solveActive"),s.find(".isSatisfaction .js-solved").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".isSatisfaction .js-unSolved").addClass("unsolveActive"),s.find(".isSatisfaction .js-unSolved").css({background:m,border:"1px solid "+m})),s.undelegate(),s.find(".js-moregood").html(g.T0025)},x=function(){$mainBox=$(".js-mainBox"),$chatPanelList=$(".js-chatPanelList")},I=function(){s.delegate(".js-commit","click",j),n.on("listMsg.closePushEva",h),n.on("sendArea.toPushEav",w),n.on("sendArea.reTopushEav",T),s.delegate(".isSolve .js-solved","click",function(){$(this).hasClass("solveActive")||($(this).addClass("solveActive"),$(this).css({background:m,border:"1px solid "+m}),s.find(".isSolve .unsolveActive").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".isSolve .js-unSolved").removeClass("unsolveActive")),u=1}),s.delegate(".isSolve .js-unSolved","click",function(){$(this).hasClass("unsolveActive")||($(this).addClass("unsolveActive"),$(this).css({background:m,border:"1px solid "+m}),s.find(".isSolve .solveActive").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".isSolve .js-solved").removeClass("solveActive")),u=0}),s.delegate(".isSatisfaction .js-solved","click",function(){$(this).hasClass("solveActive")||($(this).addClass("solveActive"),$(this).css({background:m,border:"1px solid "+m}),s.find(".isSatisfaction .unsolveActive").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".isSatisfaction .js-unSolved").removeClass("unsolveActive"))}),s.delegate(".isSatisfaction .js-unSolved","click",function(){$(this).hasClass("unsolveActive")||($(this).addClass("unsolveActive"),$(this).css({background:m,border:"1px solid "+m}),s.find(".isSatisfaction .solveActive").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".isSatisfaction .js-solved").removeClass("solveActive"))})},F=function(){f({type:"get",url:"/v2/chat/user/satisfactionMessage.action",dataType:"json",data:{uid:t.apiInit.uid},success:function(e){if(1===e.status){d=e.data,showTipObj=r(t),$chatPanelList.find(".js-zhichipushEva")&&$chatPanelList.find(".js-zhichipushEva").remove();var i=a.aname.length>4?a.aname.substr(0,4)+"...":a.aname,l={config:d,language:p,languageText:g,subName:i,aname:a.aname},c=doT.template(o.pushEvaMsg)(l);s=$(c),$chatPanelList.append(s),v(),I(),n.trigger("listMsg.scrollToBottom")}},error:function(){r.show("")}})},k=function(){x(),F()};k()};t.exports=a},{"../../../common/util/listener.js":33,"../../../common/util/monitAjax.js":35,"../util/showTip.js":73,"./template.js":48}],47:[function(e,t,i){var a=function(t,i,a){var s,n,o,r,l,c,d,u,f,p,g,m,v,h,y,j,T,b,w=e("../../../common/util/listener.js"),x=(e("../../../common/util/load.js")(),e("./template.js")),I=(e("../../../common/comm.js"),e("../../../common/util/monitAjax.js")(i)),F=i.language.text,k=0,C=42,S=0,A=1,M=0,L=0,_=80,P=120,D=[],B=function(){var e=doT.template(x.sideBarMenu)(D);f.append(e),_*M>k?(b=80,L=k-C,b-L%b>1&&(b=L/Math.floor(L/b)),S=Math.ceil(b*M/(L+1)),f.find("li").eq(0).css("border-left","1px solid #fff")):_*M<=k&&P*M>=k?(b=k/M,L=k,b-L%b>1&&(b=L/Math.floor(L/b)),m.css("display","none")):(b=120,L=k,b-L%b>5&&(b=L/Math.floor(L/b)),m.css("display","none")),n.css("width",k+"px"),u.css("width",L+1+"px"),f.css("width",b*M+"px"),f.find("li").css("width",b-1+"px");var e=doT.template(x.barMain)({list:D,languageText:F});v.append(e),$(".js-barInner:first").css("display","block"),$(".js-barAddress").html(h.html()),$(".js-barRobotName").html(y.html()),$(".js-barRobotName").attr("title",y.html()),$(".js-barHeadImg").attr("src",i.apiConfig.robotLogo),$(".js-customInner").find("a").attr("target","_blank"),$(".js-barInner2 img").on("click",function(){var e=$(this).attr("src");a.open(e)}),setTimeout(function(){w.trigger("listMsg.sideBarAfterNotice")},50),N()},N=function(){var e=r.width()-k-2;e<360&&(e=360);var t=$("#zcChat").outerHeight()-r.outerHeight()-f.outerHeight()-20;v.css({height:t}),s.css("min-width",k+360+2+"px"),o.css("width",e+"px");var i=f.find("li.barMenuActive").index(),a=l.find(".js-barInner").eq(i).find("iframe");a.css({height:t+Math.floor(10*Math.random()+1)}),setTimeout(function(){a.css({height:t})},3),d.css("width",e+"px"),$(".barInner2").css("height",c.height()+10+"px")},R=function(){A<S&&(A+=1),z(A)},O=function(){A>1&&(A-=1),z(A)},z=function(e){currentMarginLeft=-L*(e-1),f.stop(!0).animate({"margin-left":currentMarginLeft},500)},E=function(){setTimeout(function(){var e=f.css("marginLeft");"0px"===e?(p.addClass("noAbleLeftBtn").removeClass("hoverBtn"),g.removeClass("noAbleRightBtn").addClass("hoverBtn")):A===S?(g.addClass("noAbleRightBtn").removeClass("hoverBtn"),p.removeClass("noAbleLeftBtn").addClass("hoverBtn")):(p.removeClass("noAbleLeftBtn").addClass("hoverBtn"),g.removeClass("noAbleRightBtn").addClass("hoverBtn"))},600)},H=function(){$(this).addClass("barMenuActive").siblings().removeClass("barMenuActive"),$(".js-barInner").css("display","none");var e=$(this).attr("data-tab");$("#"+e).css("display","block"),N()},q=function(e){if(e.displayField||!e.serviceInfo||e.serviceInfo.displayField){if("object"!=typeof e.serviceInfo)return!1;e.displayField=e.displayField||e.serviceInfo.displayField,"string"==typeof e.displayField&&(e.displayField=e.displayField.split(",")||[]);var t=doT.template(x.cusCard)({data:e,languageText:F});$(".js-barCard").html(t),$(".js-barHeadImg").attr("src",e.aface||e.serviceInfo.face)}},W=function(){l=$(t),s=$(".js-mainBox"),n=$(".js-rightBar"),o=$(".js-chatPanelBody"),r=$(".js-header"),c=$(".js-chatPanel"),d=$(".js-footer"),u=$(".js-barMenuWidely"),f=$(".js-barMenu"),p=$(".js-prev"),g=$(".js-next"),m=$(".js-menuBtn"),v=$(".js-barMain"),h=$(".js-infoBarCompany"),y=$(".js-titleName"),j=$(".js-barRobotName"),T=$(".js-barAddress")},U=function(){$(a).on("resize",N),p.on("click",O),g.on("click",R),m.on("click",E),f.delegate("li","click",H),w.on("listMsg.artificial",q)},G=function(){I({type:"post",url:"/v2/chat/user/querySideBar.action ",dataType:"json",data:{sysNum:i.sysNum,source:i.userInfo.source,uid:i.apiInit.uid||"",channelFlag:i.urlParams.channelFlag||""},success:function(e){if(1===i.apiConfig.sideBarStatus){k=i.apiConfig.sideBarWidth;for(var t=0;t<e.list.length;t++)1===e.list[t].menuStatus&&D.push(e.list[t]);M=D.length,W(),U(),B()}}})};G()};t.exports=a},{"../../../common/comm.js":1,"../../../common/util/listener.js":33,"../../../common/util/load.js":34,"../../../common/util/monitAjax.js":35,"./template.js":48}],48:[function(e,t,i){var a={},s='<li id="{{=it.id||""}}" class="clearfix js-queueing"><div class="systemMsg"><div class="systemMsgText">{{=it.content}}</div></div></li>',n='<li id="{{=it.id||""}}" class="clearfix js-serviceOff"><div class="systemMsg"><div class="systemMsgText">{{=it.content}}</div></div></li>',o='<li id="" class="clearfix js-zhichipushEva zhichipushEva"><div class="systemMsg"><div class="systemMsgPushEva"><div class="pushEvaluate js-pushEvaluate"><p class="pushEvaTitle"><label class="aname" title="{{=it.aname}}">{{=it.subName}}</label>{{=it.languageText.T0093}}</p>{{if(it.config[0].isQuestionFlag){}}<div class="operateType isSolve"><p class="operateTypeTitle"><label class="aname" title="{{=it.aname}}">{{=it.subName}}</label>{{=it.languageText.T0106}}</p><div class="operateTypeBtn"><p class="solve solved js-solved defaultSolveActive"><span></span>{{=it.languageText.T0041}}</p><p class="solve unSolved js-unSolved" style="margin-left:25px;"><span></span>{{=it.languageText.T0042}}</p></div></div>{{}}}<div class="operateType isSatisfaction"><p class="operateTypeTitle" title={{=it.languageText.T0096}}>{{=it.languageText.T0096}}</p><div class="operateTypeBtn"><p class="solve solved js-solved defaultSolveActive"><span></span>{{=it.languageText.T0154}}&nbsp;&nbsp;</p><p class="solve unSolved js-unSolved" style="margin-left:25px;"><span></span>{{=it.languageText.T0155}}</p></div></div><p class="moregood js-moregood">{{=it.languageText.T0107}}</p></div></div></div></li>',r='<div class="systemMsg"><div class="systemMsgText">{{=it.content}}</div></div>',l='<li class="clearfix magBox leftMsg"><p class="leftName">{{=it.list.senderName}}</p><div class="msgDiv"><div class="msgText">{{=it.list.msg}}</div></div></li>',c='<li class="clearfix magBox leftMsg"><p class="leftName">{{=it.aname}}</p><div class="msgDiv"><div class="msgText">{{=it.content}}</div></div></li>',d='{{if(it.aname){ }}{{if(it.revokeFlag){}}<li class="clearfix magBox leftMsg"><div class="systemMsg"><div class="systemMsgText"></div></div></li>{{}else{}}<li class="clearfix magBox leftMsg" data-msg-id="{{=it.msgId}}" creattime="{{=it.t||""}}"><p class="leftName">{{=it.aname||""}}</p>{{ if(it.ticketMsgFlag && it.msgType!=5){ }}<div class="editContent msgDiv {{if(it.from=="initHistory"){ }} noneClick {{ } }}"><div class="msgText">{{=it.msg||""}}</div>{{ }else{ }}<div class="msgDiv {{if(it.from=="initHistory"){ }} noneClick {{ } }}"><div class="msgText">{{=it.msg||""}}</div>{{ } }}{{if(it.showEvaluate||it.showArtificial){ }}<div class="msgBottomArea js-msgBottomArea" showEvaluate="{{=it.showEvaluate||""}}">{{if(it.showArtificial&&!it.wurl){ }}<span class="js-chatSwitch js-moduleSwitch msgChatSwitch"><i>{{=it.languageText.T0141}}</i></span>{{ } }}{{if(it.showArtificial&&it.wurl){ }}{{if(it.wurlOpenStyle){ }}<a href="{{=it.wurl}}" target="_blank" class="js-moduleSwitch msgChatSwitch"><i>{{=it.languageText.T0141}}</i></a>{{ }else{ }}<a href="{{=it.wurl}}" target="_parent" class="js-moduleSwitch msgChatSwitch"><i>{{=it.languageText.T0141}}</i></a>{{ } }}{{ } }}{{if(it.showEvaluate&&it.showArtificial){ }}<span class="js-fengefu1 fengefu">|</span>{{ } }}{{if(it.showEvaluate){ }}<span docId="{{=it.docId||""}}" robotFlag="{{=it.robotFlag||""}}" question="{{=it.question||""}}" msgId="{{=it.msgId||""}}" status="1" title="{{=it.languageText.T0142}}" class="js-msgEvaluate msgEvaluateOk msgChatEvaluate"><i>{{=it.languageText.T0142}}</i></span><span title="{{=it.languageText.T0142}}" class="js-evaback js-okBack hide msgChatEvaluate"><i>{{=it.languageText.T0142}}</i></span><span class="fengefu">|</span><span docId="{{=it.docId||""}}" robotFlag="{{=it.robotFlag||""}}" question="{{=it.question||""}}" msgId="{{=it.msgId||""}}" status="-1" title="{{=it.languageText.T0143}}" class="js-msgEvaluate msgEvaluateNo msgChatEvaluate"><i>{{=it.languageText.T0143}}</i></span><span title="{{=it.languageText.T0143}}" class="js-evaback js-noBack hide msgChatEvaluate"><i>{{=it.languageText.T0143}}</i></span>{{ } }}</div>{{ } }}</div>{{ if(it.ticketMsgFlag){ }}<div class="queryAll"><span class="openEdit"><span class="texts"></span><i></i></span></div>{{ } }}</li>{{if(it.dangerWarnFlag){}}<li class="clearfix magBox leftMsg"><div class="systemMsg"><div class="systemMsgText">{{=it.language.L10041||""}}</div></div></li>{{}}}{{ } }}{{ } }}',u='<div><div class="group-layer js-group-layer"></div><div class="group-outer js-group-outer pc-leaveMessage-layer"><p class="group-title"><span class="close_button js-cancel-btn js-group-cancel"></span></p><div class="group-main"><ul class="clearfix"><li class="js-open-url"></li>{{  for(var i=0;i<it.list.length;i++){ }}{{ var item = it.list[i];}}<li class="js-item" data-id="{{=item.templateId}}">{{=item.templateName}}</li>{{  } }}</ul></div></div></div>',f='{{if(it.source&&it.source==="uploadImg"){}}<li class="clearfix imgMagBox magBox rightMsg" id="{{=it.dateuid||""}}" creattime="{{=it.t||""}}"><div class="msgDiv"><div id="msgStatus{{=it.dateuid||""}}" class="msgStatus js-msgStatus msgsending"></div><div class="msgText">{{=it.msg||""}}</div><div class="uploadImgLayer js-uploadImgLayer"><p id="imgCancel{{=it.dateuid||""}}" class="cancelUploadImg js-cancelUploadImg"></p></div></div></li>{{ }else if(it.source&&it.source==="uploadFile"){ }}<li class="clearfix fileMagBox magBox rightMsg" id="{{=it.dateuid||""}}" creattime="{{=it.t||""}}"><div class="msgDiv"><div class="msgText"><div class="msgFileIco js-msgFileIco {{=it.fileIcoClass}}"></div><div class="msgFileDetail js-msgFileDetail"><p class="filename" title="{{=it.filename}}">{{=it.filename}}</p><span class="fileSize js-fileSize">{{=it.filesize}}</span> <span class="sizeAfter js-sizeAfter">|</span> <div class="uploadFileProcess js-uploadFileProcess"><span class="processSpan js-processSpan"></span></div><span id="filecancel{{=it.dateuid}}" class="filecancel js-filecancel"></span><span class="filecanceled js-filecanceled"></span><span class="filefail js-filefail"></span><a class="filedownload js-filedownload" target="_blank"></a></div></div></div></li>{{ }else{ }}<li class="clearfix magBox rightMsg" id="{{=it.dateuid||""}}" creattime="{{=it.t||""}}"><div class="msgDiv">{{if(it.from!=="initHistory"){}}<div id="msgStatus{{=it.dateuid||""}}" class="msgStatus js-msgStatus"></div>{{ } }}<div class="msgText">{{=it.msg||""}}</div></div>{{if(it.leaveMsgFlag==1){}}<span class="xinfeng"></span>{{}}}</li>{{ } }}',p='<li id="cutoff" class="cutoff"><span class="cutleft"></span>{{=it.content}}<span class="cutright"></span></li>',g='<li class="clearfix sysData"><p class="msgData">{{=it}}</p></li>',m='<li class="clearfix magBox leftMsg js-SwitchAdminsMsg"><p class="leftName">{{=it.aname||""}}</p><div class="msgDiv"><div class="msgText">{{=it.tipsMessage||""}}<div class="msgwrap leftMsg"><div class="msgOuter js-msgOuter"><div style="margin-bottom:10px;">{{=it.answer?it.answer:""}}</div><p>{{=it.stripe?it.stripe:""}}</p><ul class="sugguestions">{{for(var i=0,lan=it.list ||[] ;i<lan.length;i++){ }}<li style="color:#4298ba"><a href="#0" class="js-keySwitchAdmin keySwitchAdmin" data-id="{{=it.list[i].groupId}}" keyword="{{=it.keyword}}" keywordId="{{=it.keywordId}}">{{=it.list[i].groupName}}</a></li>{{ } }}</ul></div></div></div></div></li>',v='<div class="msgwrap leftMsg"><div class="msgOuter js-msgOuter"><div style="margin-bottom:10px;">{{=it.answer?it.answer:""}}</div><p>{{=it.stripe?it.stripe:""}}</p><ul class="sugguestions sugguestions">{{for(var i=0,lan=it.list ||[] ;i<lan.length;i++){ }}{{if(it.isHistory){ }}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba">{{=it.list[i]}}</a></li>{{}else{}}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba" data-docid="{{=it.list[i]["docId"]}}">{{=it.list[i]["question"]}}</a></li>{{}}}{{ } }}</ul></div></div>',h='<div class="msgwrap leftMsg"><div class="msgOuter js-msgOuter"><div style="margin-bottom:10px;">{{=it.answer?it.answer:""}}</div><p>{{=it.stripe?it.stripe:""}}</p><ul class="sugguestions-change">{{for(var i=0,lan=it.list ||[] ;i<lan.length;i++){ }}{{if(it.isHistory){ }}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba">{{=it.list[i]}}</a></li>{{}else{}}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba" data-docid="{{=it.list[i]["docId"]}}">{{=it.list[i]["question"]}}</a></li>{{}}}{{ } }}</ul></div>{{if(it.count){}}<div class="changeGroup js-changeGroup"><i></i></div>{{}}}',y='{{for(var i=0,lan=it.list ||[] ;i<lan.length;i++){ }}{{if(it.isHistory){ }}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba">{{=it.list[i]}}</a></li>{{}else{}}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba" data-docid="{{=it.list[i]["docId"]}}">{{=it.list[i]["question"]}}</a></li>{{}}}{{ } }}',j='<div class="msgwrap leftMsg"><div class="msgOuter js-msgOuter"><p style="{{=it.stripe?"margin-bottom:10px":""}}">{{=it.answerStrip?it.answerStrip:""}}</p><div>{{=it.answer?it.answer:""}}</div><div>{{=it.stripe?it.stripe:""}}</div><ul class="sugguestions">{{for(var i=0,lan=it.list ||[] ;i<lan.length;i++){ }}{{if(it.isHistory){ }}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba">{{=it.list[i]}}</a></li>{{}else{}}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba" data-docid="{{=it.list[i]["docId"]}}">{{=it.list[i]["question"]}}</a></li>{{}}}{{ } }}</ul></div></div>',T='{{for(var i=0;i<it.length;i++){ }}{{if(i==0){ }}<li data-tab="{{=it[i].sidebarId}}" class="barMenuActive"><span title="{{=it[i].menuName}}">{{=it[i].menuName}}</span></li>{{}else{}}<li data-tab="{{=it[i].sidebarId}}"><span title="{{=it[i].menuName}}">{{=it[i].menuName}}</span></li>{{}}}{{}}}',b='{{var list = it.list;}}{{for(var i=0;i<list.length;i++){ }}{{if(list[i].menuType===0){ }}<div id="{{=list[i].sidebarId}}" class="barInner js-barInner js-barCard"><div class="barInfo"><img class="headimage js-barHeadImg"/><p class="headname js-barRobotName"></p></div><div class="barInformation js-barInformation"><dl><dt>{{=it.languageText.T0061}}</dt><dd class="js-barAddress"></dd></dl></div></div>{{}else if(list[i].menuType===1){}}<div id="{{=list[i].sidebarId}}" class="js-barInner js-barInner2 barInner barInner2 js-customInner"><p>{{=list[i].customContent||""}}</p></div>{{}else{}}<div id="{{=list[i].sidebarId}}" class="js-barInner barInner"><iframe name="barIfm" id="barIfm" src="{{=list[i].menuUrl||""}}" scrolling="yes" frameborder="0"></iframe></div>{{}}}{{}}}',w='{{var list = it.data;}}<div class="barInfo">{{if(list.displayField[0]==="1"){ }}<img class="headimage js-barHeadImg"/>{{}}}{{if(list.displayField[2]==="1"){ }}<p class="headname js-barCusName"">{{=list.serviceInfo.nickName||"-"}}</p>{{}}}</div><div class="barInformation">{{if(list.displayField[4]==="1"){ }}<div id="{{=list.displayField[4]}}" class="inforLi"><label>{{=it.languageText.T0063}}</label><span>{{=list.serviceInfo.serviceNo||"-"}}</span></div>{{}}}{{if(list.displayField[6]==="1"){ }}<div class="inforLi"><label>{{=it.languageText.T0064}}</label><span>{{=list.serviceInfo.name||"-"}}</span></div>{{}}}{{if(list.displayField[8]==="1"){ }}<div class="inforLi"><label>{{=it.languageText.T0067}}</label><span>{{=list.serviceInfo.phone||"-"}}</span></div>{{}}}{{if(list.displayField[1]==="1"){ }}<div class="inforLi"><label>{{=it.languageText.T0066}}</label><span>{{=list.serviceInfo.tel||"-"}}</span></div>{{}}}{{if(list.displayField[3]==="1"){ }}<div class="inforLi"><label>{{=it.languageText.T0062}}</label><span>{{=list.serviceInfo.email||"-"}}</span></div>{{}}}{{if(list.displayField[5]==="1"){ }}<div class="inforLi"><label>Q Q</label><span>{{=list.serviceInfo.qq||"-"}}</span></div>{{}}}{{if(list.displayField[7]==="1"){ }}<dl><dt>{{=it.languageText.T0065}}</dt><dd>{{=list.serviceInfo.remark||"-"}}</dd></dl>{{}}}</div>',x='<div class="js-closeWindow"><div class="closeLayer js-closeLayer"></div><div class="closeEvaluate js-closeEvaluate"><span class="closeEvaBtn js-closeEvaBtn"></span><p class="closeEvaTitle">{{=it.languageText.T0096}}</p><div id="closeStar"><ul><li><a href="javascript:;">1</a></li><li><a href="javascript:;">2</a></li><li><a href="javascript:;">3</a></li><li><a href="javascript:;">4</a></li><li><a href="javascript:;">5</a></li></ul></div><div class="btnGroup"><span class="js-toSideEvaluate toSideEvaluate" style="display:none">{{=it.languageText.T0094}}</span><span class="js-commit commit" style="display:none">{{=it.languageText.T0095}}</span></div></div></div>',I='<div class="js-closeWindow"><div class="closeLayer js-closeLayer"></div><div class="closeEvaluate js-closeEvaluate"><span class="closeEvaBtn js-closeEvaBtn"></span><p class="closeEvaTitle">{{=it.languageText.T0098}}</p><div class="robotChose"><span class="js-isques js-robotResult evaluateok" resultFlag="true"><i></i>{{=it.languageText.T0041}}</span><span class="js-noques js-robotResult evaluateno" resultFlag="false"><i></i>{{=it.languageText.T0042}}</span></div><div class="btnGroup"><span class="js-toSideEvaluate toSideEvaluate" style="display:none">{{=it.languageText.T0094}}</span><span class="js-commit commit" style="display:none">{{=it.languageText.T0095}}</span></div></div></div>',F='<div class="js-evamsg evamsg"><p>{{=it.language.L10037}}</p></div>',k='<div class="js-evamsg evamsg" style="color:#cb1f16"><p>{{=it.language.L10038}}</p></div>',C='{{if(it.style){ }}<a class="noticeMsg js-noticeMsg" target="_blank"><span class="noticeVoice"></span><div class="noticeInner js-noticeInner"></div><span class="openUrl js-openUrl"></span> </a>{{}else{}}<li class="noticeMsg js-noticeMsg"><span class="noticeVoice"></span><div class="noticeInner js-noticeInner"></div><span class="openNotice js-openNotice openActive">{{=it.languageText.T0068}}</span> </li>{{}}}',S='<div class="sessionTmp0 js-tmp{{=it.multiDiaRespInfo.conversationId||""}}" >{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.answerStrip){}}<p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p>{{}else if(!it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.remindQuestion){}}<p>{{=it.multiDiaRespInfo.remindQuestion||""}}</p>{{}}}<p>{{=it.multiDiaRespInfo.answer||""}}</p>{{if(it.multiDiaRespInfo.interfaceRetList){}}<div class="interfaceRetListArea"><ul class="js-interfaceRetList{{=it.multiDiaRespInfo.conversationId||""}}">{{for(var i=0;i<it.multiDiaRespInfo.interfaceRetList.length;i++){}}<li class="tmp0InnerList js-tmpInnerList" {{if(i==it.multiDiaRespInfo.interfaceRetList.length-1){}} style="border-bottom: 1px solid #d6dbe5"{{}}}conversationId="{{=it.multiDiaRespInfo.conversationId}}" level="{{=it.multiDiaRespInfo.level}}" data-index="{{=i}}">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.interfaceRetList[i].anchor){}}<a class="viewImg" href="{{=it.multiDiaRespInfo.interfaceRetList[i].anchor}}" target="_blank">{{if(it.multiDiaRespInfo.interfaceRetList[i].thumbnail){}}<img noJump="true" src="{{=it.multiDiaRespInfo.interfaceRetList[i].thumbnail}}">{{}else{}}<span style="display:inline-block"></span>{{}}}</a>{{}else{}}<div class="viewImg">{{if(it.multiDiaRespInfo.interfaceRetList[i].thumbnail){}}<img noJump="true" src="{{=it.multiDiaRespInfo.interfaceRetList[i].thumbnail}}">{{}else{}}<span style="display:inline-block"></span>{{}}}</div>{{}}}<div class="innerRight"><div class="rightTop">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.interfaceRetList[i].anchor){}}<a class="title" href="{{=it.multiDiaRespInfo.interfaceRetList[i].anchor}}" target="_blank">{{=it.multiDiaRespInfo.interfaceRetList[i].title||""}}</a>{{}else{}}<p class="title">{{=it.multiDiaRespInfo.interfaceRetList[i].title||""}}</a>{{}}}</div><div class="rightMid"><p class="mark1">{{=it.multiDiaRespInfo.interfaceRetList[i].summary||""}}</p></div><div class="rightBottom"><p class="mark2">{{=it.multiDiaRespInfo.interfaceRetList[i].label||""}}</p><p class="mark4">{{=it.multiDiaRespInfo.interfaceRetList[i].tag||""}}</p></div></div><div style="clear:both"></div></li>{{}}}</ul></div>{{if(it.multiDiaRespInfo.interfaceRetList.length>3){}}{{if(it.from!="history"){}}<div class="tranMultiGroup js-tranMultiGroup" conversationId="{{=it.multiDiaRespInfo.conversationId||""}}" page="1"><span></span><i></i></div>{{}}}{{}}}{{}else{}}{{if(it.multiDiaRespInfo.endFlag){}}<p>{{=it.multiDiaRespInfo.answerStrip}}</p>{{}else{}}{{if(it.multiDiaRespInfo.endFlag&&it.from!="history"){}}<p>{{=it.multiDiaRespInfo.remindQuestion}}</p>{{}}}{{}}}{{}}}<div style="clear:both"></div> </div>',A='<div class="sessionTmp1 js-tmp{{=it.multiDiaRespInfo.conversationId||""}}">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.answerStrip){}}<p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p>{{}else if(!it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.remindQuestion){}}<p class="beginLan">{{=it.multiDiaRespInfo.remindQuestion||""}}</p>{{}}}<ul class="tmp1InnerList js-tmp1List">{{if(it.multiDiaRespInfo.interfaceRetList){}}{{for(var i=0;i<it.multiDiaRespInfo.interfaceRetList.length;i++){}}{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.interfaceRetList[i].anchor){}}{{if(i<9){}}<li class="innerEle" title="{{=it.multiDiaRespInfo.interfaceRetList[i].title}}">{{}else{}}<li class="innerEle multiHide" title="{{=it.multiDiaRespInfo.interfaceRetList[i].title}}">{{}}}<a href="{{=it.multiDiaRespInfo.interfaceRetList[i].anchor}}" target="_blank">{{=it.multiDiaRespInfo.interfaceRetList[i].title}}</a></li>{{}else{}}{{if(i<9){}}<li class="innerEle js-tmpInnerList" conversationId="{{=it.multiDiaRespInfo.conversationId}}" data-index="{{=i}}" level="{{=it.multiDiaRespInfo.level}}" title="{{=it.multiDiaRespInfo.interfaceRetList[i].title}}">{{}else{}}<li class="innerEle js-tmpInnerList multiHide" conversationId="{{=it.multiDiaRespInfo.conversationId}}" data-index="{{=i}}" level="{{=it.multiDiaRespInfo.level}}" title="{{=it.multiDiaRespInfo.interfaceRetList[i].title}}">{{}}}{{=it.multiDiaRespInfo.interfaceRetList[i].title}}</li>{{}}}{{}}}{{}}} </ul>{{if(it.multiDiaRespInfo.interfaceRetList.length>9){}}{{if(it.from!="history"){}}<div class="multiMore js-tmp1MultiMore" page="1"><span></span><i></i></div>{{}}}{{}}}<div style="clear:both"></div> </div>',$='<div class="sessionTmp2 js-tmp{{=it.multiDiaRespInfo.conversationId}}">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.answerStrip){}}<p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p>{{}else if(!it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.remindQuestion){}}<p class="beginLan">{{=it.multiDiaRespInfo.remindQuestion||""}}</p>{{}}}{{if(it.multiDiaRespInfo.interfaceRetList){}}<ul class="js-tmp2List">{{for(var i=0;i<it.multiDiaRespInfo.interfaceRetList.length;i++){}}{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.interfaceRetList[i].anchor){}}{{if(i>2){}}<li class="multiHide">{{}else{}}<li>{{}}}<a href="{{=it.multiDiaRespInfo.interfaceRetList[i].anchor}}" target="_blank"><div class="tmp2InnerList" {{if(i==0){}}style="border-top: 1px solid #d6dbe5"{{}}}>{{if(it.multiDiaRespInfo.interfaceRetList[i].thumbnail){}}<img class="viewImg" noJump="true" src="{{=it.multiDiaRespInfo.interfaceRetList[i].thumbnail}}"><div class="innerTop">{{}else{}}<div class="innerTop" style="width:97%">{{}}}<p class="title" title="{{=it.multiDiaRespInfo.interfaceRetList[i].title}}">{{=it.multiDiaRespInfo.interfaceRetList[i].title}}</p><p class="tag">{{=it.multiDiaRespInfo.interfaceRetList[i].tag||""}}</p></div><div class="innerBottom"><p class="summary">{{=it.multiDiaRespInfo.interfaceRetList[i].summary||""}}</p> </div><div style="clear:both"></div></div></a></li>{{}else{}}{{if(i>2){}}<li class="multiHide">{{}else{}}<li>{{}}}<div class="tmp2InnerList js-tmpInnerList" {{if(i==0){}}style="border-top: 1px solid #d6dbe5"{{}}} conversationId="{{=it.multiDiaRespInfo.conversationId}}" level="{{=it.multiDiaRespInfo.level}}"  data-index="{{=i}}">{{if(it.multiDiaRespInfo.interfaceRetList[i].thumbnail){}}<img class="viewImg" noJump="true" src="{{=it.multiDiaRespInfo.interfaceRetList[i].thumbnail}}"><div class="innerTop">{{}else{}}<div class="innerTop" style="width:97%">{{}}}<p class="title" title="{{=it.multiDiaRespInfo.interfaceRetList[i].title}}">{{=it.multiDiaRespInfo.interfaceRetList[i].title}}</p><p class="tag">{{=it.multiDiaRespInfo.interfaceRetList[i].tag||""}}</p></div><div class="innerBottom"><p class="summary">{{=it.multiDiaRespInfo.interfaceRetList[i].summary||""}}</p> </div><div style="clear:both"></div></div></li>{{}}}{{}}}</ul>{{if(it.multiDiaRespInfo.interfaceRetList.length>3){}}{{if(it.from!="history"){}}<div class="multiMore js-tmp2MultiMore" page="1"><span></span><i></i></div>{{}}}{{}}}{{}}} </div>',M='<div class="sessionTmp3 js-tmpInnerList2 js-tmp{{=it.multiDiaRespInfo.conversationId||""}}" level="{{=it.multiDiaRespInfo.level}}"><div class="viewParent"><img class="viewImg" noJump="true" src="{{=it.multiDiaRespInfo.interfaceRetList[0].thumbnail}}"><div class="inner"><p class="title">{{=it.multiDiaRespInfo.interfaceRetList[0].title}}</p><p class="summary">{{=it.multiDiaRespInfo.interfaceRetList[0].summary}}</p>{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.interfaceRetList[0].anchor){}}<a class="more" target="_blank" href="{{=it.multiDiaRespInfo.interfaceRetList[0].anchor}}"> ></a> </div>{{}else{}}<p class="more"> ></p>{{}}}<div style="clear:both"></div></div> </div>',L='<div class="sessionTmp4><p class="beginLan"}}">{{=it.multiDiaRespInfo.answerStrip||it.multiDiaRespInfo.remindQuestion||""}}</p>{{if(it.multiDiaRespInfo.answerStrip||it.multiDiaRespInfo.remindQuestion){}}<p style="height:10px;width:100%;"></p>{{}}}<div class="inner"><p class="title">{{=it.multiDiaRespInfo.interfaceRetList[0].title}}</p> </div><div style="clear:both"></div> </div>',_='<div class="sessionTmp1">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.answerStrip){}}<p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p>{{}else if(!it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.remindQuestion){}}<p class="beginLan">{{=it.multiDiaRespInfo.remindQuestion||""}}</p>{{}}}<ul class="tmp1InnerList">{{for(var i=0;i<it.contentAry.length;i++){}}<li class="innerEle js-inputContent js-tmp{{=it.multiDiaRespInfo.conversationId}}" conversationId="{{=it.multiDiaRespInfo.conversationId}}" title="{{=it.contentAry[i]}}" outPutParamList="{{=it.multiDiaRespInfo.outPutParamList}}" level="{{=it.multiDiaRespInfo.level}}">{{=it.contentAry[i]}}</li>{{}}} </ul><div style="clear:both"></div> </div>',P='{{if(it.multiDiaRespInfo.retCode=="000000"){}}<div class="sessionTmp1511">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.answerStrip){}}<p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p>{{}else if(!it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.remindQuestion){}}<p class="beginLan">{{=it.multiDiaRespInfo.remindQuestion||""}}</p>{{}}}<ul class="tmp1InnerList">{{for(var i=0;i<it.contentAry.length;i++){}}<li class="innerEle js-inputContent_1511 js-tmp{{=it.multiDiaRespInfo.conversationId}}" conversationId="{{=it.multiDiaRespInfo.conversationId}}" title="{{=it.titleAry[i]}}" content="{{=it.contentAry[i]}}" level="{{=it.multiDiaRespInfo.level}}"> {{=it.titleAry[i]}}{{=it.contentAry[i]}}</li>{{}}} </ul><div style="clear:both"></div> </div>{{}else{}}<div class="sessionTmp1511"><p>{{=it.multiDiaRespInfo.retErrorMsg||""}}</p><div style="clear:both"></div> </div>{{}}}',D='<div class="cyclicSessionError"><span class="icn"></span><p class="errorP">{{=it.multiDiaRespInfo.retErrorMsg}}</p></div>',B='<div class="sessionTmp1"><p class="beginLan" style="margin-bottom:0px">{{=it.multiDiaRespInfo.answer||""}}</p><div style="clear:both"></div> </div>',N='<li class="clearfix magBox leftMsg" creattime=""><p class="leftName">{{=it.robotData.robotName}}</p><div class="msgDiv"><div class="msgText"><div class="msgwrap leftMsg"><div class="msgOuter js-msgOuter"><div style="margin-bottom:10px;"><p>{{=it.multiGuideData.guide}}</p></div><p></p><ul class="multiGuide">{{for(var i=0;i<it.multiGuideData.msg.length;i++){}}{{if(i<6){}}<li class="guideEle"><a href="#0" data-num="{{=it.multiGuideData.msg[i].question}}" class="js-multiAnswerBtn multiAnswerBtn" data-docid="{{=it.multiGuideData.msg[i].id}}">{{=it.multiGuideData.msg[i].title}}</a><i></i></li>{{}}}{{}}}</ul></div></div></div></div><div class="msgBottomArea"></div></li>',R='<div class="systemMsg"><div class="systemMsgText">{{=it.tips}}</div></div>';a.systemMsg=s,a.systemqueue=r,a.sayHello=l,a.transferSayHello=c,a.leftMsg=d,a.rightMsg=f,a.cutoffMsg=p,a.msgDate=g,a.listSugguestionsMsg=v,a.multiListSugguestionsMsg=j,a.sideBarMenu=T,a.barMain=b,a.cusCard=w,a.closeFormHumanEvaluate=x,a.closeFormRobotEvaluate=I,a.evamsgHtml=F,a.evamsgHtml2=k,a.noticeHtml=C,a.pushEvaMsg=o,a.cyclicSessionTMP0=S,a.cyclicSessionTMP1=A,
a.cyclicSessionTMP2=$,a.cyclicSessionTMP3=M,a.cyclicSessionTMP4=L,a.inputContentTMP=_,a.inputContentTMP_1511=P,a.cyclicSession_1522=B,a.cyclicSessionError=D,a.multiGuideHtml=N,a.recallMsg=R,a.keySwitchAdmins=m,a.systemMsg2=n,a.groupTemplate=u,a.sugguestionsListMsg=y,a.listSugguestionsMsgChange=h,t.exports=a},{}],49:[function(e,t,i){var a=function(t){var i=(e("../../../common/util/listener.js"),""),a=function(){i=t.userInfo.color?t.userInfo.color:t.apiConfig.color,$header.css("background",i);var e=".rightMsg .msgDiv::before{border-color:transparent "+i+"}.rightMsg .msgDiv{background: "+i+"}";try{var a=document.getElementById("setStyle");a.appendChild(document.createTextNode(e))}catch(s){a.styleSheet.cssText=e}},s=function(){},n=function(){$header=$(".js-header"),$zhichiVoice=$(".js-zhichiVoice"),$infoBarLogo=$(".infoBarLogo"),$item=$(".js-item")},o=function(){a()},r=function(){n(),o(),s()};r()};t.exports=a},{"../../../common/util/listener.js":33}],50:[function(e,t,i){var a=function(){var t,i=e("../../../common/util/listener.js"),a=e("../../../common/comm.js"),s=e("../listMsg/sideBar.js"),n=a.getQueryParam(),o="",r="",l=function(){"iframe"===n.from?($(".js-mainBox").css({display:"block",height:"100%",width:"100%","max-height":"100%","max-width":"100%","min-height":"430px","min-width":"360px",top:"0px",bottom:"0px",left:"0px","margin-top":"0","margin-left":"0"}),$zhichiMin.css("display","none"),n.hideMax&&$zhichiMax.css("display","none")):($(".js-mainBox").css({display:"block",height:"95%",width:"95%","max-height":"720px","max-width":"640px",top:"50%",left:"50%","margin-left":"-240px","margin-top":"-320px","min-height":"430px","min-width":"360px"}),$zhichiMin.css("display","none"),$zhichiMax.css("display","none"))},c=function(){l(),$(".js-evaluate").find(".block-text").html("")},d=function(){var e=$(window).height(),t=$(window).width(),i=$(".js-mainBox").width(),a=$(".js-mainBox").height();"iframe"!=n.from&&$(".js-mainBox").css({top:(e-a)/2,left:(t-i)/2,"margin-top":"0","margin-left":"0"})},u=function(){var e=window.location.href,t=[],i=[];for(var a in n)"uid"!==a&&"cid"!==a&&"from"!==a&&"unit"!==a&&(t.push(a),i.push(n[a]));e=e.substring(0,e.lastIndexOf("?")+1);for(var s=0;s<t.length;s++)e+=t[s]+"="+i[s]+"&";e=e.substring(0,e.length-1),$zhichiMax.attr("href",e)},f=function(){$zhichiMin=$(".js-zhichiMin"),$zhichiMax=$(".js-zhichiMax"),i.on("core.onload",function(e){t=e[0],o=t.language.lan,r=t.language.text,"iframe"!==n.from&&1===t.apiConfig.sideBarStatus&&(s($(".js-rightBar")[0],t,window),$(".js-mainBox").css({"max-width":t.apiConfig.sideBarWidth+640+"px"})),d()})},p=function(){$(window).resize(function(){d()}),u(),$zhichiMax.on("click",function(){window.parent!==window&&window.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*")})},g=function(){f(),p(),c()};g()};t.exports=a},{"../../../common/comm.js":1,"../../../common/util/listener.js":33,"../listMsg/sideBar.js":47}],51:[function(e,t,i){var a={orderClassify:"/ws/queryTicketTypeInfoList/4"},s={},n="orderClassify",o=function(t,i){var o=(e("../../../common/util/monitAjax.js")(i),e("../../../common/util/listener.js")),r=e("./template.js"),l=!1,c=t,d=!1,u=1,f="",p=function(e){e.stopPropagation(),o.trigger("sendArea.closeAlldropMenu"),l?(c.find(".js-classDropdownAreaFixed").removeClass("openActive"),c.find(".js-classDropdown-btn").removeClass("checkActive"),$(this).find(".classIfyTitleIcn").css("background-position","-3279px 13px"),l=!1):(d||g(),c.find(".js-classDropdownAreaFixed").removeClass("openActive"),c.find(".js-classDropdown-btn").removeClass("checkActive"),$(this).addClass("checkActive"),$(this).next().addClass("openActive"),$(this).find(".classIfyTitleIcn").css("background-position","-3320px 13px"),l=!0)},g=function(){var e={},t=JSON.stringify(e),s={uid:i.apiInit.uid,url:a[n],method:"get",param:t};$.ajax({url:"/v2/chat/data/invokeOtherByUser.action",dataType:"json",type:"get",data:s}).success(function(e){var t={items:e.items.filter(function(e){return e.companyId})};m(t.items),f=doT.template(r.classifyOrderList)(t),c.find(".js-classifyOrderMenu").html(f),d=!0})},m=function(e){if(e)for(var t=0;t<e.length;t++)e[t].items&&e[t].items.length>0&&(s[e[t].typeId]=e[t].items,m(s[e[t].typeId]))},v=function(){var e=$(this).attr("dataId")||"",t=$(this).attr("data-nodeFlag")||"",i=$(this).attr("title")||"",a=s[e];if("1"===t&&e&&a.length&&u<5){u++;var n={items:a},o=doT.template(r.classifyOrderList)(n);c.find(".js-classifyOrderMenu").html(o),c.find(".js-routerDeep").addClass("active"),c.find(".js-classRouter").append("<span class='routerDeep js-routerDeep' dataDeep='"+u+"' dataId='"+e+"' data-nodeFlag='"+t+"' title='"+i+"'><i style='color:#0DAEAF'>/ </i>"+i+"</span>"),h(u);try{var l=document.getElementById("classDropdownMenu");l.scrollTop=0}catch(d){return""}}},h=function(e){for(var t=1;t<6;t++)c.find(".js-routerDeep").removeClass("routerNum"+t).addClass("routerNum"+e)},y=function(){var e=$(this).attr("dataId")||"",t=$(this).attr("dataDeep")||"",i=s[e];u=t;for(var a=$(this).parent().find(".js-routerDeep"),n=a.length,o=0;o<n-t;o++)$(a[n-o-1]).remove();if($(this).removeClass("active"),e){if(i.length){var l={items:i},d=doT.template(r.classifyOrderList)(l);c.find(".js-classifyOrderMenu").html(d)}}else c.find(".js-classifyOrderMenu").html(f);h(t)},j=function(e){e.stopPropagation();var t=$(this).attr("data-key")||"",i=$(this).attr("data-nodeFlag")||"";if("1"!==i){var a=$(this).parents(".js-questionClassify");a.find(".js-classDropdown-title").html($(this).html());var s=$(this).attr("dataId")||"",n=$(this).attr("dataName")||"",r={key:t,dataId:s,dataName:n};o.trigger("sendArea.definedFieldResult",r),c.find(".js-classDropdownAreaFixed").removeClass("openActive"),c.find(".js-classDropdown-btn").removeClass("checkActive"),c.find(".classIfyTitleIcn").css("background-position","-3279px 13px"),l=!1}},T=function(){l=!1,c.find(".js-classDropdownAreaFixed").removeClass("openActive"),c.find(".js-classDropdown-btn").removeClass("checkActive"),c.find(".classIfyTitleIcn").css("background-position","-3279px 13px")},b=function(e){e.stopPropagation()},w=function(){},x=function(){c.delegate(".js-classDropdown-btn","click",p),c.delegate(".js-classDropdownLi","click",j),c.delegate(".js-classOrderList","click",v),c.delegate(".js-routerDeep","click",y),c.delegate(".js-classDropdownAreaFixed","click",b),c.delegate(".js-leaveMsgBody","click",T)},I=function(){},F=function(){I(),w(),x()};F()};t.exports=o},{"../../../common/util/listener.js":33,"../../../common/util/monitAjax.js":35,"./template.js":59}],52:[function(e,t,i){function a(t,i,a,s){var n,o=e("./template.js"),r=e("../../../common/util/listener.js"),l=e("../../../common/util/msgReminder.js"),c=e("../util/showTip.js"),d=e("../../../common/util/monitAjax.js")(i),u=(i.language.lan,i.language.text),f=i.userInfo.color?i.userInfo.color:i.apiConfig.color,p=0,g="",m="",v=!1,h=!1,y=0===a.commentType?a.commentType:1,j=1,T="",b={};l.clear();var w=function(){var e=doT.template(o.AlertTemplate)(),t=i.apiConfig.robotName.length>8?i.apiConfig.robotName.substr(0,8)+"...":i.apiConfig.robotName,s=doT.template(o.sobotEvaluateOne_selfHtml)({evaluateTitle:u.T0021,okText:u.T0041,cancelText:u.T0042,robotName:i.apiConfig.robotName,subName:t});n=$(e),$(".js-mainBox").append(n),S(),n.find(".model-body").html(s),k(a.from),n.find(".js-submitTheme").css("background",f),_()},x=function(){$(this).addClass("noactive"),$(this).css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-isques").removeClass("okactive"),n.find(".js-isques").css({background:"#fff",border:"1px solid #ddd",color:"#8a9699"}),h=!0,p=0;var e=i.apiConfig.robotCommentTitle.split(","),t=doT.template(o.sobotEvaluateTwo_selfHtml)({list:e,languageText:u});n.find(".model-body-extend").html(t),_()},I=function(){var e=doT.template(o.AlertTemplate)();n=$(e),$(".js-mainBox").append(n),S();var t=$(".js-titleName").html(),i=t.length>4?t.substr(0,4)+"...":t,s=doT.template(o.humanOne_selfHtml)({config:b,languageText:u,aname:t,subName:i});if(n.find(".model-body").html(s),$aLi=$(".isSatisfactionForEva .operateTypeBtn p"),n.find(".js-evaluateTip").css("color","#faba4a"),"push"==a.from){p=a.score;var r=a.solveActive;k(a.from),n.find(".js-evaluateTip").html(b[4].scoreExplain),n.find(".js-evaluateTip").css("color","#faba4a"),F(p),0==r?n.find(".isSolve .js-solved").addClass("solveActive").css({background:f,border:"1px solid "+f,color:"#fff"}):1==r?n.find(".isSolve .js-solved").addClass("solveActive").css({background:f,border:"1px solid "+f,color:"#fff"}):2==r&&n.find(".isSolve .js-unSolved").addClass("unsolveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),5==p?n.find(".isSatisfactionForEva .js-solved").addClass("solveActive").css({background:f,border:"1px solid "+f,color:"#fff"}):1==p&&n.find(".isSatisfactionForEva .js-unSolved").addClass("unsolveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-submitTheme").css("background",f)}else p=5,h=!0,k(a.from),n.find(".js-evaluateTip").html(b[4].scoreExplain),n.find(".js-solved").addClass("solveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-submitTheme").css("background",f),n.find(".js-evaluateTip").css("color","#faba4a");for(var l=0,c=1;c<=$aLi.length;c++)$aLi[c-1].index=c,$($aLi[c-1]).bind("click",function(){switch(l=this.index,h=!0,l){case 2:l=1,p=1,a.score=1,F(l),k(a.from),_(),n.find(".js-submitTheme").css("background",f),n.find(".js-evaluateTip").css("color","#faba4a");break;case 1:l=5,p=5,a.score=5,n.find(".model-body-extend").html(""),n.find(".js-submitTheme").css("background",f),n.find(".js-evaluateTip").html(b[l-1].scoreExplain),n.find(".js-evaluateTip").css("color","#faba4a"),"close"==a.from&&C(),_()}});_()},F=function(e){h=!0,conf=b[e-1];var t=[],i=conf.scoreExplain;conf.labelName&&(t=conf.labelName.split(","));for(var a=0;a<t.length;a++)""==t[a]&&t.splice(a,1);var s=doT.template(o.humanTwo_selfHtml)({list:t,conf:conf,languageText:u});n.find(".model-body-extend").html(s),n.find(".js-evaluateTip").html(i),_()},k=function(e){var t=doT.template(o.evaluateFooter_selfHtml)({from:e,languageText:u});n.find(".model-body-commit").html(t)},C=function(){if("push"==a.from&&(h=!0),0==v&&h){v=!0;var e=[],s=n.find(".js-tag").length;if(n.find(".js-tag").each(function(){var t=$(this).html();$(this).hasClass("active")&&e.push(t)}),t&&0==e.length&&b[p-1].isTagMust&&5!=p&&s>0)return c.show(u.T0104),void setTimeout(function(){v=!1},3e3);if(g=e.join(","),m=n.find(".js-evaluateInner").val()||"",/^\s+$/g.test(m)&&(m=""),t&&""==m&&b[p-1].isInputMust&&5!=p)return c.show(u.T0105),void setTimeout(function(){v=!1},3e3);j=1==t?1==b[0].isQuestionFlag?n.find(".isSolve .js-solved").hasClass("solveActive")?1:0:-1:n.find(".js-isques").hasClass("okactive")?1:0,0==t&&(T=i.apiConfig.robotFlag||""),d({type:"post",url:"/v2/chat/user/comment.action",dataType:"json",data:{cid:i.apiInit.cid,visitorId:i.apiInit.uid,score:p,solved:j,tag:g,robotFlag:T,remark:m,type:t,commentType:y},success:function(e){if(1===e.status){var t={score:p,solved:j};if(r.trigger("sendArea.toPushEav",t),A(),"push"==a.from)r.trigger("listMsg.closePushEva");else{var s={type:"system",status:"evaluate",data:{content:u.T0025}};r.trigger("sendArea.sendAreaSystemMsg",s)}c.show(u.T0032),a&&a.resultFlag&&(window.parent!==window?(window.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*"),2===i.apiConfig.pageCloseFlag&&d({type:"post",url:"/v2/chat-web/user/out.action",dataType:"json",data:{uid:i.apiInit.uid},success:function(e){r.trigger("core.sessionclose",999)}})):(window.close(),window.location.href="about:blank"))}else c.show(u.T0033)},error:function(){c.show(u.T0033)}}),setTimeout(function(){v=!1},3e3)}},S=function(){n.find(".js-evaluatelayer").css("display","block"),n.find(".js-evaluateDialog").css("display","block")},A=function(){n.find(".js-evaluatelayer").css("display","none"),n.find(".js-evaluateDialog").css("display","none"),setTimeout(function(){$(".js-evaluateArea").remove()},500)},M=function(){Alert.show()},L=function(){n.find(".js-noques").on("click",x),n.find(".js-isques").on("click",function(){h=!0,p=5,n.find(".js-submitTheme").css("background",f),$(this).addClass("okactive"),$(this).css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-noques").removeClass("noactive"),n.find(".js-noques").css({background:"#fff",border:"1px solid #ddd",color:"#8a9699"}),n.find(".model-body-extend").html(""),_()})},_=function(){var e=$(".js-mainBox").width(),t=$(".js-mainBox").height(),i=n.find(".js-evaluateDialog").height();t>i?n.find(".js-evaluateDialog").css({left:(e-360)/2+"px",top:(t-i)/2+"px"}):(n.find(".js-evaluateDialog").css({left:(e-360)/2+"px",top:"0px","overflow-y":"scroll"}),n.find(".js-evaluateDialog").height(t+"px"))},P=function(){h=!0,n.find(".js-isques").addClass("okactive"),n.find(".js-isques").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-noques").removeClass("noactive"),n.find(".js-noques").css({background:"#fff",border:"1px solid #ddd",color:"#8a9699"}),n.find(".model-body-extend").html(""),p=5},D=function(){},B=function(){n.undelegate(),n.delegate(".js-tag","click",function(){$(this).hasClass("active")?($(this).removeClass("active"),$(this).css({background:"#fff",color:"#8a9699",border:"1px solid #e0e9e8"})):($(this).addClass("active"),$(this).css({background:f,color:"#fff",border:"1px solid "+f}))}),n.delegate(".js-evaluateSubmit","click",C),n.delegate(".js-evaluateClose","click",function(){A(),r.trigger("sendArea.reTopushEav")}),n.delegate(".js-evaluatelayer","click",function(){A(),r.trigger("sendArea.reTopushEav"),setTimeout(function(){$(".js-evaluateArea").remove()},500)}),n.delegate(".isSolve .js-solved","click",function(){$(this).hasClass("solveActive")||$(this).hasClass("isSatisfactionForEva")||($(this).addClass("solveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".isSolve .js-unSolved").removeClass("unsolveActive").css({background:"#fff",border:"1px solid #d6dbe5",color:"#8b98ad"}))}),n.delegate(".isSolve .js-unSolved","click",function(){$(this).hasClass("unsolveActive")||$(this).hasClass("isSatisfactionForEva")||($(this).addClass("unsolveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".isSolve .js-solved").removeClass("solveActive").css({background:"#fff",border:"1px solid #d6dbe5",color:"#8b98ad"}))}),n.delegate(".isSatisfactionForEva .js-solved","click",function(){$(this).hasClass("solveActive")||($(this).addClass("solveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".isSatisfactionForEva .js-unSolved").removeClass("unsolveActive").css({background:"#fff",border:"1px solid #d6dbe5",color:"#8b98ad"}))}),n.delegate(".isSatisfactionForEva .js-unSolved","click",function(){$(this).hasClass("unsolveActive")||($(this).addClass("unsolveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".isSatisfactionForEva .js-solved").removeClass("solveActive").css({background:"#fff",border:"1px solid #d6dbe5",color:"#8b98ad"}))}),n.delegate(".js-noevaluateSubmit","click",function(){a&&a.resultFlag&&(A(),window.parent!==window?(window.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*"),2===i.apiConfig.pageCloseFlag&&d({type:"post",url:"/v2/chat-web/user/out.action",dataType:"json",data:{uid:i.apiInit.uid},success:function(e){r.trigger("core.sessionclose",999)}})):(window.close(),window.location.href="about:blank"))})},N=function(){$evaluate=$(".js-evaluate")},R=function(e){N(),0===t?(w(),L(),P()):(I(),D()),B(),c=c(i),"push"==a.from},O=function(){d({type:"get",url:"/v2/chat/user/satisfactionMessage.action",dataType:"json",data:{uid:i.apiInit.uid},success:function(e){1===e.status&&(b=e.data,R())},error:function(){c.show(""),setTimeout(function(){$(".js-evamsg").remove()},3e3)}})};O(),this.modeAlert=M}t.exports=a},{"../../../common/util/listener.js":33,"../../../common/util/monitAjax.js":35,"../../../common/util/msgReminder.js":36,"../util/showTip.js":73,"./template.js":59}],53:[function(e,t,i){t.exports={".bmp":"image",".jpg":"image",".JPG":"image",".jpeg":"image",".JPEG":"image",".png":"image",".PNG":"image",".gif":"image",".GIF":"image",".txt":"txt",".TXT":"txt",".DOC":"doc",".doc":"doc",".docx":"doc",".DOCX":"doc",".pdf":"pdf",".PDF":"pdf",".ppt":"ppt",".PPT":"ppt",".PPTX":"ppt",".pptx":"ppt",".xls":"xls",".XLS":"xls",".xlsx":"xls",".XLSX":"xls",".RAR":"rar",".rar":"rar",".ZIP":"rar",".zip":"rar",".swj":"swj",".eml":"eml",".msb":"msb",".ssu":"ssu",".SSU":"SSU",".mp3":"player",".MP3":"player",".mp4":"player",".MP4":"player",".wma":"player",".WMA":"player",".WMV":"player",".wmv":"player",".rmvb":"player",".RMVB":"player"}},{}],54:[function(e,t,i){t.exports={txt:"//img.sobot.com/yun/attachment/fileTypeImages/icon_txt.gif",doc:"//img.sobot.com/yun/attachment/fileTypeImages/icon_doc.gif",pdf:"//img.sobot.com/yun/attachment/fileTypeImages/icon_pdf.gif",ppt:"//img.sobot.com/yun/attachment/fileTypeImages/icon_ppt.gif",xls:"//img.sobot.com/yun/attachment/fileTypeImages/icon_xls.gif",rar:"//img.sobot.com/yun/attachment/fileTypeImages/icon_rar.gif",player:"//img.sobot.com/yun/attachment/fileTypeImages/icon_mp3.gif"}},{}],55:[function(e,t,i){var a=function(t,i,a){var s,n,o,r,l,c,d,u,n,f,p,g,m,v,h,y,j,T,b,w,x,I,F,k,C,S,A,M,L,_,P,D,B,N,R,O=e("../../../common/util/listener.js"),z=e("../../../common/mode/currentState.js"),E=e("../util/qqFace.js"),H=e("./uploadImg.js"),q=e("./leaveMessage.js"),W=e("./evaluate.js"),U=e("./template.js"),G=e("../util/modal/dialog.js"),Z=e("./switchRobot.js"),V={},J=e("../../../common/comm.js"),Q=!1,K=!1,X=0,Y="",ee=function(){var e=j.val();if(0==e.length||/^\s+$/g.test(e))return j.val(""),!1;var t=c+ +new Date,i=$("<div></div>").text(e),a=i.html();clearTimeout(n),O.trigger("sendArea.send",[{answer:a,uid:c,cid:d,dateuid:t,date:+new Date,currentStatus:u}]),j.val(""),$inputPlaceholder.css("display","block"),ae(),clearTimeout(n),setTimeout(function(){se()},1e3)},te=function(){var e="iframe"==l.urlParams.from,t=e?320:360,i=new G({title:"",footer:!1,width:t,source:"capture"});i.setInner(U.captureDialogTemplate),i.show(),e&&$(".capture-outer").css({width:t})},ie=function(){clearInterval(n),n=setTimeout(function(){var e=j.val();s({type:"post",url:"/v2/chat/user/input.action",dataType:"json",data:{cid:d,uid:c,content:e}})},200)},ae=function(){var e=j.val(),t=e.length,i=$("<div></div>").text($(".js-inputMsg").val());if(B.html(i.html()),setTimeout(function(){var e=B.height();e<160?$(".js-inputMsg").css({height:e}):$(".js-inputMsg").css({height:e,"overflow-y":"scroll"})},5),X&&ie(),t>0?y.css("background",g):y.css("background","#e0e9e8"),l.apiConfig.support&&"robot"===u){if(0==e.length||/^\s+$/g.test(e))return se(),!1;clearInterval(o),o=setTimeout(function(){s({type:"post",url:"/v2/chat-web/user/robotGuess.action",dataType:"json",data:{uid:c,question:e,robotFlag:l.urlParams.robotFlag||l.apiConfig.robotFlag||""},success:function(e){if(1==e.status){se();var t={respInfoList:e.respInfoList};if(e.respInfoList.length>0){respInfoListTemp=doT.template(U.respInfoList)(t),F.append(respInfoListTemp);var i=F.find(".js-respInfoList").height(),a=20;F.find(".js-respInfoList").css({top:-+(i+a)+"px"})}else se()}}})},500)}},se=function(){F.find(".js-respInfoList").remove()},ne=function(e){if(13==e.keyCode)return ee(),!1},oe=function(e){u=e,"human"===u?(X=1,M.show(),A.show(),S.show(),x.show(),I.show(),se()):"robot"===u&&(X=0,M.hide(),A.hide(),S.hide(),x.show(),I.show())},re=function(){0==K&&(K=!0,O.trigger("sendArea.artificial"),setTimeout(function(){K=!1},2e3))},le=function(e){"transfer"!==e.status&&"hide"!==e.action||(j.css("display","block"),j.html()&&$inputPlaceholder.css("display","block"),B.html("").css("visibility","hidden"),$inputPlaceholder.html(l.apiConfig.customDoc))},ce=function(e){"transfer"!==e.status&&"hide"!==e.action||O.trigger("sendArea.hideMsgBotBtn"),"blacklist"===e.status&&O.trigger("sendArea.robotOverTimeHandler")},de=function(){V.hide()},ue=function(){setTimeout(function(){K=!1,T.trigger("click")},10)},fe=function(e){var t=document.getElementById("js-inputMsg"),i=-1;if(t.selectionStart||0==t.selectionStart)i=t.selectionStart;else{var a=document.selection.createRange();a.moveStart("character",-t.value.length),i=a.text.length}var s=j.val().substring(0,i),n=j.val().substring(i),o=s+e+n;$(j).val(o);var r=(s+e).length;if(t.setSelectionRange)t.setSelectionRange(r,r),t.focus();else if(t.createTextRange){var a=t.createTextRange();a.collapse(!0),a.moveEnd("character",r),a.moveStart("character",r),a.select()}ae(),$inputPlaceholder.css("display","none")},pe=function(e){for(var t=e.originalEvent,i=0,a=t.clipboardData.items.length;i<a;i++){var s=t.clipboardData.items[i];"file"===s.kind&&(e.preventDefault(),uploadFile.onFormDataPasteHandler(s,c,d))}},ge=function(){uploadFile.onChangeHandler(c,d)},me=function(e){ve(e),O.trigger("sendArea.send",[{answer:f,uid:e.uid,cid:e.cid,dateuid:e.dateuid,date:+new Date,currentStatus:u,msgSendType:m,fileurl:e.url}]),j.focus()},ve=function(e){if(he(e)){m=e.browserVersion&&"ie-"===e.browserVersion?"ie-file":"file";var t="fileOther";switch(e.filetype){case"rar":t="fileRar";break;case"txt":t="fileTxt";break;case"doc":t="fileDoc";break;case"pdf":t="filePdf";break;case"ppt":t="filePpt";break;case"xls":t="fileXls";break;default:t="fileOther"}var i={url:e.url,dateuid:e.token,filesize:e.filesize,fileIcoClass:t,filename:e.filename+e.extension};f=doT.template(U.tranfiletype)(i)}},he=function(e){switch(e.filetype){case"image":m=e.browserVersion&&"ie-"===e.browserVersion?"ie-image":"image";var t={url:e.url};return f=doT.template(U.fileImage)(t),!1;default:return!0}},ye=function(e){0==Q&&(Q=!0,s({type:"post",url:"/v2/chat/user/isComment.action",dataType:"json",data:{cid:l.apiInit.cid,uid:l.apiInit.uid,type:X},success:function(t){if(isEvaluated=t.isComment,1==isEvaluated){if("close"==e.from)return void(a.parent!==a?(a.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*"),2===l.apiConfig.pageCloseFlag&&s({type:"post",url:"/v2/chat-web/user/out.action",dataType:"json",data:{uid:l.apiInit.uid},success:function(e){O.trigger("core.sessionclose",999)}})):(a.close(),a.location.href="about:blank"));var i={type:"system",status:"evaluate",data:{content:p.T0025}};O.trigger("sendArea.sendAreaSystemMsg",i)}else if(0==isEvaluated)W(X,l,e,Y);else{if("close"==e.from)return void(a.parent!==a?(a.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*"),2===l.apiConfig.pageCloseFlag&&s({type:"post",url:"/v2/chat-web/user/out.action",dataType:"json",data:{uid:l.apiInit.uid},success:function(e){O.trigger("core.sessionclose",999)}})):(a.close(),a.location.href="about:blank"));var i={type:"system",status:"evaluate",data:{content:p.T0026}};O.trigger("sendArea.sendAreaSystemMsg",i)}}}),setTimeout(function(){Q=!1},1e3))},je=function(e){switch(e){case-3:break;case-2:j.css("display","none"),$inputPlaceholder.css("display","none"),B.html(l.apiConfig.waitDoc).css("visibility","visible");break;case-4:case-1:case 1:case 2:case 3:case 5:case 4:case 6:case 7:case 8:case 999:F.remove(),e!=-1&&3!=e||(L.remove(),e==-1&&1!=l.urlParams.msgflag&&(l.urlParams.isLeaveCustomSysFlag?a.open(l.urlParams.leaveCustomUrl):Ie())),O.trigger("sendArea.revmoveChatSwitch"),l.urlParams.msgflag&&$(".js-endleaveMessage").remove(),l.urlParams.satDegree_A||$(".js-endEvaluate").remove(),setTimeout(function(){Te()},100),k.css("display","block")}},Te=function(){var e=0;switch($(".js-endavgWidth").each(function(){"block"===$(this).css("display")&&(e+=1)}),e){case 1:D.css("width","100%");break;case 2:D.css("width","50%");break;case 3:D.css("width","33.333%")}},be=function(e){var t=e.originalEvent;if(!t.data){var i=JSON.parse(t.data);"human"!=z.getCurrentState()&&"auto"==t.data.type&&(l.urlParams.autoManual=!0,l.urlParams.aid=i.aid,re())}},we=function(){var e=$(this).attr("title"),t=c+ +new Date;O.trigger("sendArea.send",[{requestText:e,answer:e,uid:c,cid:d,dateuid:t,date:+new Date,currentStatus:u}]),se(),j.val(""),$inputPlaceholder.css("display","block"),ae()},xe=function(){if("iframe"==l.urlParams.from){var e=a.location.href.replace(/#[\S]+$/,"").replace(/(&|\?)cid=[^&]+/,"").replace(/(&|\?)tnk=[^&]+/,"").replace(/(&|\?)autoManual=[^&]+/,"");a.location.href=e+"&tnk="+ +new Date}else{var e=a.location.href;e=e.replace(/(&|\?)autoManual=[^&]+/,"").replace(/#[\S]+$/,""),e=e.replace(/(&|\?)tnk=[^&]+/,""),e+="&tnk="+ +new Date,a.location.href=e}},Ie=function(){s({type:"post",url:"/v2/chat-web/user/getWsTemplate.action",dataType:"json",data:{uid:l.apiInit.uid,source:0,channelFlag:l.urlParams.channelFlag||""},success:function(e){var t=e||[],i=doT.template(U.groupTemplate)({list:t});r=$(i),$(".js-mainBox").append(r),r.delegate(".js-item","click",function(){r.remove();var e=$(this).data("id");Fe(e)}),r.delegate(".js-open-url","click",function(e){a.location.href="https://mall.bilibili.com/neul-next/index.html?page=serviceticket_newService"}),r.find(".js-group-outer").animate({right:"0"}),r.delegate(".js-cancel-btn,.js-group-layer","click",function(){r.find(".js-group-outer").animate({right:"-390px"},function(){r.remove()})})}})},Fe=function(e){l.urlParams.templateId=e,s({url:"/v2/chat/data/invokeOtherByUser.action",dataType:"json",type:"get",data:{uid:l.apiInit.uid,url:"basic-set/getCusMsgTemplateConfig/4",method:"get",param:JSON.stringify({templateId:e})}}).success(function(e){l.urlParams.msgTxt=e.item.msgTxt,l.urlParams.msgTmp=e.item.msgTmp,l.urlParams.emailFlag=e.item.emailFlag,l.urlParams.emailShowFlag=e.item.emailShowFlag,l.urlParams.enclosureFlag=e.item.enclosureFlag,l.urlParams.enclosureShowFlag=e.item.enclosureShowFlag,l.urlParams.telFlag=e.item.telFlag,l.urlParams.telShowFlag=e.item.telShowFlag,l.urlParams.ticketShowFlag=e.item.ticketShowFlag,l.urlParams.ticketTypeFlag=e.item.ticketTypeFlag,l.urlParams.ticketTypeId=e.item.ticketTypeId,q(l)})},ke=function(){var e=$(this).val();""===e?$(this).next().css("display","block"):$(this).next().css("display","none"),e&&(_length=e.length)},Ce=function(e){var t=$(e).val();""===t?$(e).next().css("display","block"):$(e).next().css("display","none"),t&&(_length=t.length)},Se=function(){$inputMsg.val(""),$inputPlaceholder.html(l.apiConfig.customDoc),$inputPlaceholder.css("display","block")},Ae=function(){Z(l)},$e=function(t){l=t[0],s=e("../../../common/util/monitAjax.js")(l),p=l.language.text,g=l.userInfo.color?l.userInfo.color:l.apiConfig.color,T.css("color",g);var i=l.urlParams.wurl.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")||"";i=i.indexOf("http")?"javascript: void(0);":i;var n=l.urlParams.wurlOpenStyle;i&&1==l.urlParams.isCustomSysFlag&&(T.remove(),n?S.before('<a class="chatSwitch js-sendChatSwitch" target="_blank" style="color:'+g+'" href="'+i+'">'+p.T0060+"</a>"):S.before('<a class="chatSwitch js-sendChatSwitch" target="_parent" style="color:'+g+'" href="'+i+'">'+p.T0060+"</a>"),T=$(".js-sendChatSwitch"),O.trigger("sendArea.wurlHandler",{wurl:i,wurlOpenStyle:n})),l.urlParams.isLeaveCustomSysFlag?$(".js-mainBox").delegate(".js-leaveMessage","click",function(){a.open(l.urlParams.leaveCustomUrl)}):$(".js-mainBox").delegate(".js-leaveMessage","click",Ie);var o=l.urlParams.chatConnectButton;"1"==o&&T.css("display","none"),$inputPlaceholder.html(l.apiConfig.robotDoc),M.attr("title",p.T0049),S.attr("title",p.T0050),I.attr("title",p.T0052),x.attr("title",p.T0051),N.text(p.T0057),Le(),Me()},Me=function(){V=E(a,l),uploadFile=H(t,i,a,l),!l.urlParams.autoManual||1!=l.apiConfig.type&&3!=l.apiConfig.type||setTimeout(re,100),0==l.urlParams.designButton&&$(".js-powBox").css("visibility","hidden"),l.urlParams.isMessageFlag||$(".js-sendLeaveMessage").remove(),2==l.apiConfig.msgToTicketFlag&&$(".js-sendLeaveMessage").remove(),l.apiConfig.isUploadFlag||$(".js-uploadFile").remove(),l.urlParams.isFeedBackFlag||$(".js-sendEvaluate").remove(),l.apiConfig.robotSwitchFlag&&$(".js-switchRobot").css("display","block")},Le=function(){c=l.apiInit.uid,d=l.apiInit.cid},_e=function(){v=$(document.body),h=$(t),y=h.find(".js-send-btn"),j=h.find(".js-inputMsg"),T=h.find(".js-chatSwitch"),b=h.find(".js-voiceCalls"),w=h.find(".js-upload"),A=h.find(".js-capture"),x=h.find(".js-leaveMessage"),I=h.find(".js-evaluate"),F=h.find(".js-footerOn"),k=h.find(".js-footerOff"),C=h.find(".js-newMessage"),S=h.find(".js-uploadFile"),M=h.find(".js-emotion"),L=h.find(".js-endEvaluate"),_=h.find(".js-endnewMessage"),P=h.find(".js-endleaveMessage"),D=h.find(".js-endavgWidth"),B=h.find(".js-textareaPre"),$inputPlaceholder=h.find(".js-inputPlaceholder"),N=h.find(".js-sobotTitle"),$inputMsg=h.find(".js-inputMsg"),R=h.find(".js-respInfoBtn"),$switchRobot=h.find(".js-switchRobot")},Pe=function(){O.on("core.onload",$e),O.on("core.buttonchange",ce),O.on("core.grouplist",ue),$(".js-capture").on("click",te),O.on("core.system",le),y.on("click",ee),j.on("keydown",ne),J.detectEventSupport("input")?j.on("input",ae):setInterval(function(){ae()},200),$(".js-mainBox").delegate(".js-chatSwitch","click",re),j.on("focus",de),O.on("sendArea.gotoxy",fe),O.on("sendArea.uploadImgUrl",me),w.on("change",ge),I.on("click",ye),O.on("listMsg.toEvaluate",ye),O.on("listMsg.artificial",Se),C.on("click",xe),F.delegate(".js-respInfoBtn","click",we),O.on("core.sessionclose",je),O.on("listMsg.openleaveMsgPage",Ie),$(a).on("message",be),O.on("core.transfersuccess",function(e){Y=e.data.aname,j.on("paste",pe),X=1}),O.on("listMsg.showChatSwitch",function(){T.css("display","block")}),J.detectEventSupport("input")?j.on("input",ke):setInterval(function(){Ce(j)},100),$inputPlaceholder.on("click",function(){j.focus()}),v.on("click",se),$switchRobot.on("click",Ae)},De=function(){_e(),Pe(),O.on("core.statechange",oe)};De()};t.exports=a},{"../../../common/comm.js":1,"../../../common/mode/currentState.js":12,"../../../common/util/listener.js":33,"../../../common/util/monitAjax.js":35,"../util/modal/dialog.js":69,"../util/qqFace.js":72,"./evaluate.js":52,"./leaveMessage.js":57,"./switchRobot.js":58,"./template.js":59,"./uploadImg.js":60}],56:[function(e,t,i){var a=function(t,i){var a=(e("./template.js"),e("../../../common/util/monitAjax.js")(i),e("../../../common/util/listener.js")),s=!1,n="",o=function(e){e.stopPropagation(),n=$(this).attr("data-key"),s?(t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),s=!1,t.find(".js-classDropdownAreaFixed").removeClass("openActive"),t.find(".js-classDropdown-btn").removeClass("checkActive"),t.find(".classIfyTitleIcn").css("background-position","-3279px 13px")):(t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),$(this).find(".dropListTitleIcn").css("background-position","-3320px 13px"),$(this).addClass("checkActive"),$(this).next().addClass("openActive"),t.find(".js-classDropdownAreaFixed").removeClass("openActive"),t.find(".js-classDropdown-btn").removeClass("checkActive"),t.find(".classIfyTitleIcn").css("background-position","-3279px 13px"),s=!0)},r=function(e){e.stopPropagation();var i=$(this).attr("data-nodeFlag")||"";if("1"!==i){var o=$(this).parent().parent();if(o.find(".js-dropdown-title").html($(this).html()),n){var r=$(this).attr("dataId")||"",l=$(this).attr("dataName")||"",c={key:n,dataId:r,dataName:l};a.trigger("sendArea.definedFieldResult",c)}else{var d=$(this).attr("data-fieldId")||"",u=$(this).attr("dataValue")||"",l=($(this).attr("fieldType")||"",$(this).attr("dataName")||"");if(u)var c={fieldId:d,dataValue:u,dataName:l,type:"definedList"};else{var f="00:00";f=o.parent().find(".js-definedHour").html()+":"+o.parent().find(".js-definedMinutes").html();var c={fieldId:d,dataValue:f,dataName:f,type:"time"}}a.trigger("sendArea.definedFieldResult",c)}t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),
s=!1}},l=function(){s=!1,t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),t.find(".js-classDropdownAreaFixed").removeClass("openActive"),t.find(".js-classDropdown-btn").removeClass("checkActive"),t.find(".classIfyTitleIcn").css("background-position","-3279px 13px")},c=function(){},d=function(){},u=function(){l()},f=function(){t.delegate(".js-dropdown-btn","click",o),t.delegate(".js-dropdownLi","click",r),$(document.body).on("click",function(){l()}),a.on("sendArea.closeAlldropMenu",u)},p=function(){},g=function(){p(),d(),f()};g(),this.expand=c,this.collapse=l};t.exports=a},{"../../../common/util/listener.js":33,"../../../common/util/monitAjax.js":35,"./template.js":59}],57:[function(e,t,i){var a=function(t,i){var a,s,n,o,r,l,c,d,u,f,p,g,m,v,h,y,j,T,b,w,x=e("../util/load.js")(),I=e("../../../common/comm.js"),F=e("../../../common/util/listener.js"),k=e("../../../common/util/rsaSign.js"),C=e("../config/config.json"),S=e("../util/showTip.js"),A=e("./leaveDropdown.js"),M=e("./dropdownClassify.js"),L=e("../../../common/util/monitAjax.js")(t),_=e("./template.js"),P=!1,D=!1,B=!1,N=!1,R=!1,O=!1,z=!0,E=60,H=60,q=[],W=!1,U=0,G=0,Z=0,V=0,s=t.apiInit.uid,J=(t.apiInit.cid,t.userInfo.color?t.userInfo.color:t.apiConfig.color),Q=t.language.lan,l=t.language.text,K=[],X={},Y="",ee=t.urlParams.leaveMsgGroupId||"",te=navigator.userAgent.toLowerCase(),ie={},ae=[],se={score:5},ne=function(){$leaveMsglayer.removeClass("show"),$("#leaveMsg").animate({right:"-390px"},function(){a.remove()}),$sureWindow.removeClass("show"),$sureWindowlayer.removeClass("show"),$(".gt_holder").remove(),clearInterval(G),clearInterval(Z),clearInterval(V)},oe=function(){$(".js-leaveMsglayer").addClass("show"),$("#leaveMsg").animate({right:"0"}),i&&($(".leaveMsgShowtem").css("display","none"),$(".leaveMsgRecord").css("display","block"),$(".js-titleTwo").addClass("active").siblings().removeClass("active")),t.apiConfig.ticketShowFlag||$(".js-titleTwo").css("display","none")},re=function(){var e=d.val();return""===e?(_text=l.T0037,$leaveMsgDetailTip.html(_text).css("visibility","inherit"),P=!1,!1):($leaveMsgDetailTip.css("visibility","hidden"),P=!0,!0)},le=function(){var e=a.find(".js-leaveMsgDetail_msg").val();return""===e?(_text=l.T0146,$leaveMsgDetailTip.html(_text).css("visibility","inherit"),!1):($leaveMsgDetailTip.css("visibility","hidden"),!0)},ce=function(){var e=$(".js-email").val(),t=/^([a-zA-Z0-9]+([-_\.][a-zA-Z0-9]+)*(?:@(?!-))(?:(?:[-a-zA-Z0-9]*)(?:[a-zA-Z0-9](?!-))(?:\.(?!-)))+[a-zA-Z0-9]{2,})$/;if(o){if(e&&t.test(e))return v.css("visibility","hidden"),D=!0,!0;var i=l.T0036;return""===e&&(i=l.T0035),v.html(i).css("visibility","inherit"),D=!1,!1}return e&&!t.test(e)?(v.html(i).css("visibility","inherit"),D=!1,!1):(v.css("visibility","hidden"),D=!0,!0)},de=function(){var e=/(^1\d{10}$)/,t=$(".js-telephone").val(),i=l.T0045;if(B=!1,n){if(!t||!e.test(t))return h.html(i).css("visibility","inherit"),B;h.css("visibility","hidden")}else{if(t&&!e.test(t))return h.html(i).css("visibility","inherit"),B;h.css("visibility","hidden")}return B=!0,!0},ue=function(){r?$(".js-leaveMsgFileStyle").length?N=!0:(N=!1,$enclosureTip.html(l.T0076).css("visibility","inherit")):N=!0},fe=function(e){for(var i=0,n=0;n<K.length;n++)X[K[n].id].fillFlag&&""==X[K[n].id].value?(a.find(".js-errorTip"+X[K[n].id].id).css("visibility","inherit"),O=!1):(K[n].value=X[K[n].id].value,a.find(".js-errorTip"+X[K[n].id].id).css("visibility","hidden"),i++);if(0!=K.length&&i!=K.length||(O=!0),2==t.urlParams.ticketTypeFlag&&(Y=t.urlParams.ticketTypeId),1==t.urlParams.ticketTypeFlag&&""===Y?(R=!1,a.find(".js-errorQuestionClass").css("visibility","inherit")):(R=!0,a.find(".js-errorQuestionClass").css("visibility","hidden")),re()||(P=!1),ce()||(D=!1),de()||(B=!1),ue(),W)return void S.show(l.T0090);if(e&&1===e&&(U=0),U>0)return $commitSureWindow.animate({opacity:"1"}).addClass("show"),void $sureWindowlayer.animate({opacity:"1"}).addClass("show");if(P&&D&&B&&N&&O&&R&&z){for(var o=d.val()||"",r=u.val()||"",f=p.val()||"",g=0,m=0,v=t.sysNum,h="",y=[],n=0;n<q.length;n++)""!==q[n]&&y.push(q[n]);if(o.length>5e3)return void S.show(Q.L10042);if(h=y.join(";"),b=JSON.stringify(K),t.urlParams.enclosureShowFlag&&t.urlParams.enclosureFlag&&!h)return void $enclosureTip.html(l.T0076).css("visibility","inherit");if(c)$(".gt_holder").addClass("gt_show").removeClass("gt_hide");else{z=!1;var j={uid:s,companyId:v,ticketContent:o,customerEmail:r,customerPhone:f,ticketFrom:g,customerSource:m,fileStr:h,customerNick:t.apiInit.uname,groupId:t.urlParams.leaveMsgSendGroupIdFlag?ee:"",extendFields:b,ticketTypeId:Y,templateId:t.urlParams.templateId||1};L({type:"post",url:"/v2/chat/data/postMsg.action",dataType:"json",data:j,success:function(e){if(e&&"000000"==e.retCode){var t={type:"system",status:"leaveMsgComplete",data:{content:l.T0056}};F.trigger("sendArea.sendAreaSystemMsg",t),d.val(""),u.val(""),p.val(""),ne(),S.show(l.T0032),setTimeout(function(){z=!0},5e3),location.reload()}else S.show(Q.L10038)},error:function(){S.show(l.T0033)}})}}},pe=function(){$(this).css({border:"1px solid #acbbbf"})},ge=function(){$(this).css({border:"1px solid #e0e9e8"})},me=function(){""!==d.val()||""!==u.val()||""!==p.val()||$(".js-leaveMsgFileStyle").length?($sureWindow.addClass("show"),$sureWindow.animate({opacity:"1"}),$sureWindowlayer.addClass("show"),$sureWindowlayer.animate({opacity:"1"})):ne()},ve=function(){var e=$(this).val();""===e?$(this).next().css("visibility","inherit"):$(this).next().css("visibility","hidden"),e&&(_length=e.length)},he=function(e){var t=$(e).val();""===t?$(e).next().css("visibility","inherit"):$(e).next().css("visibility","hidden"),t&&(_length=t.length)},ye=function(){var e=0;e>200&&$(this).val($(this).val().substring(0,200))},je=function(){var e=$(".js-mainBox").height()-E-H;$(".leaveMsgBody").height(e)},Te=function(){L({type:"post",url:"/v2/chat/data/isMessage.action?t="+(new Date).getTime(),dataType:"json",data:{uid:s,msgFlag:"0"},success:function(e){c=0,c&&e.resStr&&(e.resStr=JSON.parse(e.resStr),initGeetest({gt:e.resStr.gt,challenge:e.resStr.challenge,offline:!e.resStr.success,product:"popup"},be))}})},be=function(e){e.onSuccess(function(){for(var i=e.getValidate(),a=d.val()||"",n=u.val()||"",o=p.val()||"",r=0,c=t.sysNum,f="",g=[],m=0;m<q.length;m++)""!==q[m]&&g.push(q[m]);return f=g.join(";"),a.length>5e3?void S.show(Q.L10042):void L({url:"/v2/chat/data/postMsgAfterVerify.action",type:"post",dataType:"json",data:{uid:s,companyId:c,source:r,ticketFrom:r,customerSource:r,customerPhone:o,customerEmail:n,ticketContent:a,msgFlag:"0",fileStr:f,geetest_challenge:i.geetest_challenge,geetest_validate:i.geetest_validate,geetest_seccode:i.geetest_seccode,customerNick:t.apiInit.uname,groupId:t.urlParams.leaveMsgSendGroupIdFlag?ee:"",extendFields:b,ticketTypeId:Y,templateId:t.urlParams.templateId||1},success:function(e){if(e&&"000000"==e.retCode){$(".gt_holder").remove();var t={type:"system",status:"leaveMsgComplete",data:{content:l.T0056}};F.trigger("sendArea.sendAreaSystemMsg",t),ne(),S.show(l.T0032),location.reload()}else S.show(Q.L10038)}})}),e.appendTo(".js-popup-captcha-pc"),we()},we=function(){var e=$(".js-mainBox").width(),t=$(".js-mainBox").height();$("#popup-captcha-pc").css({top:(t-250)/2+"px",left:(e-260)/2+"px"})},xe=function(){if($(".js-leaveMsgFileStyle").length>4)return S.show(l.T0077),void Ae();if(window.FormData){var e=+new Date,t=$leaveMsgUploadBtn[0],i=$leaveMsgUploadBtn.val(),a=i.substr(i.lastIndexOf(".")),s=i.substring(i.lastIndexOf("\\")+1,i.lastIndexOf("."));if(Se(a,s)){var n=t.files[0],o=n.size;if(o<1024)o+="B";else if(o<1048576)o=(o/1024).toFixed(2)+"KB";else{if(o=(o/1048576).toFixed(2),o>20)return S.show(l.T0082),void Ae();o+="M"}Ie(n,a,s,o,e)}}else ke(),$sureWindowlayer.addClass("show"),$sureWindowlayer.removeClass("show")},Ie=function(e,t,i,s,n){var o={filename:i,extension:t,filesize:s,date:n,languageText:l},r=doT.template(_.leaveMsgFileStyle)(o);a.find(".js-enclosureTip").before(r),Fe(e,t,i,n)},Fe=function(e,i,s,n){var o=(t.apiConfig.uid+n,new XMLHttpRequest),r=new FormData;r.append("file",e),r.append("type","msg"),r.append("pid",t.apiInit.pid),r.append("countTag",1),r.append("source",0),r.append("cid",t.apiInit.cid),r.append("uid",t.apiInit.uid);var c=k.getRsaSign();o.open("post","/v2/chat/newwebchat/fileUploadForPostMsgBypc.action?sign="+c);var d=new FileReader;d.readAsDataURL(e),d.onload=function(e){o.send(r)},a.delegate(".js-leaveMsgFileClose"+n,"click",function(){o.abort(),W=!1;var e=$(this).attr("data-url");if(e){var t=q.join(";");t=t.replace(e,""),q=t.split(";")}$(this).parent().remove(),Ae(),U--,a.find(".js-leaveMsgFileClose"+n).attr("data-url",e)}),o.onreadystatechange=function(e){if(4==e.target.readyState){if(200==e.target.status){var t=JSON.parse(e.target.response).url;q.push(t),$enclosureTip.css("visibility","hidden"),a.find(".js-leaveMsgFileClose"+n).attr("data-url",t)}else a.find(".js-leaveMsgFile"+n).find(".fileTip").html(l.T0075).addClass("fileTipShow"),U++;Ae()}},o.upload.addEventListener("progress",function(e){if(e.lengthComputable){W=!0;var t=Math.round(100*e.loaded/e.total),i=t.toString();a.find(".js-leaveMsgProcess"+n).css("width",i+"%"),"100"==i&&(W=!1,a.find(".js-leaveMsgProcess"+n).parent().remove())}else a.find(".js-leaveMsgProcess"+n).parent().remove()},!1)},ke=function(){var e=a.find(".js-leavemsgfileinfo");e.find('input[name="pid"]').val(t.apiInit.pid);var i=$leaveMsgUploadBtn.val(),s=i.substr(i.lastIndexOf(".")),n=i.substring(i.lastIndexOf("\\")+1,i.lastIndexOf(".")),o=+new Date;t.apiConfig.uid+o;if(Se(s,n)){var r=Ce(s,n),l="iframe"+r;e.attr("target",l);var c=k.getRsaSign();e.attr("action","/v2/chat/newwebchat/fileUploadForPostMsgBypc.action?sign="+c);var d=$('<iframe id="'+l+'" style="display:none;height:1000px;width:500px;" name="'+l+'" src="about:blank;"></iframe>');d.on("load",function(){var e=d[0],t=e.contentWindow.document.getElementsByTagName("body")[0].innerHTML;if(t){var i=JSON.parse(t);i.filesize===!1?(S.show(""),a.find(".js-leaveMsgFile"+r).find(".ie-uploadLoading").remove(),a.find(".js-leaveMsgFile"+r).find(".fileTip").addClass("fileTipShow"),U++):(a.find(".js-leaveMsgFile"+r).find(".ie-uploadLoading").remove(),q.push(i.url)),a.find(".js-leaveMsgFileClose"+r).attr("data-url",i.url),a.delegate(".js-leaveMsgFileClose"+r,"click",function(){var e=$(this).attr("data-url");if(e){var t=q.join(";");t=t.replace(e,""),q=t.split(";")}$(this).parent().remove(),Ae(),U--})}}),$(document.body).append(d),e.submit()}Ae()},Ce=function(e,t){var i=+new Date,s={filename:t,extension:e,date:i,languageText:l},n=doT.template(_.IframeleaveMsgFileStyle)(s);return a.find(".js-leaveMsgUpload").append(n),i},Se=function(e,t){var i="";return i=/^(.jpg|.jpeg|.png|.doc|.docx|.pdf|.xls|.xlsx|.rar|.zip|.otd)$/,!!i.test(e)||(e&&S.show(l.T0078),Ae(),!1)},Ae=function(){a.find(".js-leaveMsgUploadBtn").val(""),a.find(".js-leavemsgfileinfo")[0].reset()},$e=function(){var e=$(this).attr("data-fieldId"),t=[],i=[];$(this).find(".js-userCheckIco"+e).hasClass("userCheckIcoActive")?($(this).addClass("userCheck"),$(this).find(".js-userCheckIco"+e).removeClass("userCheckIcoActive")):($(this).removeClass("userCheck"),$(this).find(".js-userCheckIco"+e).addClass("userCheckIcoActive")),$(".js-userCheckIco"+e).each(function(){$(this).hasClass("userCheckIcoActive")&&(t.push($(this).parent().attr("dataValue")),i.push($(this).parent().attr("dataName")))}),t=t.join(","),i=i.join(",");var a={fieldId:e,dataValue:t,dataName:i};X[a.fieldId].value=a.dataValue},Me=function(){var e=$(this).attr("data-fieldId"),t=$(this).attr("dataValue"),i=$(this).attr("dataName");$(".js-userOptIco"+e).removeClass("userOptIcoActive"),$(".js-userOptIco"+e).parent().addClass("userOpt"),$(this).removeClass("userOpt").find(".js-userOptIco"+e).addClass("userOptIcoActive");var a={fieldId:e,dataValue:t,dataName:i};X[a.fieldId].value=a.dataValue},Le=function(){var e=$(this).attr("data-fieldId"),t=$(this).val();X[e].value=t,a.find(".js-errorTip"+e).css("visibility","hidden")},_e=function(e,t){X[t].value=e,a.find(".js-errorTip"+t).css("visibility","hidden")},Pe=function(e){e.key?(Y=e.dataId,a.find(".js-errorQuestionClass").css("visibility","hidden")):("definedList"==e.type?X[e.fieldId].value=e.dataValue:"time"==e.type&&(X[e.fieldId].value=e.dataValue),a.find(".js-errorTip"+e.fieldId).css("visibility","hidden"))},De=function(){var e=doT.template(_.evaluationDialog)(ie);$(".leaveMsglayer-wrapper").append(e),ae=ie.ticketScoreInfooList},Be=function(){$(".evaluation-layer").remove()},Ne=function(){var e=$(this).index();$(".js-start-btn").each(function(t,i){t<=e?$(i).addClass("active"):$(i).removeClass("active")}),se.score=e+1,$(".js-change-evaluation").text(ae[e].scoreExplain)},Re=function(){$("#js-text-evaluation").length>0?se.remark=$("#js-text-evaluation").val():se.remark="",$.ajax({type:"POST",url:"/v2/chat-web/data/invokeOtherByUser.action",dataType:"json",data:{uid:s,param:JSON.stringify(se),url:"ws/addTicketSatisfactionScoreInfo/4",method:"post"},success:function(e){if(e.retCode="000000"){$(".evaluation-layer").remove();var t=ae[se.score-1].scoreExplain+"("+se.score+")",i="";se.remark&&(i='<div><span style="color: #333"></span><span style="color: #888;word-break: break-all;text-align: justify">'+se.remark+"</span></div>");var a='<div style="margin-left: 23px;margin-bottom: 10px;"><div><span style="color: #333"></span><span style="color: #888">'+t+"</span></div>"+i+"</div>";$(".js-evaluation-area").before(a),$(".js-evaluation-area").remove()}}})},Oe=function(e){var i=t.urlParams.msgTxt||t.apiConfig.msgTxt,s=t.urlParams.msgTmp||t.apiConfig.msgTmp;x.load(C.basePath+"/views/sendArea/leaveMessage.html").then(function(c){var u=doT.template(c)({global:t,guide:i,leaveMsgDetail:s,languageText:l,definedField:e.items});a=$(u),$(".js-mainBox").append(a);for(var p=0;p<e.items.length;p++){var m={};m.id=e.items[p].cusFieldConfig.fieldId,m.fieldName=e.items[p].cusFieldConfig.fieldName,4==e.items[p].cusFieldConfig.fieldType?(m.fillFlag=0,m.value="00:00"):(m.fillFlag=e.items[p].cusFieldConfig.fillFlag,m.value=""),K.push(m),X[m.id]=m}He(),We(),oe(),je(),A(a,t),M(a,t),Ue(),$leaveMsgsubmit.css("background",J);t.urlParams.emailFlag||"",t.urlParams.emailShowFlag||"";1==t.urlParams.emailShowFlag?o=1==t.urlParams.emailFlag:(f.remove(),D=!0);t.urlParams.telFlag||"",t.urlParams.telShowFlag||"";1==t.urlParams.telShowFlag?(n=!0,n=0!=t.urlParams.telFlag):(g.remove(),B=!0),1==t.urlParams.enclosureShowFlag?r=0!=t.urlParams.enclosureFlag:$leaveMsgUpload.remove();var v=$txtTip.height();v>114&&d.height(v);for(var p=0,h=e.items.length;p<h;p++)3==e.items[p].cusFieldConfig.fieldType&&a.find("#dp"+e.items[p].cusFieldConfig.fieldId).datepicker().on("changeDate",function(e){var t,i,a,s=e.date;t=s.getFullYear(),i=s.getMonth()+1<10?"0"+(Number(s.getMonth())+1):s.getMonth()+1,a=s.getDate()<10?"0"+s.getDate():s.getDate(),_bir=t+"-"+i+"-"+a,$(this).val(_bir);var n=$(this).attr("data-fieldId");_e(_bir,n),$(".datepicker.dropdown-menu").hide()})})},ze=function(){var e=t.apiConfig.msgLeaveTxt,i=t.apiConfig.msgLeaveContentTxt;x.load(C.basePath+"/views/sendArea/leaveMsg.html").then(function(s){var n=doT.template(s)({global:t,msgLeaveTxt:e,leaveMsgDetail:i,languageText:l});a=$(n),$(".js-mainBox").append(a),He(),We(),oe()})},Ee=function(){var e=$(this).attr("data-fieldId"),t=$(".js-definedNumInput"+e).val();t.length>300&&(t=t.slice(0,300)),$(".js-definedNumInput"+e).val(t)},He=function(){u=a.find(".js-email"),f=a.find(".js-emailArea"),p=a.find(".js-telephone"),g=a.find(".js-telArea"),d=a.find(".js-leaveMsgDetail"),m=a.find(".js-leaveMessage"),$leaveMsgDetailTip=a.find(".js-leaveMsgDetailTip"),v=a.find(".js-emailTip"),h=a.find(".js-telephoneTip"),$leaveMsgsubmit=a.find(".js-leaveMsgsubmit"),$leaveMsglayer=a.find(".js-leaveMsglayer"),$focusStyle=a.find(".js-focusStyle"),$close=a.find(".js-close"),$txtTip=a.find(".js-txt-tip"),$sureWindow=a.find(".js-sureWindow"),$leaveclose=a.find(".js-leaveclose"),$leavecancel=a.find(".js-leavecancel"),$leavesure=a.find(".js-leavesure"),y=a.find(".js-leaveMsgHeader"),$sureWindowlayer=a.find(".js-sureWindowlayer"),$leaveMsgUploadBtn=a.find(".js-leaveMsgUploadBtn"),$leaveMsgUpload=a.find(".js-leaveMsgUpload"),$enclosureTip=a.find(".js-enclosureTip"),$commitSureWindow=a.find(".js-commitSureWindow"),$commitLeavesure=a.find(".js-commitLeavesure"),$leaveMsgBody=a.find(".js-leaveMsgBody"),$definedFields=a.find(".js-definedFields"),$userCheck=a.find(".js-userCheck"),$userOpt=a.find(".js-userOpt"),$definedNumInput=a.find(".js-definedNumInput"),$jsTitle=a.find(".js-title"),$jsTitles=a.find(".js-titles"),$descript=$(".detailed-description"),T=a.find(".bgback")},qe=function(){var e=$("<div></div>").text($(".js-leaveMsgDetail_msg").val());if(_content=e.html(),""!=_content){var i={uid:s,companyId:t.sysNum,groupId:t.urlParams.leaveMsgSendGroupIdFlag?ee:"",content:_content};z&&(z=!1,L({type:"post",url:"/v2/chat-web/user/leaveMsg.action",dataType:"json",data:i,success:function(e){if(e&&1==e.status){var t={type:"system",status:"leaveMsgComplete",data:{content:l.T0056}};F.trigger("sendArea.sendLeaveMsg",{answer:_content}),F.trigger("sendArea.sendAreaSystemMsg",t),ne(),setTimeout(function(){z=!0},5e3)}else S.show(Q.L10038)},error:function(){S.show(l.T0033)}}))}},We=function(){T.on("click",function(){$("#leaveMsg1").css("display","block"),$("#leaveMsg2").css("display","none")}),$jsTitle.on("click",function(){$(this).addClass("active").siblings().removeClass("active"),""===$(this)[0].innerHTML?(a.find(".leaveMsgShowtem").css("display","block"),a.find(".leaveMsgRecord").css("display","none")):(a.find(".leaveMsgShowtem").css("display","none"),a.find(".leaveMsgRecord").css("display","block"),j=a.find(".quectionDisc"))}),$(".clickShow").on("click",function(){$(".tubo").toggleClass("active"),$(".detailed-description").toggleClass("active")}),$close.on("click",me),$leaveMsglayer.on("click",me),$leavesure.on("click",ne),d.on("blur",re),a.find(".js-leaveMsgDetail_msg").on("blur",le),u.on("blur",ce),p.on("blur",de),$leaveMsgsubmit.on("click",fe),$focusStyle.on("focus",pe),$focusStyle.on("blur",ge),$(window).on("resize",je),d.on("input",ye),$definedNumInput.on("input",Ee),$commitLeavesure.on("click",function(){fe(1)}),a.delegate(".js-definedInput","blur",Le),F.on("sendArea.definedFieldResult",Pe),te.indexOf("ie 7")!==-1&&$leaveMsgBody.on("scroll",function(){$sureWindowlayer.addClass("show"),$sureWindowlayer.removeClass("show")}),$leaveMsgUploadBtn.on("change",xe),I.detectEventSupport("input")?(d.on("input",ve),u.on("input",ve),p.on("input",ve)):G=setInterval(function(){he(".js-leaveMsgDetail")},100),$txtTip.on("click",function(){d.focus()}),$leavecancel.on("click",function(){$sureWindow.css({opacity:"0"}).removeClass("show"),$sureWindowlayer.css({opacity:"0"}).removeClass("show"),$commitSureWindow.animate({opacity:"0"}).removeClass("show")}),$leaveclose.on("click",function(){$sureWindow.css({opacity:"0"}).removeClass("show"),$sureWindowlayer.css({opacity:"0"}).removeClass("show"),$commitSureWindow.animate({opacity:"0"}).removeClass("show")}),$leavesure.css({background:J,color:"#fff"}),$commitLeavesure.css({background:J,color:"#fff"}),$userCheck.on("click",$e),$userOpt.on("click",Me),a.find(".js-leaveMsgDetail_msg").on("input",function(){a.find(".js-leaveMsgCommit").css("background",J)}),a.find(".js-leaveMsgCommit").on("click",function(){qe()}),a.on("click",".js-evaluation-score",De),a.on("click",".js-close-evaluation",Be),a.on("click",".js-start-btn",Ne),a.on("click",".js-submit-evaluation",Re)},Ue=function(){if(t.apiInit.userId&&"null"!==t.apiInit.userId&&"undefined"!==t.apiInit.userId)$.ajax({type:"get",dataType:"json",url:"/v2/chat-web/user/getUserTicketInfoList.action",data:{uid:s},success:function(e){if(e.retCode="000000"){w=e.items;var i={items:w,languageText:l},n=doT.template(_.switchLeaveMsgTemplate)(i);$(".js-leaveMsgRecord").html(n),j=$(".js-li-click"),j.off("click"),j.on("click",function(){var e=$(this).index();$("#leaveMsg1").css("display","none"),$("#leaveMsg2").css("display","block"),T=a.find(".bgback");var i=JSON.stringify({companyId:t.sysNum,ticketId:w[e].ticketId});se.companyId=t.sysNum,se.ticketId=w[e].ticketId,$.ajax({type:"get",url:"/v2/chat-web/data/invokeOtherByUser.action",dataType:"json",data:{uid:s,param:i,url:"ws/getUserDealTicketInfoList/4",method:"get"},success:function(e){if(e.retCode="000000"){var t={items:e.items,currentOrderData:w,languageText:l,endFlag:e.items[0].flag};e.items.forEach(function(e){3==e.flag&&(e.ticketScoreInfooList&&e.ticketScoreInfooList.reverse(),ie=e)});var i=doT.template(_.procressLeaveMsg)(t),a=doT.template(_.showOrHide)(t);$(".js-bottomss").html(i),$(".detailed-description").html(a),Ue()}}})})}}});else{w=[];var e={items:w,languageText:l},i=doT.template(_.switchLeaveMsgTemplate)(e);$(".js-leaveMsgRecord").html(i)}},Ge=function(){if(2==t.apiConfig.msgToTicketFlag)ze();else{var e={operateType:3,openFlag:1,templateId:t.urlParams.templateId},i=JSON.stringify(e),a={uid:s,url:"basic-set/getTemplateFieldsInfo/4",method:"get",param:i};L({url:"/v2/chat/data/invokeOtherByUser.action",dataType:"json",type:"get",data:a}).success(function(e){Oe(e),Te()})}S=S(t)};Ge()};t.exports=a},{"../../../common/comm.js":1,"../../../common/util/listener.js":33,"../../../common/util/monitAjax.js":35,"../../../common/util/rsaSign.js":38,"../config/config.json":40,"../util/load.js":67,"../util/showTip.js":73,"./dropdownClassify.js":51,"./leaveDropdown.js":56,"./template.js":59}],58:[function(e,t,i){var a=function(t){var i,a,s,i,n,o,r=(e("../../../common/util/listener.js"),e("../../../common/util/monitAjax.js")(t)),l=e("./template.js"),c=e("../../../common/comm.js"),d=function(){a.removeClass("show"),s.animate({right:"-390px"},function(){i.remove()})},u=function(){a.addClass("show"),s.animate({right:"0"})},f=function(e){o=c.getQueryParam();var a=document.location.href,s=a.substring(0,a.indexOf("?")+1);for(key in o)"robotFlag"==key||(s+=key+"="+encodeURIComponent(o[key])+"&");s=s.substring(0,s.lastIndexOf("&"));var n={uid:t.apiInit.uid,channelFlag:o.channelFlag||""};r({url:"/v2/chat-web/user/getRobotSwitchList.action",dataType:"json",type:"get",data:n}).success(function(e){if(1==e.status){for(var a=0;a<e.list.length;a++)e.list[a].newLink=s+"&robotFlag="+e.list[a].robotFlag,e.list[a].robotFlag==t.apiConfig.robotFlag&&(e.list[a].currentRobot=1);var n={languageText:t.language.text,list:e.list},o=doT.template(l.switchRobotTemplete)(n);i=$(o),$(".js-mainBox").append(i),i.find(".js-currentRobot").css({background:t.userInfo.color,border:"1px solid "+t.userInfo.color}),p(),g(),u()}})},p=function(){a=i.find(".js-switchRobotlayer"),s=i.find(".js-switchRobot"),n=i.find(".js-close")},g=function(){n.on("click",d),a.on("click",d),i.find(".js-switchRobotEle").hover(function(){$(this).css({background:t.userInfo.color,border:"1px solid "+t.userInfo.color}),$(this).find("a").css({color:"#fff"})},function(){$(this).css({background:"#fff",border:"1px solid #e0e9e8"}),$(this).find("a").css({color:"#535656"})})},m=function(){f()};m()};t.exports=a},{"../../../common/comm.js":1,"../../../common/util/listener.js":33,"../../../common/util/monitAjax.js":35,"./template.js":59}],59:[function(e,t,i){var a={},s='<div class="evaluation-layer"><div class="dialog-box"><div class="dialog-content"><div class="close-dialog"><i class="js-close-evaluation"></i></div><div class="title"></div><div class="star-list"><ul class="clearfix"><li class="js-start-btn active"></li><li class="js-start-btn active"></li><li class="js-start-btn active"></li><li class="js-start-btn active"></li><li class="js-start-btn active"></li></ul></div><div class="tips js-change-evaluation">{{=it.ticketScoreInfooList[4].scoreExplain }}</div>{{ if(it.txtFlag == 1){ }}<div class="desc"><textarea maxlength="150" id="js-text-evaluation" placeholder=""></textarea></div>{{ } }}{{ else{ }}<div style="margin-top: 80px"></div>{{ } }}<a class="submit js-submit-evaluation" href="javascript:"></a></div></div></div>',n='<div><div class="group-layer js-group-layer"></div><div class="group-outer js-group-outer pc-leaveMessage-layer"><p class="group-title"><span class="close_button js-cancel-btn js-group-cancel"></span></p><div class="group-main"><ul class="clearfix"><li class="js-open-url"></li>{{  for(var i=0;i<it.list.length;i++){ }}{{ var item = it.list[i];}}<li class="js-item" data-id="{{=item.templateId}}">{{=item.templateName}}</li>{{  } }}</ul></div></div></div>',o='<div class="msgFileIco js-msgFileIco {{=it.fileIcoClass}}" style="float: left; width: 30px;height: 30px;margin-top: 3px;background-repeat: no-repeat;"></div><div class="msgFileDetail js-msgFileDetail" style="float: left;margin-left: 9px;font-size: 12px;"><p class="filename" title="{{=it.filename}}" style="width: 170px;height: 20px;color: #555556;overflow: hidden;text-overflow: ellipsis;word-break: normal;white-space: nowrap;font-size: 12px;">{{=it.filename}}</p><span class="fileSize" style="float: left;color: #8a9699;font-size: 12px">{{=it.filesize}}</span> <span class="sizeAfter js-sizeAfter" style="float: left;margin: 0 5px;color: #8a9699;font-size: 12px;">|</span><a class="filedownload js-filedownload" download href="{{=it.url}}" target="_blank" style="display:block;color: #28a7dc!important; font-size: 12px; cursor: pointer;"></a></div>',r='<img src="{{=it.url}}" class="webchat_img_upload upNowImg uploadedFile" />',l='<div class="systeamTextBox systeamNowText js-systeamTextBox{{=it.date}}"><p class="systeamText"> {{=it.filename}}{{=it.extension}}</p></div>',c='<div class="evaluateWether"><p class="evaluateTitle"><label class="aname" style="text-overflow: ellipsis; max-width: 100px;word-break: normal;white-space: nowrap; display: inline-block; overflow: hidden;line-height: 13px;" title="{{=it.subName}}">{{=it.subName}}</label> {{=it.evaluateTitle}}</p><div class="btnGroup"><span class="js-isques evaluate-btn evaluateok"><i></i>{{=it.okText || ""}}</span><span class="js-noques evaluate-btn evaluateno"><i></i>{{=it.cancelText || ""}}</span></div></div>',d='<div class="evaluate js-evaluate"><p class="h2">{{=it.languageText.T0027}}</p><div class="situation">{{for(var i=0;i<it.list.length;i++){}}{{if(i%2==0){}}<span class="tag js-tag">{{=it.list[i]}}</span>{{}else{}}<span class="tag js-tag" style="margin-right:0">{{=it.list[i]}}</span>{{}}}{{}}}</div><textarea id="js-evaluateInner" class="js-evaluateInner" placeholder="{{=it.languageText.T0028}}" maxLength="200"></textarea></div>',u='<div class="evaluateWether js-evaluate">{{if(it.config[0].isQuestionFlag){}}<div class="operateType isSolve"><p class="operateTypeTitle" title={{=it.aname}}>{{=it.subName}}{{=it.languageText.T0106}}</p><div class="operateTypeBtn"><p class="solve solved js-solved"><span></span>{{=it.languageText.T0041}}</p><p class="solve unSolved js-unSolved" style="margin-left:25px;"><span></span>{{=it.languageText.T0042}}</p></div></div>{{}}}<div class="operateType isSatisfactionForEva"><p class="operateTypeTitle" title={{=it.languageText.T0096}}>{{=it.languageText.T0096}}</p><div class="operateTypeBtn"><p class="solve solved js-solved"><span></span>{{=it.languageText.T0154}}&nbsp;&nbsp;</p><p class="solve unSolved js-unSolved" style="margin-left:25px;"><span></span>{{=it.languageText.T0155}}</p></div></div></div><p class="evaluateTip js-evaluateTip"><span style="color:#8b98ad;">{{=it.languageText.T0107}}</span></p></div>',f='<div class="evaluate js-evaluate">{{if(it.list.length>0){}}<p class="h2">{{=it.languageText.T0027}}</p>{{}}}<div class="situation">{{for(var i=0;i<it.list.length;i++){}}{{if(i%2==0){}}<span class="tag js-tag">{{=it.list[i]}}</span>{{}else{}}<span class="tag js-tag" style="margin-right:0">{{=it.list[i]}}</span>{{}}}{{}}}</div><textarea id="js-evaluateInner" class="js-evaluateInner" placeholder="{{=it.conf.inputLanguage||it.languageText.T0028}}{{=it.conf.isInputMust?it.languageText.T0046:it.languageText.T0047}}" maxLength="200"></textarea></div>',p='<div class="evaluateSubmitArea">{{if(it.from=="close"){}}<a class="submit js-evaluateSubmit js-submitTheme" href="#">{{=it.languageText.T0029}}</a><a class="nosubmit js-noevaluateSubmit" href="#">{{=it.languageText.T0097}}</a>{{}else{}}<a class="submit js-evaluateSubmit js-submitTheme" href="#">{{=it.languageText.T0029}}</a>{{}}}</div>',g='<a class="js-leaveMsgBtn" href="{{=it.hostUrl}}"><i class="leaveMessagebg"></i><p>{{=it.languageText.T0030}}</p></a>',m='<span class="span3"><a class="js-leaveMsgBtn" href="{{=it.hostUrl}}"><i class="icon"></i><p>{{=it.languageText.T0030}}</p></a></span>',v='<div class="js-allScreen allScreen"><div class="loadingUploadImg"><i></i><p>{{=it.language.L10036}}</p></div></div>',h='<div class="js-evamsg evamsg"><p>{{=it.language.L10037}}</p></div>',y='<div class="js-evamsg evamsg" style="color:#cb1f16"><p>{{=it.language.L10038}}</p></div>',j='<div class="js-evaluateArea"><div class="evaluatelayer js-evaluatelayer"></div><div class="evaluateDialog js-evaluateDialog"><span class="close_button js-evaluateClose"></span><div class="evaluate-body-widely"><div class="model-body"></div><div class="model-body-extend"></div><div class="model-body-commit"></div></div></div></div>',T='<div class="js-leaveMsgFileStyle leaveMsgFileStyle js-leaveMsgFile{{=it.date}}"><p class="leaveMsgFileName" title="{{=it.filename}}{{=it.extension}}">{{=it.filename}}{{=it.extension}}</p><p class="leaveMsgFilesize">({{=it.filesize}})</p><p class="leaveMsgProcessWidely"><span class="js-leaveMsgProcess{{=it.date}} leaveMsgProcess"></span></p><p class="fileTip">{{=it.languageText.T0084}}</p><span class="leaveMsgFileClose js-leaveMsgFileClose{{=it.date}}"></span></div>',b='<div class="js-leaveMsgFileStyle leaveMsgFileStyle js-leaveMsgFile{{=it.date}}"><p class="leaveMsgFileName" title="{{=it.filename}}{{=it.extension}}">{{=it.filename}}{{=it.extension}}</p><p class="ie-uploadLoading">{{=it.languageText.T0083}}</p><p class="fileTip">{{=it.languageText.T0084}}</p><span class="leaveMsgFileClose js-leaveMsgFileClose{{=it.date}}"></span></div>',w='{{if(it.items.length>0){}}{{ for(var i=0;i<it.items.length;i++){ }}<li class="js-classDropdownLi js-classOrderList" data-nodeFlag="{{=it.items[i].nodeFlag}}" dataId="{{=it.items[i].typeId}}" data-key="classifyByPid" title="{{=it.items[i].typeName||""}}">{{=it.items[i].typeName}}{{if(it.items[i].nodeFlag){}}<span class="firstIcon"></span>{{}}}</li>{{ } }}{{ }else{ }} <li></li>{{ } }}',x='<div class="capture-outer"><p class="captTips">QQ</p><p class="h5"></p><ol><li><h6></h6><div class="capture-text">Windowsqq <a href="https://img.sobot.com/tools/%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7-win.exe" target="_blank"></a></div><div class="capture-text">Macqq <a href="https://img.sobot.com/tools/%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7-mac.dmg" target="_blank"></a></div></li><li><h6></h6><div class="capture-text">Windows <a href="https://jingyan.baidu.com/article/2fb0ba408a1e1300f2ec5f03.html" target="_blank"></a></div><div class="capture-text">Mac <a href="https://jingyan.baidu.com/article/3d69c5514e44a3f0ce02d751.html" target="_blank"></a></div></li><li><h6></h6></li>',I='<ul class="respInfoList js-respInfoList">{{for(var i=0;i<it.respInfoList.length;i++){}}{{if(i<6){}}<li class="js-respInfoBtn" title="{{=it.respInfoList[i].question}}" data-docid="{{=it.respInfoList[i].docId}}">{{=it.respInfoList[i].highlight}}</li>{{}}}{{}}}</ul>',F='<div><div class="switchRobotlayer js-switchRobotlayer"></div><div class="switchRobot js-switchRobot"><div class="js-switchRobotHeader switchRobotHeader"><p class="title">{{=it.languageText.T0140}}</p><span class="close js-close"></span></div><div class="switchRobotBody js-switchRobotBody"><ul class="robotList">{{for(var i=0;i<it.list.length;i++){}}{{if(it.list[i].currentRobot){}}<li class="js-switchRobot currentRobot js-currentRobot"><a href="{{=it.list[i].newLink}}">{{=it.list[i].operationRemark}}</a></li>{{}else{}}<li class="js-switchRobotEle"><a href="{{=it.list[i].newLink}}">{{=it.list[i].operationRemark}}</a></li>{{}}}{{}}}</ul></div></div></div>',k='{{if(it.items.length===0){}}<span style="display: block;margin-top: 200px"> {{=it.languageText.T0148}}</span>{{}else{}}<div class="leaveMsgListRecord"><ul>{{for(var i=0;i<it.items.length;i++){}}<li class="js-li-click"><div class="quectionDisc"><div class="header"><div class="tips">{{=it.languageText.T0110}}{{if(it.items[i].newFlag===2){}}<span class="umi"><span>New</span></span>{{}}}</div>{{if(it.items[i].flag===3){}}<div class="state">{{=it.languageText.T0131}}</div>{{}else if(it.items[i].flag===2){}}<div class="state1">{{=it.languageText.T0132}}</div>{{}else{}}<div class="state2">{{=it.languageText.T0133}}</div>{{}}}</div><div class="content"><div class="culoum">{{=it.items[i].content}}</div></div><div class="bottom"><div class="left">{{=it.languageText.T0134}}:{{=it.items[i].ticketCode}}</div><div class="right">{{=it.items[i].timeStr}}</div></div></div></li>{{}}}</ul>{{}}}',C='<div class="bottom">{{for(var i=0;i<it.items.length;i++){}}{{if(it.items[i].flag===3){}}<div class="proseess"><div><span class="timer actives"></span><span class="texts active">{{=it.items[i].timeStr}}</span></div><div style="margin-top: 8px"><span class="tipsss active"></span><span class="texts active">{{=it.languageText.T0131}}</span></div><div class="contents-sl active" ><div style="margin-left: 15px"><div class="resful">{{=it.languageText.T0149}}</div><div class="resfuls">{{=(it.items[i].content||it.languageText.T0139)}}</div></div></div>{{ if(it.items[i].isOpen == 1 && !it.items[i].isEvalution){ }}<div class="js-evaluation-area" style="margin: 10px 0 10px 23px"><a href="javascript:" class="js-evaluation-score" style="display: block;width: 124px;line-height: 30px;font-size: 14px;color: #fff;background: #0DAEAF; text-align: center; border-radius: 2px;"></a></div>{{ } }}{{ else if(it.items[i].isEvalution == 1){ }}<div style="margin-left: 23px;margin-bottom: 10px;"><div><span style="color: #333"></span><span style="color: #888">{{=it.items[i].ticketScoreInfooList[it.items[i].score - 1].scoreExplain}}({{=it.items[i].score}})</span></div>{{ if(it.items[i].remark){ }}<div><span style="color: #333"></span><span style="color: #888;word-break: break-all;text-align: justify">{{=it.items[i].remark}}</span></div>{{ } }}</div>{{ } }}</div>{{}}}{{if(it.items[i].flag===2){}}{{for(var j=0;j<it.items[i].replayList.length;j++){}}{{if(j===0&&it.items.length===2){}}<div class="proseess"><div><span class="timer actives"></span><span class="texts active">{{=it.items[i].replayList[j].replyTimeStr}}</span></div><div style="margin-top: 8px"><span class="tipsss active"></span><span class="texts active">{{=it.languageText.T0132}}</span></div><div class="contents-sl active" ><div style="margin-left: 15px">{{if(it.items[i].replayList[j].startType===0){}}<div class="resful">{{=it.languageText.T0149}}</div>{{}else if(it.items[i].replayList[j].startType===1){}}<div class="resful">{{=it.languageText.T0150}}</div>{{}}}<div class="resfuls">{{=(it.items[i].replayList[j].replyContent||it.languageText.T0139)}}</div></div></div></div>{{}else{}}<div class="proseess"><div><span class="timer"></span><span class="texts">{{=it.items[i].replayList[j].replyTimeStr}}</span></div><div style="margin-top: 8px"><span class="tipsss"></span><span class="texts">{{=it.languageText.T0132}}</span></div><div class="contents-sl" ><div style="margin-left: 15px">{{if(it.items[i].replayList[j].startType===0){}}<div class="resful">{{=it.languageText.T0149}}</div>{{}else if(it.items[i].replayList[j].startType===1){}}<div class="resful">{{=it.languageText.T0150}}</div>{{}}}<div class="resfuls">{{=(it.items[i].replayList[j].replyContent||it.languageText.T0139)}}</div></div></div></div>{{}}}{{}}}{{}}}{{if(it.items[i].flag===1){}}{{if(it.items.length===1){}}<div class="proseess"><div><span class="timer actives"></span><span class="texts active">{{=it.items[i].timeStr}}</span></div><div style="margin-top: 8px"><span class="tipsss active"></span><span class="texts active">{{=it.languageText.T0133}}</span></div></div>{{}else{}}<div class="proseess"><div><span class="timer"></span><span class="texts">{{=it.items[i].timeStr}}</span></div><div style="margin-top: 8px"><span class="tipsss"></span><span class="texts">{{=it.languageText.T0133}}</span></div></div>{{}}}{{}}}{{}}}</div>',S="<span>{{=it.items[it.items.length-1].content}}</span>";
a.evaluationDialog=s,a.groupTemplate=n,a.captureDialogTemplate=x,a.sobotEvaluateOne_selfHtml=c,a.sobotEvaluateTwo_selfHtml=d,a.humanOne_selfHtml=u,a.humanTwo_selfHtml=f,a.evaluateFooter_selfHtml=p,a.leaveMessageBtn=g,a.leaveMessageEndBtn=m,a.evamsgHtml=h,a.evamsgHtml2=y,a.waitingUploadImg=v,a.tranfiletype=o,a.fileImage=r,a.uploading=l,a.AlertTemplate=j,a.leaveMsgFileStyle=T,a.IframeleaveMsgFileStyle=b,a.classifyOrderList=w,a.respInfoList=I,a.switchRobotTemplete=F,a.switchLeaveMsgTemplate=k,a.procressLeaveMsg=C,a.showOrHide=S,t.exports=a},{}],60:[function(e,t,i){function a(t,i,a,s){var n=e("../../../common/util/listener.js"),o=e("../../../common/util/rsaSign.js"),r=e("../../../common/util/msgReminder.js"),l={},c=e("../util/modal/alert.js"),d=e("./fileType.json"),u=e("../util/showTip.js"),f=s.language.text,p=e("./fileTypeIcon.json"),g=e("./template.js"),m=function(){$node=$(t),$uploadBtn=$(".js-upload")},v=s.userInfo.color?s.userInfo.color:s.apiConfig.color;r.clear();var h=function(e,t){T(e,t)},y=function(e){for(var t=e.substring(e.indexOf(":")+1,e.indexOf(";")),i=e.substring(e.indexOf(",")+1),a=atob(i),s=new Array(a.length),n=0;n<a.length;n++)s[n]=a.charCodeAt(n);var o=new Uint8Array(s),r=new Blob([o],{type:t});return r},j=function(e,t,i){var a=e.getAsFile();if(a&&"image/png"==a.type){var n=new FormData,o=new FileReader;o.onload=function(e){var a=!1,o=e.target.result,r=y(o);n.append("file",r),n.append("type","paste"),n.append("pid",s.apiInit.pid),n.append("countTag",1),n.append("source",0);var l="image",d="",u=".png",f=new c({title:"",text:'<img src="'+e.target.result+'">',okText:"",cancelText:"",OK:function(){a||(a=!0,b(t,i,u,d,l,r))}});f.show(),$(".js-ok-btn").css({background:v,color:"#fff"})},o.readAsDataURL(a)}},T=function(e,t){if(a.FormData){var i=$uploadBtn[0],s=$uploadBtn.val(),n=s.substr(s.lastIndexOf(".")),o=s.substring(s.lastIndexOf("\\")+1,s.lastIndexOf(".")),r=d[n],l=p[r];if(w(n,o)){var c=I(n,o),u=i.files[0];b(e,t,n,o,r,u,l,c)}$uploadBtn.val("")}else x(e,t)},b=function(e,t,i,a,r,l,c,d){var p=+new Date,g=e+p,m=new XMLHttpRequest,v=o.getRsaSign(),h=new FormData,y=!1;if("image"===r){m.open("post","/v2/chat/newwebchat/fileuploadBase64.action?sign="+v);var j=new FileReader;j.readAsDataURL(l),j.onload=function(i){var a=i.target.result;h.append("sysNum",s.sysNum),h.append("base64",a),h.append("cid",t),h.append("uid",e),n.trigger("sendArea.createUploadImg",{result:a,date:p,token:g}),m.send(h)},n.on("leftMsg.closeUploadImg",function(){y=!0,m.abort()}),m.onreadystatechange=function(s){if(4==s.target.readyState)if(200==s.target.status){var o=JSON.parse(s.target.response).url,l=JSON.parse(s.target.response).filesize;if(0==l)return void u.show(f.T0082);try{n.trigger("sendArea.uploadImgUrl",{uid:e,cid:t,url:o,filetype:r,filename:a,extension:i,fileIcon:c,date:d,dateuid:g})}catch(p){}}else{var m={result:"ImgSendFail",msgId:g};n.trigger("sendArea.msgresult",m)}}}else{var T=l.size,b=!1;if(T>20971520)return void u.show(f.T0082);T<1024?T+="B":T=T<1048576?(T/1024).toFixed(2)+"KB":(T/1048576).toFixed(2)+"M",h.append("file",l),h.append("type","msg"),h.append("pid",s.apiInit.pid),h.append("countTag",1),h.append("source",0),h.append("cid",t),h.append("uid",e);var w=o.getRsaSign();m.open("post","/v2/chat/newwebchat/fileupload.action?sign="+w);var j=new FileReader;j.readAsDataURL(l),j.onload=function(e){n.trigger("sendArea.createUploadFile",{filename:a,extension:i,filetype:r,filesize:T,date:p,token:g}),m.send(h)},n.on("listMsg.closeUploadFile",function(){b=!0,m.abort()}),m.onreadystatechange=function(s){if(4==s.target.readyState)if(200==s.target.status){var o=JSON.parse(s.target.response).url,l=JSON.parse(s.target.response).filesize;if(0==l)return;try{n.trigger("sendArea.uploadImgUrl",{uid:e,cid:t,url:o,filetype:r,filename:a,filesize:T,extension:i,fileIcon:c,date:d,dateuid:g})}catch(u){}}else b||n.trigger("sendArea.uploadFileFail",{dateuid:g})},m.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total),i=t.toString(),s={percentage:i,token:g,filename:a};n.trigger("sendArea.uploadFileProcess",s)}},!1)}},w=function(e,t){var i="";if(i=/^(.eml|.msb|.ssu|.SSU|.bmp|.swj|.jpg|.JPG|.jpeg|.JPEG|.png|.PNG|.gif|.GIF|.txt|.TXT|.DOC|.doc|.docx|.DOCX|.pdf|.PDF|.ppt|.PPT|.pptx|.PPTX|.xls|.XLS|.xlsx|.XLSX|.RAR|.rar|.zip|.ZIP|.mp3|.MP3|.mp4|.MP4|.wma|.WMA|.wmv|.WMV|.rmvb|.RMVB)$/,i.test(e))return!0;var a={type:"system",status:"uploadFileError",data:{content:""+e+""}};return n.trigger("sendArea.sendAreaSystemMsg",a),!1},x=function(e,t){var i=$node.find(".js-fileinfo");i.find('input[name="pid"]').val(s.apiInit.pid);var a=$uploadBtn.val(),r=a.substr(a.lastIndexOf(".")),l=a.substring(a.lastIndexOf("\\")+1,a.lastIndexOf(".")),c=d[r],u=p[c],f=+new Date,g=e+f;if(w(r,l)){var m=I(r,l),v="iframe"+m;"image"===c?n.trigger("sendArea.createUploadImg",{result:"...",date:f,token:g,browserVersion:"ie-"}):n.trigger("sendArea.createUploadFile",{filename:l,extension:r,filetype:c,date:f,token:g,browserVersion:"ie-"}),i.attr("target",v);var h=o.getRsaSign();i.attr("action","/v2/chat/newwebchat/fileupload.action?sign="+h);var y=$('<iframe id="'+v+'" style="display:none;height:1000px;width:500px;" name="'+v+'" src="about:blank;"></iframe>');y.on("load",function(){var i=y[0],a=i.contentWindow.document.getElementsByTagName("body")[0].innerHTML;if(a){var s=JSON.parse(a);s.filesize===!1?(alert(""),n.trigger("sendArea.uploadFileFail",{uid:e,cid:t,dateuid:g,browserVersion:"ie-"})):n.trigger("sendArea.uploadImgUrl",{uid:e,cid:t,url:s.url,filetype:c,filename:l||"",filesize:s.filesize,extension:r||"",fileIcon:u||"",date:m,dateuid:g,browserVersion:"ie-"})}}),$(document.body).append(y),i.submit()}$uploadBtn.val("")},I=function(e,t){var i=+new Date,a={filename:t,extension:e,date:i},s=doT.template(g.uploading)(a);return $node.find(".scrollBox").append(s),i},F=function(){},k=function(){m(),F(),u=u(s)};return k(),l.onFormDataPasteHandler=j,l.onChangeHandler=h,l}t.exports=a},{"../../../common/util/listener.js":33,"../../../common/util/msgReminder.js":36,"../../../common/util/rsaSign.js":38,"../util/modal/alert.js":68,"../util/showTip.js":73,"./fileType.json":53,"./fileTypeIcon.json":54,"./template.js":59}],61:[function(e,t,i){var a={},s=function(e){return e>=10?e+"":"0"+e},n=function(e){if(Object.prototype.toString.call(e).indexOf("Date")<0)throw"param error";var t=e.getHours(),i=e.getMinutes(),a=e.getSeconds(),n=[s(t),s(i),s(a)];return n.join(":")},o=function(e,t){var i,a=new Date,s=Math.abs(a-new Date(e.substr(0,e.indexOf(" "))))/1e3/60/60/24;e=e.replace(/-/g,"/");var n=s<=1?0:s>1&&s<=2?1:2,o=e.substring(0,e.lastIndexOf(":")),r=e.substring(e.indexOf(" "),e.lastIndexOf(":"));switch(n){case 0:i=t.T0011+r;break;case 1:i=t.T0013+r;break;case 2:i=o}return i};a.getTime=n,a.formatTime=o,t.exports=a},{}],62:[function(e,t,i){var a={};a.emojiTip=["u1F60A","u1F60B","u1F60C","u1F60D","u1F60E","u1F60F","u1F61A","u1F61C","u1F61D","u1F61E","u1F61F","u1F62A","u1F62B","u1F62C","u1F62D","u1F62E","u1F600","u1F601","u1F602","u1F603","u1F605","u1F606","u1F607","u1F608","u1F609","u1F611","u1F612","u1F613","u1F614","u1F615","u1F616","u1F618","u1F621","u1F622","u1F623","u1F624","u1F628","u1F629","u1F630","u1F631","u1F632","u1F633","u1F634","u1F635","u1F636","u1F637","u1F648","u1F649","u1F680","u2B50","u23F0","u23F3","u26A1","u26BD","u26C4","u26C5","u261D","u263A","u270A","u270B","u270C","u270F","u2600","u2601","u2614","u2615","u2744","u1F3A4","u1F3B2","u1F3B5","u1F3C0","u1F3C2","u1F3E1","u1F004","u1F4A1","u1F4A2","u1F4A3","u1F4A4","u1F4A9","u1F4AA","u1F4B0","u1F4DA","u1F4DE","u1F4E2","u1F6AB","u1F6BF","u1F30F","u1F33B","u1F35A","u1F36B","u1F37B","u1F44C","u1F44D","u1F44E","u1F44F","u1F46A","u1F46B","u1F47B","u1F47C","u1F47D","u1F47F","u1F48A","u1F48B","u1F48D","u1F52B","u1F64A","u1F64F","u1F319","u1F332","u1F339","u1F349","u1F356","u1F366","u1F377","u1F381","u1F382","u1F384","u1F389","u1F393","u1F434","u1F436","u1F437","u1F451","u1F484","u1F494","u1F525","u1F556"],a.emojiSymbolTip=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],a.emojiReg=/(|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||)/g,a.emojiReg2=/(|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||)/,a.qqfaceReg=/\/::\)|\/::~|\/::B|\/::\||\/:8-\)|\/::<|\/::\$|\/::X|\/::Z|\/::'\(|\/::-\||\/::@|\/::P|\/::D|\/::O|\/::\(|\/::\+|\/:b|\/::Q|\/::T|\/:,@P|\/:,@-D|\/::d|\/:,@o|\/::g|\/:\|-\)|\/::!|\/::L|\/::>|\/::,@|\/:,@f|\/::-S|\/:\?|\/:,@x|\/:,@@|\/::8|\/:,@!|\/:!!!|\/:xx|\/:bye|\/:wipe|\/:dig|\/:handclap|\/:&-\(|\/:B-\)|\/:<@|\/:@>|\/::-O|\/:>-\||\/:P-\(|\/::'\||\/:X-\)|\/::\*|\/:@x|\/:8\*|\/:pd|\/:<W>|\/:beer|\/:basketb|\/:oo|\/:coffee|\/:eat|\/:pig|\/:rose|\/:fade|\/:showlove|\/:heart|\/:break|\/:cake|\/:li|\/:bome|\/:kn|\/:footb|\/:ladybug|\/:shit|\/:moon|\/:sun|\/:gift|\/:hug|\/:strong|\/:weak|\/:share|\/:v|\/:@\)|\/:jj|\/:@@|\/:bad|\/:lvu|\/:no|\/:ok|\/:love|\/:<L>|\/:jump|\/:shake|\/:<O>|\/:circle|\/:kotow|\/:turn|\/:skip|\/:oY|\/:#-0|\/:hiphot|\/:kiss|\/:<&|\/:&>|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/NO|\/OK|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[NO\]|\[OK\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]/g,a.qqfaceReg2=/\/::\)|\/::~|\/::B|\/::\||\/:8-\)|\/::<|\/::\$|\/::X|\/::Z|\/::'\(|\/::-\||\/::@|\/::P|\/::D|\/::O|\/::\(|\/::\+|\/:b|\/::Q|\/::T|\/:,@P|\/:,@-D|\/::d|\/:,@o|\/::g|\/:\|-\)|\/::!|\/::L|\/::>|\/::,@|\/:,@f|\/::-S|\/:\?|\/:,@x|\/:,@@|\/::8|\/:,@!|\/:!!!|\/:xx|\/:bye|\/:wipe|\/:dig|\/:handclap|\/:&-\(|\/:B-\)|\/:<@|\/:@>|\/::-O|\/:>-\||\/:P-\(|\/::'\||\/:X-\)|\/::\*|\/:@x|\/:8\*|\/:pd|\/:<W>|\/:beer|\/:basketb|\/:oo|\/:coffee|\/:eat|\/:pig|\/:rose|\/:fade|\/:showlove|\/:heart|\/:break|\/:cake|\/:li|\/:bome|\/:kn|\/:footb|\/:ladybug|\/:shit|\/:moon|\/:sun|\/:gift|\/:hug|\/:strong|\/:weak|\/:share|\/:v|\/:@\)|\/:jj|\/:@@|\/:bad|\/:lvu|\/:no|\/:ok|\/:love|\/:<L>|\/:jump|\/:shake|\/:<O>|\/:circle|\/:kotow|\/:turn|\/:skip|\/:oY|\/:#-0|\/:hiphot|\/:kiss|\/:<&|\/:&>|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/NO|\/OK|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\/|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[NO\]|\[OK\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]|\[\]/,t.exports=a},{}],63:[function(e,t,i){t.exports={"":"u1F60A.png","":"u1F60B.png","":"u1F60C.png","":"u1F60D.png","":"u1F60E.png","":"u1F60F.png","":"u1F61A.png","":"u1F61C.png","":"u1F61D.png","":"u1F61E.png","":"u1F61F.png","":"u1F62A.png","":"u1F62B.png","":"u1F62C.png","":"u1F62D.png","":"u1F62E.png","":"u1F600.png","":"u1F601.png","":"u1F602.png","":"u1F603.png","":"u1F605.png","":"u1F606.png","":"u1F607.png","":"u1F608.png","":"u1F609.png","":"u1F611.png","":"u1F612.png","":"u1F613.png","":"u1F614.png","":"u1F615.png","":"u1F616.png","":"u1F618.png","":"u1F621.png","":"u1F622.png","":"u1F623.png","":"u1F624.png","":"u1F628.png","":"u1F629.png","":"u1F630.png","":"u1F631.png","":"u1F632.png","":"u1F633.png","":"u1F634.png","":"u1F635.png","":"u1F636.png","":"u1F637.png","":"u1F648.png","":"u1F649.png","":"u1F680.png","":"u2B50.png","":"u23F0.png","":"u23F3.png","":"u26A1.png","":"u26BD.png","":"u26C4.png","":"u26C5.png","":"u261D.png","":"u263A.png","":"u270A.png","":"u270B.png","":"u270C.png","":"u270F.png","":"u2600.png","":"u2601.png","":"u2614.png","":"u2615.png","":"u2744.png","":"u1F3A4.png","":"u1F3B2.png","":"u1F3B5.png","":"u1F3C0.png","":"u1F3C2.png","":"u1F3E1.png","":"u1F004.png","":"u1F4A1.png","":"u1F4A2.png","":"u1F4A3.png","":"u1F4A4.png","":"u1F4A9.png","":"u1F4AA.png","":"u1F4B0.png","":"u1F4DA.png","":"u1F4DE.png","":"u1F4E2.png","":"u1F6AB.png","":"u1F6BF.png","":"u1F30F.png","":"u1F33B.png","":"u1F35A.png","":"u1F36B.png","":"u1F37B.png","":"u1F44C.png","":"u1F44D.png","":"u1F44E.png","":"u1F44F.png","":"u1F46A.png","":"u1F46B.png","":"u1F47B.png","":"u1F47C.png","":"u1F47D.png","":"u1F47F.png","":"u1F48A.png","":"u1F48B.png","":"u1F48D.png","":"u1F52B.png","":"u1F64A.png","":"u1F64F.png","":"u1F319.png","":"u1F332.png","":"u1F339.png","":"u1F349.png","":"u1F356.png","":"u1F366.png","":"u1F377.png","":"u1F381.png","":"u1F382.png","":"u1F384.png","":"u1F389.png","":"u1F393.png","":"u1F434.png","":"u1F436.png","":"u1F437.png","":"u1F451.png","":"u1F484.png","":"u1F494.png","":"u1F525.png","":"u1F556.png","":"u1F600.png","":"u1F637.png","":"u1F602.png","":"u1F61D.png","":"u1F635.png","":"u1F633.png","":"u1F631.png","":"u1F614.png","":"u1F609.png","":"u1F60C.png","":"u1F612.png","":"u1F47F.png","":"u1F47B.png","":"ue437.png","":"u1F64F.png","":"u1F4AA.png","":"u1F4B0.png","":"u1F382.png","":"u1F389.png","":"u1F381.png"}},{}],64:[function(e,t,i){t.exports={"[]":"weixiao","[]":"piezui","[]":"se","[]":"fadai","[]":"deyi","[]":"liulei","[]":"haixiu","[]":"bizui","[]":"shui","[]":"daku","[]":"ganga","[]":"fanu","[]":"tiaopi","[]":"ciya","[]":"jingya","[]":"nanguo","[]":"ku","[]":"lenghan","[]":"zhuakuang","[]":"tu","[]":"touxiao","[]":"yukuai","[]":"baiyan","[]":"aoman","[]":"jie","[]":"kun","[]":"jingkong"}},{}],65:[function(e,t,i){t.exports={"/::)":"weixiao","/::~":"piezui","/::B":"se","/::|":"fadai","/:8-)":"deyi","/::<":"liulei","/::$":"haixiu","/::X":"bizui","/::Z":"shui","/::'(":"daku","/::-|":"ganga","/::@":"fanu","/::P":"tiaopi","/::D":"ciya","/::O":"jingya","/::(":"nanguo","/::+":"ku","/:b":"lenghan","/:,@!":"shuai","/:!!!":"kulou","/::Q":"zhuakuang","/::T":"tu","/:,@P":"touxiao","/:,@-D":"yukuai","/::d":"baiyan","/:,@o":"aoman","/::g":"jie","/:|-)":"kun","/::!":"jingkong","/::L":"liuhan","/::>":"hanxiao","/::,@":"youxian","/:,@f":"fendou","/::-S":"zhouma","/:?":"yiwen","/:,@x":"xu","/:,@@":"yun","/::8":"fengl","/:xx":"qiaoda","/:bye":"zaijian","/:wipe":"cahan","/:dig":"koubi","/:handclap":"guzhang","/:&-(":"qiudal","/:B-)":"huaixiao","/:<@":"zuohengheng","/:@>":"youhengheng","/::-O":"haqian","/:>-|":"bishi","/:P-(":"weiqu","/:X-)":"yinxian","/::'|":"kuaikul","/::*":"qinqin","/:@x":"xia","/:8*":"kelian","/:pd":"caidao","/:<W>":"xigua","/:beer":"pijiu","/:basketb":"lanqiu","/:oo":"pingpang","/:coffee":"kafei","/:eat":"fan","/:pig":"zhutou","/:rose":"meigui","/:fade":"diaoxie","/:showlove":"zuichun","/:heart":"aixin","/:break":"xinsui","/:cake":"dangao","/:li":"shandian","/:bome":"zhadan","/:kn":"dao","/:footb":"zuqiu","/:ladybug":"piaochong","/:shit":"bianbian","/:moon":"yueliang","/:sun":"taiyang","/:gift":"liwu","/:hug":"yongbao","/:strong":"qiang","/:weak":"ruo","/:share":"woshou","/:v":"shengli","/:@)":"baoquan","/:jj":"gouyin","/:@@":"quantou","/:bad":"chajin","/:lvu":"aini","/:no":"no_1","/:ok":"ok_1","/:love":"aiqing","/:<L>":"feiwen","/:jump":"tiaotiao","/:shake":"fadou","/:<O>":"ouhuo","/:circle":"zhuanquan","/:kotow":"ketou","/:turn":"huitou","/:skip":"tiaosheng","/:oY":"touxiang","/:#-0":"jidong","/:hiphot":"luanwu","/:kiss":"xianwen","/:<&":"zuotaiji","/:&>":"youtaiji","/":"weixiao","/":"piezui","/":"se","/":"fadai","/":"deyi","/":"liulei","/":"haixiu","/":"bizui","/":"shui","/":"daku","/":"ganga","/":"fanu","/":"tiaopi","/":"ciya","/":"jingya","/":"nanguo","/":"ku","/":"lenghan","/":"shuai","/":"kulou","/":"qiaoda","/":"zaijian","/":"cahan","/":"koubi","/":"guzhang","/":"qiudal","/":"huaixiao","/":"zuohengheng","/":"youhengheng","/":"haqian","/":"bishi","/":"weiqu","/":"kuaikul","/":"yinxian","/":"qinqin","/":"xia","/":"kelian","/":"zhuakuang","/":"tu","/":"touxiao","/":"yukuai","/":"baiyan","/":"aoman","/":"jie","/":"kun","/":"jingkong","/":"liuhan","/":"hanxiao","/":"youxian","/":"fendou","/":"zhouma","/":"yiwen","/":"xu","/":"yun","/":"fengl","/":"lanqiu","/":"pingpang","/":"kafei","/":"fan","/":"zhutou","/":"meigui","/":"diaoxie","/":"zuichun","/":"aixin","/":"xinsui","/":"dangao","/":"shandian","/":"zhadan","/":"dao","/":"zuqiu","/":"piaochong","/":"bianbian","/":"yueliang","/":"taiyang","/":"liwu","/":"yongbao","/":"caidao","/":"xigua","/":"pijiu","/":"ruo","/":"woshou","/":"shengli","/":"baoquan","/":"gouyin","/":"quantou","/":"chajin","/":"aini","/NO":"no_1","/OK":"ok_1","/":"aiqing","/":"feiwen","/":"tiaotiao","/":"qiang","/":"fadou","/":"ouhuo","/":"zhuanquan","/":"ketou","/":"huitou","/":"tiaosheng","/":"touxiang","/":"jidong","/":"luanwu","/":"xianwen","/":"zuotaiji","/":"youtaiji","[]":"weixiao","[]":"piezui","[]":"se","[]":"fadai","[]":"deyi","[]":"liulei","[]":"haixiu","[]":"bizui","[]":"shui","[]":"daku","[]":"ganga","[]":"fanu","[]":"tiaopi","[]":"ciya","[]":"jingya","[]":"nanguo","[]":"ku","[]":"lenghan","[]":"shuai","[]":"kulou","[]":"qiaoda","[]":"zaijian","[]":"cahan","[]":"koubi","[]":"guzhang","[]":"qiudal","[]":"huaixiao","[]":"zuohengheng","[]":"youhengheng","[]":"haqian","[]":"bishi","[]":"weiqu","[]":"kuaikul","[]":"yinxian","[]":"qinqin","[]":"xia","[]":"kelian","[]":"zhuakuang","[]":"tu","[]":"touxiao","[]":"yukuai","[]":"baiyan","[]":"aoman","[]":"jie","[]":"kun","[]":"jingkong","[]":"liuhan","[]":"hanxiao","[]":"youxian","[]":"fendou","[]":"zhouma","[]":"yiwen","[]":"xu","[]":"yun","[]":"fengl","[]":"lanqiu","[]":"pingpang","[]":"kafei","[]":"fan","[]":"zhutou","[]":"meigui","[]":"diaoxie","[]":"zuichun","[]":"aixin","[]":"xinsui","[]":"dangao","[]":"shandian","[]":"zhadan","[]":"dao","[]":"zuqiu","[]":"piaochong","[]":"bianbian","[]":"yueliang","[]":"taiyang","[]":"liwu","[]":"yongbao","[]":"caidao","[]":"xigua","[]":"pijiu","[]":"ruo","[]":"woshou","[]":"shengli","[]":"baoquan","[]":"gouyin","[]":"quantou","[]":"chajin","[]":"aini","[NO]":"no_1","[OK]":"ok_1","[]":"aiqing","[]":"feiwen","[]":"tiaotiao","[]":"qiang","[]":"fadou","[]":"ouhuo","[]":"zhuanquan","[]":"ketou","[]":"huitou","[]":"tiaosheng","[]":"touxiang","[]":"jidong","[]":"luanwu","[]":"xianwen","[]":"zuotaiji","[]":"youtaiji"}},{}],66:[function(require,module,exports){!function(){var that={},parse=function(str){var obj;try{obj=eval("("+str+")")}catch(e){}return obj};that.parse=parse,window.JSON||(window.JSON=that)}()},{}],67:[function(e,t,i){var a=e("./promise.js"),s={},n={},o=function(e,t){var t=t||new a;return setTimeout(function(){return n[e]?a.when(function(){var i=n[e];setTimeout(function(){t.resolve(i)},0)}):void $.ajax({url:e,async:!0,dataType:"text",type:"get"}).success(function(i){t.resolve(i),n[e]=i}).fail(function(e){t.reject(e)})},0),t};s.load=o;var r=function(){return s};t.exports=r},{"./promise.js":71}],68:[function(e,t,i){function a(t){var i=e("./dialog"),a=this,s=$.extend({text:"TEXT",info:"",OK:function(e){}},t);i.call(this,s);var n=function(){var t=e("./template.js"),i=doT.template(t.zcAlertTemplate)(s);a.setInner(i)};n()}t.exports=a},{"./dialog":69,"./template.js":70}],69:[function(e,t,i){function a(t){var i,a,s=e("./template.js"),n=this,o=$.extend({okText:"",title:"",inner:!1,width:322,footer:!0,OK:function(){}},t),r=!0,l=function(){i=$(s.zcShadowLayer);var e=doT.template(s.zcModalOuter)(o);a=$(e),setTimeout(function(){a.find("input").focus()},1)},c=function(e){a.find(".modal-body").append($(e))},d=function(){i.find(".fade.in").animate({opacity:0},300,function(){setTimeout(function(){i.remove()},100)})},u=function(){i.on("click",d),a.on("click",function(e){e.stopPropagation()}),a.delegate(".bootbox-close-button","click",d),a.delegate(".js-cancel-btn","click",function(e){o.cancel&&o.cancel(n),d()}),a.delegate(".js-ok-btn","click",function(e){d(),o.OK&&o.OK(n)}),a.on("keydown",function(e){r&&(r=!1,13==e.keyCode&&(d(),o.OK&&o.OK(n)),setTimeout(function(){r=!0},3e3))}),$(window).resize(function(){g()})},f=function(){return a[0]},p=function(){u(),i.append(a),$(".js-mainBox").append(i),g(),i.find(".fade.in").animate({opacity:1},300)},g=function(){var e=($(".js-mainBox").width()-360)/2,t=($(".js-mainBox").height()-416)/2;$(".modal-dialog").css({"margin-left":e,"margin-top":t})},m=function(){l()};m(),this.getOuter=f,this.setInner=c,this.show=p,this.hide=d}t.exports=a},{"./template.js":70}],70:[function(e,t,i){var a={},s='<div class="zc-shadow-layer"></div>',n='<div class="bootbox  fade in" tabindex="-1" role="dialog" aria-hidden="false" style="display: block;outline:none;">{{if(it.source=="capture"){}}<div class="modal-dialog capture-dialog" style="width:{{=it.width}}px;">{{}else{}}<div class="modal-dialog" style="width:{{=it.width}}px;">{{}}}<div class="modal-content"><div class="modal-header"><span type="button" class="bootbox-close-button close" data-dismiss="modal" aria-hidden="true"></span><h4 class="modal-title">{{=it.title || ""}}</h4></div><input style="position:absolute;left:0;top:0;z-index:-1;outline:none"/><div class="modal-body"></div>{{ if((it.footer !== false) ) { }}<div class="modal-footer"><button class="btn btn-success js-ok-btn">{{=it.okText || ""}}</button><button class="btn btn-danger js-cancel-btn">{{=it.cancelText || ""}}</button></div>{{ } }}</div></div></div>',o='<div class="modal-alert-content"><p class="large">{{=it.text}}</p><p>{{=it.info}}</p></div>';a.zcAlertTemplate=o,a.zcModalOuter=n,a.zcShadowLayer=s,t.exports=a},{}],71:[function(e,t,i){function a(){var e=[];this.resolve=function(t){var i=e.shift();i&&i.success&&"function"==typeof i.success&&i.success(t,this)},this.reject=function(t){var i=e.shift();i&&i.fail&&"function"==typeof i.fail&&i.fail(t,this)},this.then=function(t,i){return e.push({success:t,fail:i}),this}}a.when=function(e){return e()},t.exports=a},{}],72:[function(e,t,i){function a(t,i){var a,s,n,o,r,l,c,d,u,f=e("../../../common/util/listener.js"),p=e("./load.js")(),g=e("./face/weixin.json"),m=e("./face/weixinsymbol.json"),v=(e("./unicode.js"),e("./face/Reg.js")),h=e("./face/emojiImagePath.json"),y=e("../config/config.json"),j={},T="",b="",w="",x="",I="",F="",k="",C="",S="img/qqarclist/",A="img/emoji/",M=function(){"block"===a.css("display")?_():($("#faceBox").length<=0&&p.load(y.basePath+"/views/sendArea/qqFace.html").then(function(e){var t=doT.template(e)({tip:T,path:S});s.append(t)}),L())},L=function(){a.css("display","block"),o.css("background-position","-46px 0px")},_=function(){a.css("display","none"),o.css("background-position","")},P=function(){var e=$(this).find(".js-faceIco").attr("data-src");f.trigger("sendArea.gotoxy",e)},D=function(e){var t="";if(""!==e&&!e)return null;if(t=e.match(I))for(var i=0;i<t.length;i++){var a=F.exec(e),s=b[a[0]];e=e.replace(F,'<img class="zc-face js-zcFace" src="'+S+s+'.png" />')}var n=e.match(k);if(n)for(var i=0,o=n.length;i<o;i++){var a=C.exec(e),s=h[a[0]];e=e.replace(a[0],'<img class="zc-face zc-emoji" src="'+A+s+'" />')}return e},B=function(){var e=$(this).attr("data-tab");d.hide(),$(e).show(),$(this).addClass("active").siblings().removeClass("active")},N=function(){T=g,b=m,w=v.emojiTip,x=v.emojiSymbolTip,I=v.qqfaceReg,F=v.qqfaceReg2,k=v.emojiReg,C=v.emojiReg2;for(var e in T){var t=new Image;t.src=S+T[e]+".png"}},R=function(){a=$(".js-group"),s=$(".js-faceGroup"),n=$(".js-emojiGroup"),o=$(".js-emotion"),r=$(".js-inputMsg"),l=$(".js-faceIco"),c=$(".js-icoLi"),d=$(".js-groupChildren"),u=$(".js-faceIcoLi")},O=function(){o.on("click",M),c.on("click",B),$(document.body).delegate(".js-faceIcoLi","click",P),$(document.body).on("click",function(e){var t=!1,i=0;e.target.classList?i=e.target.classList.length:t=!0;for(var a=0;a<i;a++)"js-emotion"===e.target.classList[a]&&(t=!0);t||_()})},z=function(){R(),N(),O()};return z(),j.show=L,j.hide=_,j.analysis=D,j}var s,n=function(e,t){return s||(s=a(e,t)),s};t.exports=n},{"../../../common/util/listener.js":33,"../config/config.json":40,"./face/Reg.js":62,"./face/emojiImagePath.json":63,"./face/weixin.json":64,"./face/weixinsymbol.json":65,"./load.js":67,"./unicode.js":75}],73:[function(e,t,i){function a(t){var i=e("./template.js"),a=(t.language.lan,t.language.text,{}),s=function(e){var t={};t={text:e};var a=doT.template(i.showTip)(t);$(".js-mainBox").append(a),r(),o(),n()},n=function(){setTimeout(function(){$showTip.remove()},3e3)},o=function(){var e=($(".js-mainBox").height()-$(".js-showTip").height())/2,t=($(".js-mainBox").width()-$(".js-showTip").width())/2;$showTip.css({top:e,left:t-10})},r=function(){$showTip=$(".js-showTip")},l=function(){},c=function(){l()};return c(),a.show=s,a}t.exports=a},{"./template.js":74}],74:[function(e,t,i){var a={},s='<span unselectable="on" class="faceIco js-faceIco faceIco{{=it.flag}}" data-src="{{=it.a}}" /></span><span class="backDelete"></span>',n='<span unselectable="on" class="faceIco js-faceIco faceIco{{=it.flag}}" data-src="{{=it.a}}" /></span>',o='<div class="js-showTip showTip"><p class="showTipText">{{=it.text}}</p></div>';a.faceIcoStr=s,a.faceIcoStr2=n,a.showTip=o,t.exports=a},{}],75:[function(e,t,i){var a={};a.parse=function(e){return e=e.replace(/\\/g,"%"),unescape(e)},a.stringify=function(e){for(var t=[],i=e.length,a=0;a<i;++a)t[a]=("00"+e.charCodeAt(a).toString(16)).slice(-4);return e?"\\u"+t.join("\\u"):""},t.exports=a},{}]},{},[42]);
